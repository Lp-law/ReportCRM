import {
  require_react
} from "./chunk-YHPANKLD.js";
import {
  __toESM
} from "./chunk-PR4QN5HX.js";

// node_modules/@grammarly/editor-sdk-react/lib/index.esm.js
var import_react = __toESM(require_react());

// node_modules/@grammarly/editor-sdk/lib/index.esm.js
function t(t3, n3, r3) {
  return n3 in t3 ? Object.defineProperty(t3, n3, { value: r3, enumerable: true, configurable: true, writable: true }) : t3[n3] = r3, t3;
}
var n = /* @__PURE__ */ new Map();
var r = class _r extends Error {
  constructor(n3, r3) {
    super(), t(this, "args", void 0), t(this, "code", void 0), t(this, "url", void 0), t(this, "_c", void 0);
    var e3 = new URL("https://developer.grammarly.com/docs/error-explainer");
    e3.searchParams.set("code", n3.toString()), r3.forEach((t3) => e3.searchParams.append("args", function(t4) {
      if (t4 instanceof Error) return t4.message + "\n" + String(t4.stack);
      if (null == t4) return "null";
      if ("object" == typeof t4) try {
        return Object.prototype.toString.call(t4);
      } catch (t5) {
      }
      return String(t4);
    }(t3))), null != this.stack && e3.searchParams.set("trace", this.stack), this.message = "Minified error #".concat(n3, ": See ").concat(e3.toString(), " for details."), this.args = r3, this.code = n3, this.url = e3.toString();
  }
  toUserMessage() {
    var t3 = n.get("".concat(this.code));
    if (null == t3) return [this];
    var r3 = new Map(this.args.map((t4, n3) => ["${".concat(n3, "}"), t4])), e3 = t3.split(/(\${\d+})/).filter((t4) => "" !== t4);
    return e3.map((t4) => {
      var n3;
      return null !== (n3 = r3.get(t4)) && void 0 !== n3 ? n3 : t4;
    });
  }
  toJSON() {
    return { name: "InvariantError", message: this.message, description: this._m, code: this.code, args: this.args, stack: this.stack };
  }
  static setMessages(t3) {
    n = t3;
  }
  static create(t3, n3, e3, a3) {
    null != a3 && n3.push(a3);
    var o3 = new _r(t3, n3, e3);
    return o3.stack = null == a3 ? void 0 : a3.stack, o3._m = e3, o3;
  }
};
var e = /* @__PURE__ */ new WeakMap();
async function a(t3, n3) {
  const a3 = e.get(t3);
  if (null != a3) return await a3;
  !function(t4) {
    null == t4.Grammarly && (t4.Grammarly = {});
  }(t3);
  const o3 = new Promise((e3, a4) => {
    try {
      let e4 = function(t4, n4) {
        return t4.document.querySelectorAll(`script[src^="${n4.replace(/\?.*$/, "")}"]`)[0];
      }(t3, n3);
      null != e4 ? o4() : (e4 = function(t4, n4) {
        const r3 = t4.document.createElement("script");
        return r3.src = n4, t4.document.head.appendChild(r3), r3;
      }(t3, n3), e4.addEventListener("load", o4), e4.addEventListener("error", function() {
        try {
          throw new r(23, []);
        } catch (t4) {
          a4(t4);
        }
      }));
    } catch (t4) {
      return a4(t4);
    }
    function o4() {
      try {
        if (null == t3.Grammarly || "function" != typeof t3.Grammarly.EditorSDK) throw new r(22, []);
        e3(t3.Grammarly);
      } catch (t4) {
        a4(t4);
      }
    }
  });
  return e.set(t3, o3), await o3;
}
async function o(t3, n3, r3) {
  return await s("@grammarly/editor-sdk", t3, n3, r3);
}
async function s(t3, n3, e3, o3) {
  if ("undefined" == typeof window && void 0 === o3) throw new r(21, []);
  const s3 = function(t4) {
    return "null" !== t4.location.origin ? t4.location.origin : "null" !== t4.origin ? t4.origin : "null";
  }(null != o3 ? o3 : window);
  "null" === s3 && (null != o3 ? o3 : window).top !== (null != o3 ? o3 : window) && console.warn("Grammarly is not supported in IFrames with `null` origin. Consider adding `sandbox='allow-same-origin allow-scripts'` to <iframe> element.");
  const i3 = new URL("https://js.grammarly.com/grammarly-editor-sdk@2.5", s3);
  null != n3 && i3.searchParams.set("clientId", n3), i3.searchParams.set("packageName", t3);
  const c2 = await a(null != o3 ? o3 : window, i3.toString());
  if (null != n3) return new c2.EditorSDK(n3, e3);
}
var i = { onBeforeSuggestionCardOpen: "before-suggestion-card-open", onSuggestionCardOpen: "suggestion-card-open", onSuggestionCardClose: "suggestion-card-close", onSuggestionCardAction: "suggestion-card-action", onPluginTurnedOff: "plugin-turned-off", onPluginError: "plugin-error", onDocumentStats: "document-stats", onSessionStats: "session-stats" };

// node_modules/@grammarly/editor-sdk-react/lib/index.esm.js
var a2 = import_react.default.createContext({});
function d(n3, r3, o3) {
  const c2 = (0, import_react.useCallback)((e3) => null == n3 ? void 0 : n3(new CustomEvent("plugin-error", { detail: e3 })), [n3]);
  (0, import_react.useEffect)(() => {
    var n4;
    "undefined" != typeof navigator && (null != r3 && null != (null === (n4 = null == o3 ? void 0 : o3.current) || void 0 === n4 ? void 0 : n4.ownerDocument.defaultView) && window !== o3.current.ownerDocument.defaultView ? s("@grammarly/editor-sdk-react", r3, void 0, o3.current.ownerDocument.defaultView).catch(c2) : s("@grammarly/editor-sdk-react").catch(c2));
  }, null != o3 && null != r3 ? [o3, r3] : []);
}
var s2 = (e3) => {
  const { clientId: t3, config: o3, children: c2 } = e3, i3 = (0, import_react.useContext)(a2);
  return d(), import_react.default.createElement(a2.Provider, { value: { clientId: null != t3 ? t3 : i3.clientId, config: { ...i3.config, ...o3 } } }, c2);
};
var m = ({ tonePosition: e3, menuPosition: t3, className: r3, ...o3 }) => import_react.default.createElement("grammarly-button", { ...o3, class: r3, "tone-position": e3, "menu-position": t3 });
function f(n3) {
  return "function" == typeof n3;
}
var g = (l) => {
  const [s3, { clientId: m2, config: g2, children: v, className: p, ...E }] = function(n3) {
    const e3 = {}, t3 = { ...n3 };
    return Object.keys(i).forEach((r3) => {
      e3[r3] = n3[r3], r3 in t3 && delete t3[r3];
    }), [e3, t3];
  }(l), h = (0, import_react.useContext)(a2), w = (0, import_react.useRef)(), y = (0, import_react.useRef)(), I = (0, import_react.useRef)(), k = (0, import_react.useCallback)((n3) => {
    w.current = n3, D();
  }, []), b = function(n3) {
    const [r3, c2] = (0, import_react.useState)({}), i3 = (0, import_react.useCallback)(() => {
      customElements.whenDefined(n3).then(() => c2((e3) => ({ ...e3, [n3]: true }))).catch(() => {
      });
    }, [n3]);
    return (0, import_react.useEffect)(i3, [i3]), !!r3[n3];
  }("grammarly-editor-plugin"), D = (0, import_react.useCallback)(() => {
    var n3;
    null != w.current && null != y.current && b && w.current.connect(y.current, null !== (n3 = I.current) && void 0 !== n3 ? n3 : void 0);
  }, [b]), P = (0, import_react.useMemo)(() => ({ ...h.config, ...g2 }), [h.config, g2]);
  return (0, import_react.useEffect)(() => {
    w.current && (w.current.config = P);
  }, [w, P]), (0, import_react.useEffect)(() => {
    if (null == w.current) return;
    const { current: n3 } = w, e3 = [];
    return Object.keys(i).forEach((t3) => {
      const r3 = s3[t3], o3 = i[t3];
      null != r3 && (n3.addEventListener(o3, r3), e3.push(() => n3.removeEventListener(o3, r3)));
    }), () => e3.forEach((n4) => n4());
  }, [...Object.values(s3), b, w.current]), d(l.onPluginError, null != m2 ? m2 : h.clientId, w), import_react.default.createElement("grammarly-editor-plugin", { ...E, ref: k, clientId: null != m2 ? m2 : h.clientId, autodetect: f(v) ? "off" : "on", class: p }, f(v) ? v({ setEditor: (n3) => {
    y.current = n3, D();
  }, setViewport: (n3) => {
    I.current = n3, D();
  } }) : v);
};
export {
  s2 as Grammarly,
  m as GrammarlyButton,
  g as GrammarlyEditorPlugin,
  o as init
};
/*! Bundled license information:

@grammarly/editor-sdk/lib/index.esm.js:
  (**
   * @license
   * (c) Copyright 2023 Grammarly, Inc.
   * 
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   * 
   *     http://www.apache.org/licenses/LICENSE-2.0
   * 
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@grammarly/editor-sdk-react/lib/index.esm.js:
  (**
   * @license
   * (c) Copyright 2023 Grammarly, Inc.
   * 
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   * 
   *     http://www.apache.org/licenses/LICENSE-2.0
   * 
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=@grammarly_editor-sdk-react.js.map
