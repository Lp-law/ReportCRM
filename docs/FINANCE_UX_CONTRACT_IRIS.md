# מיפוי UX וזרימת עבודה – מודול פיננסי (איריס)

מיפוי מנקודת המבט של איריס (FINANCE) – תצפית ואבחון בלבד.

---

## Executive Summary

איריס נכנסת ישירות לרשימת "טבלאות הוצאות" ללא מסך ביניים. זרימת העבודה הבסיסית: צור גיליון → הזן הוצאות → שמור → שלח לעו״ד → סמן שולם. יש חוסר עקביות בשמות סטטוסים בין הרשימה, המסנן והמסך הפנימי. איריס אינה רואה איזה גיליון "רשמי" לכל תיק — היא רואה את כולם ברשימה אחת. בעת גיליון שסומן שולם — היא מוצגת כקריאה בלבד, אך אין הסבר ברור מדוע. כפתורי יצוא JSON/CSV וטקסטים טכניים (INFO_ONLY, amountBeforeInfoOnly) עלולים להכביד על משתמש לא טכני.

---

## 1. נקודת כניסה

### מאיזה מסך איריס מתחילה

- **מסך ראשי**: "טבלאות הוצאות" — כותרת "ניהול גיליונות הוצאות לפי תיק ומבטחת עבור איריס (פיננסים)".
- אין מסך ביניים: התחברות FINANCE מפנה ישירות לרשימת הגיליונות.

### מה היא רואה קודם

- טבלה עם עמודות: תיק, מבטחת, גרסה, סטטוס, עודכן לאחרונה, סכום להזמנה, פעולות.
- לכל שורה: כפתור "פתח", כפתור "שולם" (אם הדיווח נשלח ולא סומן שולם), כפתור מחיקה (לפי כללי המחיקה המבוקרת).
- סינון לפי סטטוס (הכל, טיוטה, מוכן לדיווח, שובץ בדיווח, ארכיון) ומבטחת.
- תווית "תיק פעיל" / "התיק סגור" / "תיק לא נמצא" תחת מספר התיק.

### האם ברור לה

| שאלה | תשובה |
|------|--------|
| איזה תיק פעיל | חלקית — יש תווית "תיק פעיל" / "התיק סגור", אך "תיק לא נמצא" יכול לבלבל (התיק קיים במערכת אך לא בתיקיות). |
| איזה גיליון רשמי | לא — אין אינדיקציה איזה גיליון הוא הרשמי לתיק. איריס רואה "דיווח כספי #1", "#2", "#3" בלי הבחנה. |
| מה הסטטוס | לא תמיד — הסטטוס ברשימה (irisStatusLabel) יכול להיות "נשלח לעו״ד", "שולם", "ממתין לעו״ד" וכו׳. במסך הפנימי מוצג "סטטוס: מוכן לדיווח" (statusHe) — חוסר עקביות עם הרשימה והמסנן. |

---

## 2. פעולות שגרתיות

### הוספת הוצאה

| צפייה | מציאות |
|-------|--------|
| לחיצה על "הוסף שורה" — הוספת שורה לטבלה. | עובד — שורה חדשה מתווספת עם שדות: סוג (Expense / Compensation / Adjustment), ספק, תיאור, תאריך, כמות, מחיר, מע״מ, נספח. |
| שמירה אוטומטית או ברורה. | שמירה אוטומטית — לא. איריס חייבת ללחוץ "שמור טיוטה". שורה חדשה נשמרת רק בשמירה — לא מיידית. |

**בלבול אפשרי**: איריס יכולה לחשוב שהשורה נשמרה כי היא רואה אותה — אך עד שלא לוחצת "שמור טיוטה", השינויים לא נשמרים.

### עריכת הוצאה

| צפייה | מציאות |
|-------|--------|
| שינוי שדה — עדכון מידי או בעת שמירה. | עדכון בעת שמירה בלבד. |
| מחיקת שורה — אפשרות לבטל. | אין Undo. לחיצה על "מחק" מוחקת מיד (אם לא במצב קריאה בלבד). |

### מעבר בין גיליונות

| צפייה | מציאות |
|-------|--------|
| חזרה לרשימה — לחיצה על "חזרה לרשימה". | עובד. |
| איזה גיליון פעיל / רשמי | אין הבהרה. איריס רואה את כל הגיליונות לתיק ברשימה — בלי סימון רשמי. |

### חיבור גיליון לדיווח

| צפייה | מציאות |
|-------|--------|
| "סיימתי – שלח לעו״ד" — הגיליון נשלח לעורכת הדין. | עובד — המערכת מעדכנת סטטוס ל־READY_FOR_REPORT, יוצרת/מעדכנת דיווח, ושולחת הודעה. |
| בחירת עו״ד — אם יש דיווח מקושר, יש dropdown "לבחור למי לשלוח". | ברוב המקרים איריס רואה עו״ד אחד (הבעלים על הדיווח) — הבחירה כמעט אוטומטית. |

### צפייה בגיליון אחרי "שולם"

| צפייה | מציאות |
|-------|--------|
| הגיליון נעול — אי אפשר לערוך. | כן — בפריסה הנוכחית מוצגת כותרת "ההוצאה סומנה כשולמה – מצב קריאה בלבד". הכפתורים "שמור טיוטה" ו"סיימתי – שלח לעו״ד" מושבתים. |
| הבנה מדוע נחסמה העריכה. | חלקית — הכותרת מסבירה, אך אין הסבר עסקי (למשל: "הדיווח כבר נשלח לתשלום ולכן לא ניתן לשנות"). |

---

## 3. נקודות רגישות (UX Risk)

### איריס עלולה לחשוב שמשהו "לא נשמר"

- **שמירה ידנית**: כפתור "שמור טיוטה" — איריס חייבת ללחוץ כדי לשמור. אם תסגור את המסך בלי לשמור, השינויים יאבדו.
- **הודעת הצלחה**: מוצגת "הטיוטה נשמרה בהצלחה" — אך היא נעלמת ולא נשמרת בהיסטוריה.

### איריס עלולה לפחד לגעת במספר

- **שדות מחושבים**: "שולם ע״י המבטחת" — read-only. איריס מבינה שלא תשנה אותו ישירות.
- **השתתפות עצמית, קיזוזים**: שדות ניתנים לעריכה. איריס עלולה לחשוש לשנות מתוך חשש לשבור חישובים — בלי הנחיה ברורה מה מותר לשנות.

### איריס לא מבינה אם מותר לערוך או לא

- **מצב קריאה בלבד**: מוצגת כותרת "מצב קריאה בלבד" — אך לא כל האלמנטים מושבתים בצורה בולטת. ייתכן שתנסה ללחוץ על שדה ותגלה שהוא לא מגיב.
- **כפתור מחיקה**: אם הגיליון מקושר לדיווח ששולם — הכפתור נעלם לגמרי (לא מוצג). איריס לא מקבלת הסבר מדוע אין אפשרות למחוק.

### חסימה טכנית מרגישה "עונשית" ולא הגיונית

- **סימון שולם**: איריס מסמנת "שולם" בדשבורד — מיד הגיליון נעול. אם טעתה בסימון, היא לא יכולה לתקן (רק ADMIN). אין "ביטול שולם" או אישור ברור.
- **מחיקה**: גיליון משויך לדיווח ששולם — איריס לא רואה כפתור מחיקה. אין הודעה מהסוג "לא ניתן למחוק גיליון שמשויך לדיווח ששולם".

---

## 4. מצבים מיוחדים

### גיליון מקושר לדיווח שטרם שולם

- איריס רואה "נשלח לחברת הביטוח" או "ממתין לעו״ד" (לפי סטטוס הדיווח).
- כפתור "שולם" מוצג כש־status === SENT && !isPaid.
- עריכה מותרת — איריס יכולה לשנות שורות ומטא.
- מחיקה מותרת — עם confirm רגיל.

**מה איריס מבינה**: "הדיווח אצל העו״ד / נשלח, עדיין אפשר לערוך". לא תמיד ברור מתי הדיווח כבר "סגור" ולא כדאי לשנות.

### גיליון מקושר לדיווח ששולם

- איריס רואה "שולם" בסטטוס.
- כותרת "ההוצאה סומנה כשולמה – מצב קריאה בלבד".
- עריכה חסומה; כפתורי שמירה ושליחה מושבתים.
- כפתור מחיקה לא מוצג.

**מה איריס מבינה**: "נעול, אסור לגעת". לא ברור אם זה נעילה עסקית קבועה או זמנית, ואין הסבר על תפקיד ה־ADMIN.

### ADMIN נכנס אחרי שולם

- כותרת: "עריכת הוצאה שסומנה כשולמה (ADMIN)" + "חובה להזין סיבת השינוי לפני שמירה".
- שדה חובה: "סיבת השינוי (חובה)".
- עריכה מותרת — ADMIN יכול לשנות, אך חייב להזין סיבה.

**מה איריס/ADMIN מבין**: "אפשר לערוך, אבל חייבים לתת סיבה". לא מובן היכן הסיבה נשמרת ומי יראה אותה.

### מחיקת גיליון

| מצב | מה איריס רואה | מה קורה |
|-----|----------------|---------|
| גיליון לא מקושר | כפתור מחיקה | confirm "למחוק? לא ניתן לבטל" → מחיקה |
| גיליון מקושר, דיווח לא שולם | כפתור מחיקה | confirm → מחיקה |
| גיליון מקושר, דיווח שולם | אין כפתור מחיקה | — |

**מה איריס מבינה**: כשהכפתור נעלם — "לא ניתן למחוק". אין הסבר בטקסט למשתמש.

---

## 5. מה איריס לא צריכה לראות (או שמבלבל)

| רכיב | תיאור |
|------|--------|
| יצוא JSON | כפתור "יצוא JSON" — רלוונטי למפתחים, לא למשתמש פיננסי רגיל. |
| יצוא ל‑Excel (CSV) | שימושי, אך המיקום והעיצוב כשל כפתור משני — לא בולט ככלי עבודה יומיומי. |
| "סכום להזמנה בדיווח זה לפני INFO_ONLY" | מונח טכני — איריס לא בהכרח מבינה מה זה INFO_ONLY. |
| "INFO_ONLY – לידיעה בלבד" | מובן למי שמכיר את התהליך, אך יכול להרגיש מונח מערכתי. |
| "הטבלה הרשמית בדו״ח / PDF היא מצטברת לכל ההיסטוריה בתיק" | טקסט עזרה — נכון, אך ארוך וטכני. |
| שמות סוגי שורה באנגלית | "Expense", "Compensation pursuant to a settlement", "Adjustment" — לא עברית. |
| "Expenses Table – Preview" | כותרת תצוגה מקדימה באנגלית. |
| "בחירה אוטומטית לפי הדו"ח האחרון בתיק" | ברור, אך ה־dropdown מופיע רק כשיש דיווח מקושר — לא תמיד ברור מתי רלוונטי. |

---

## 6. Flow יומי של איריס (בולטים)

1. **כניסה** → רשימת טבלאות הוצאות.
2. **סינון** → לפי סטטוס / מבטחת (אם רלוונטי).
3. **צפייה** → בחירת גיליון → "פתח".
4. **עריכה** → הוספת/עדכון שורות, מטא, נספחים.
5. **שמירה** → "שמור טיוטה" (חובה).
6. **שליחה** → "סיימתי – שלח לעו״ד" (כשמוכן).
7. **סימון שולם** → בדשבורד, כפתור "שולם" (כשהדיווח נשלח).
8. **מחיקה** → רק כשמותר — עם confirm, או (ADMIN) עם סיבת מחיקה.

---

## 7. נקודות חיכוך UX

- יצירת גיליון חדש דרך `window.prompt` — חוויית משתמש חלשה.
- חוסר עקביות בטקסטי סטטוס: "נשלח לעו״ד" ברשימה, "מוכן לדיווח" במסך הפנימי ובמסנן.
- אין אינדיקציה איזה גיליון רשמי לכל תיק.
- הסבר חלש על מצב קריאה בלבד — למה נעול, מתי משתחרר.
- הסבר חלש על מחיקה — מדוע אין כפתור כשהגיליון מקושר לדיווח ששולם.
- כפתורי יצוא JSON/CSV — מיקום וטקסט לא מותאמים למשתמש פיננסי.

---

## 8. נקודות חוסר ודאות / פחד משתמש

- פחד שלא נשמר — בגלל צורך בלחיצה ידנית על "שמור טיוטה".
- פחד לגעת בשדות חישוב — אי־ודאות מה מותר לשנות (השתתפות עצמית, התאמות).
- חוסר ודאות אחרי "שולם" — האם זה סופי, האם יש דרך חזרה, ומי יכול לשנות.
- חוסר ודאות עם גיליונות מרובים — איזה מהם "נכון", איזה יופיע בדיווח.

---

## 9. מקומות שבהם UX חייב guardrails

- **לפני שמירה**: אזהרה או תזכורת כשהמשתמש יוצא/סוגר בלי לשמור.
- **מצב קריאה בלבד**: הסבר ברור ומדורג — למה נעול, מי יכול לערוך (ADMIN), איך מתעדים שינוי.
- **מחיקה**: כשהכפתור חסום — הודעה מסוג "לא ניתן למחוק גיליון שמשויך לדיווח ששולם".
- **גיליון רשמי**: הבהרה איזה גיליון רשמי לכל תיק — גם אם רק בתצוגה.

---

## 10. דברים מיותרים בעיני משתמשת

- כפתור "יצוא JSON".
- טקסטים טכניים ארוכים ("הטבלה הרשמית בדו״ח / PDF היא מצטברת...", "amountBeforeInfoOnly").
- שמות באנגלית בטופס (Expense, Compensation, Adjustment, Preview).

---

## 11. סיכום: מה אסור לשבור בשלב הבא

- **שמירה ידנית** — "שמור טיוטה" כנקודת שמירה מרכזית.
- **זרימת "שלח לעו״ד"** — כפתור ושליחת הודעה.
- **כפתור "שולם"** — סימון דיווח כשולם.
- **נעילה אחרי שולם** — חסימת עריכה למשתמש רגיל.
- **מחיקה מבוקרת** — חוקים לגבי מחיקה (לא מקושר / מקושר לא שולם / מקושר שולם).
- **סרגל סיכומים** — "סיכום לדיווח הנוכחי" ו"סיכום מצטבר לתיק".
- **היסטוריה פיננסית** — גיליונות קודמים ושורות היסטוריות.
- **תשלומים שהתקבלו** — רישום תשלומים בתיק.
