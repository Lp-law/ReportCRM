(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Iu={exports:{}},ei={},Du={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),Sm=Symbol.for("react.portal"),bm=Symbol.for("react.fragment"),jm=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),km=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Tm=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Am=Symbol.for("react.memo"),Im=Symbol.for("react.lazy"),nc=Symbol.iterator;function Dm(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var _u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pu=Object.assign,Lu={};function Wr(e,t,n){this.props=e,this.context=t,this.refs=Lu,this.updater=n||_u}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ou(){}Ou.prototype=Wr.prototype;function Ua(e,t,n){this.props=e,this.context=t,this.refs=Lu,this.updater=n||_u}var Va=Ua.prototype=new Ou;Va.constructor=Ua;Pu(Va,Wr.prototype);Va.isPureReactComponent=!0;var rc=Array.isArray,Mu=Object.prototype.hasOwnProperty,Ga={current:null},Fu={key:!0,ref:!0,__self:!0,__source:!0};function Bu(e,t,n){var r,l={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Mu.call(t,r)&&!Fu.hasOwnProperty(r)&&(l[r]=t[r]);var o=arguments.length-2;if(o===1)l.children=n;else if(1<o){for(var c=Array(o),p=0;p<o;p++)c[p]=arguments[p+2];l.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)l[r]===void 0&&(l[r]=o[r]);return{$$typeof:Ms,type:e,key:i,ref:a,props:l,_owner:Ga.current}}function _m(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ka(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var sc=/\/+/g;function xi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function ml(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ms:case Sm:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+xi(a,0):r,rc(l)?(n="",e!=null&&(n=e.replace(sc,"$&/")+"/"),ml(l,t,n,"",function(p){return p})):l!=null&&(Ka(l)&&(l=_m(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(sc,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",rc(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+xi(i,o);a+=ml(i,t,n,c,l)}else if(c=Dm(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+xi(i,o++),a+=ml(i,t,n,c,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Vs(e,t,n){if(e==null)return e;var r=[],l=0;return ml(e,r,"","",function(i){return t.call(n,i,l++)}),r}function Lm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},pl={transition:null},Om={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:pl,ReactCurrentOwner:Ga};function $u(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Vs,forEach:function(e,t,n){Vs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vs(e,function(){t++}),t},toArray:function(e){return Vs(e,function(t){return t})||[]},only:function(e){if(!Ka(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Wr;me.Fragment=bm;me.Profiler=Em;me.PureComponent=Ua;me.StrictMode=jm;me.Suspense=Rm;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Om;me.act=$u;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Pu({},e.props),l=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Ga.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Mu.call(t,c)&&!Fu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var p=0;p<c;p++)o[p]=arguments[p+2];r.children=o}return{$$typeof:Ms,type:e.type,key:l,ref:i,props:r,_owner:a}};me.createContext=function(e){return e={$$typeof:Cm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:km,_context:e},e.Consumer=e};me.createElement=Bu;me.createFactory=function(e){var t=Bu.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:Tm,render:e}};me.isValidElement=Ka;me.lazy=function(e){return{$$typeof:Im,_payload:{_status:-1,_result:e},_init:Lm}};me.memo=function(e,t){return{$$typeof:Am,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=pl.transition;pl.transition={};try{e()}finally{pl.transition=t}};me.unstable_act=$u;me.useCallback=function(e,t){return at.current.useCallback(e,t)};me.useContext=function(e){return at.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return at.current.useDeferredValue(e)};me.useEffect=function(e,t){return at.current.useEffect(e,t)};me.useId=function(){return at.current.useId()};me.useImperativeHandle=function(e,t,n){return at.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return at.current.useMemo(e,t)};me.useReducer=function(e,t,n){return at.current.useReducer(e,t,n)};me.useRef=function(e){return at.current.useRef(e)};me.useState=function(e){return at.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return at.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return at.current.useTransition()};me.version="18.3.1";Du.exports=me;var b=Du.exports;const Ya=wm(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=b,Fm=Symbol.for("react.element"),Bm=Symbol.for("react.fragment"),$m=Object.prototype.hasOwnProperty,zm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wm={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,n){var r,l={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)$m.call(t,r)&&!Wm.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Fm,type:e,key:i,ref:a,props:l,_owner:zm.current}}ei.Fragment=Bm;ei.jsx=zu;ei.jsxs=zu;Iu.exports=ei;var s=Iu.exports,Ki={},Wu={exports:{}},Ct={},Hu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,W){var G=C.length;C.push(W);e:for(;0<G;){var fe=G-1>>>1,le=C[fe];if(0<l(le,W))C[fe]=W,C[G]=le,G=fe;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var W=C[0],G=C.pop();if(G!==W){C[0]=G;e:for(var fe=0,le=C.length,be=le>>>1;fe<be;){var Pe=2*(fe+1)-1,gt=C[Pe],je=Pe+1,yt=C[je];if(0>l(gt,G))je<le&&0>l(yt,gt)?(C[fe]=yt,C[je]=G,fe=je):(C[fe]=gt,C[Pe]=G,fe=Pe);else if(je<le&&0>l(yt,G))C[fe]=yt,C[je]=G,fe=je;else break e}}return W}function l(C,W){var G=C.sortIndex-W.sortIndex;return G!==0?G:C.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],p=[],v=1,g=null,y=3,T=!1,R=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(C){for(var W=n(p);W!==null;){if(W.callback===null)r(p);else if(W.startTime<=C)r(p),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(p)}}function E(C){if(j=!1,h(C),!R)if(n(c)!==null)R=!0,L(A);else{var W=n(p);W!==null&&q(E,W.startTime-C)}}function A(C,W){R=!1,j&&(j=!1,f(H),H=-1),T=!0;var G=y;try{for(h(W),g=n(c);g!==null&&(!(g.expirationTime>W)||C&&!w());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,y=g.priorityLevel;var le=fe(g.expirationTime<=W);W=e.unstable_now(),typeof le=="function"?g.callback=le:g===n(c)&&r(c),h(W)}else r(c);g=n(c)}if(g!==null)var be=!0;else{var Pe=n(p);Pe!==null&&q(E,Pe.startTime-W),be=!1}return be}finally{g=null,y=G,T=!1}}var I=!1,B=null,H=-1,se=5,te=-1;function w(){return!(e.unstable_now()-te<se)}function X(){if(B!==null){var C=e.unstable_now();te=C;var W=!0;try{W=B(!0,C)}finally{W?Z():(I=!1,B=null)}}else I=!1}var Z;if(typeof m=="function")Z=function(){m(X)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,V=D.port2;D.port1.onmessage=X,Z=function(){V.postMessage(null)}}else Z=function(){z(X,0)};function L(C){B=C,I||(I=!0,Z())}function q(C,W){H=z(function(){C(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){R||T||(R=!0,L(A))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(C){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var G=y;y=W;try{return C()}finally{y=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,W){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var G=y;y=C;try{return W()}finally{y=G}},e.unstable_scheduleCallback=function(C,W,G){var fe=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?fe+G:fe):G=fe,C){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=G+le,C={id:v++,callback:W,priorityLevel:C,startTime:G,expirationTime:le,sortIndex:-1},G>fe?(C.sortIndex=G,t(p,C),n(c)===null&&C===n(p)&&(j?(f(H),H=-1):j=!0,q(E,G-fe))):(C.sortIndex=le,t(c,C),R||T||(R=!0,L(A))),C},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(C){var W=y;return function(){var G=y;y=W;try{return C.apply(this,arguments)}finally{y=G}}}})(Uu);Hu.exports=Uu;var Hm=Hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=b,Et=Hm;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vu=new Set,gs={};function or(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(gs[e]=t,e=0;e<t.length;e++)Vu.add(t[e])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yi=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lc={},ic={};function Gm(e){return Yi.call(ic,e)?!0:Yi.call(lc,e)?!1:Vm.test(e)?ic[e]=!0:(lc[e]=!0,!1)}function Km(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ym(e,t,n,r){if(t===null||typeof t>"u"||Km(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,l,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qa=/[\-:]([a-z])/g;function Xa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qa,Xa);Xe[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qa,Xa);Xe[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qa,Xa);Xe[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ja(e,t,n,r){var l=Xe.hasOwnProperty(t)?Xe[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ym(t,n,l,r)&&(n=null),r||l===null?Gm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Sn=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),gr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),qa=Symbol.for("react.strict_mode"),Qi=Symbol.for("react.profiler"),Gu=Symbol.for("react.provider"),Ku=Symbol.for("react.context"),Za=Symbol.for("react.forward_ref"),Xi=Symbol.for("react.suspense"),Ji=Symbol.for("react.suspense_list"),eo=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),Yu=Symbol.for("react.offscreen"),ac=Symbol.iterator;function Yr(e){return e===null||typeof e!="object"?null:(e=ac&&e[ac]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,gi;function ss(e){if(gi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gi=t&&t[1]||""}return`
`+gi+e}var yi=!1;function vi(e,t){if(!e||yi)return"";yi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var l=p.stack.split(`
`),i=r.stack.split(`
`),a=l.length-1,o=i.length-1;1<=a&&0<=o&&l[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(l[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||l[a]!==i[o]){var c=`
`+l[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{yi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function Qm(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=vi(e.type,!1),e;case 11:return e=vi(e.type.render,!1),e;case 1:return e=vi(e.type,!0),e;default:return""}}function qi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yr:return"Fragment";case gr:return"Portal";case Qi:return"Profiler";case qa:return"StrictMode";case Xi:return"Suspense";case Ji:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ku:return(e.displayName||"Context")+".Consumer";case Gu:return(e._context.displayName||"Context")+".Provider";case Za:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case eo:return t=e.displayName||null,t!==null?t:qi(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return qi(e(t))}catch{}}return null}function Xm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qi(t);case 8:return t===qa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jm(e){var t=Qu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ks(e){e._valueTracker||(e._valueTracker=Jm(e))}function Xu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function El(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zi(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ju(e,t){t=t.checked,t!=null&&Ja(e,"checked",t,!1)}function ea(e,t){Ju(e,t);var n=zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&ta(e,t.type,zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ta(e,t,n){(t!=="number"||El(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ls=Array.isArray;function Rr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function na(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(ls(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zn(n)}}function qu(e,t){var n=zn(t.value),r=zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ys(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qm=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function td(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function nd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=td(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Zm=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sa(e,t){if(t){if(Zm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function la(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ia=null;function to(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aa=null,Ar=null,Ir=null;function fc(e){if(e=$s(e)){if(typeof aa!="function")throw Error(M(280));var t=e.stateNode;t&&(t=li(t),aa(e.stateNode,e.type,t))}}function rd(e){Ar?Ir?Ir.push(e):Ir=[e]:Ar=e}function sd(){if(Ar){var e=Ar,t=Ir;if(Ir=Ar=null,fc(e),t)for(e=0;e<t.length;e++)fc(t[e])}}function ld(e,t){return e(t)}function id(){}var Ni=!1;function ad(e,t,n){if(Ni)return e(t,n);Ni=!0;try{return ld(e,t,n)}finally{Ni=!1,(Ar!==null||Ir!==null)&&(id(),sd())}}function vs(e,t){var n=e.stateNode;if(n===null)return null;var r=li(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var oa=!1;if(yn)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){oa=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{oa=!1}function ep(e,t,n,r,l,i,a,o,c){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var cs=!1,kl=null,Cl=!1,ca=null,tp={onError:function(e){cs=!0,kl=e}};function np(e,t,n,r,l,i,a,o,c){cs=!1,kl=null,ep.apply(tp,arguments)}function rp(e,t,n,r,l,i,a,o,c){if(np.apply(this,arguments),cs){if(cs){var p=kl;cs=!1,kl=null}else throw Error(M(198));Cl||(Cl=!0,ca=p)}}function cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function od(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mc(e){if(cr(e)!==e)throw Error(M(188))}function sp(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return mc(l),e;if(i===r)return mc(l),t;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=l,r=i;else{for(var a=!1,o=l.child;o;){if(o===n){a=!0,n=l,r=i;break}if(o===r){a=!0,r=l,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=l;break}if(o===r){a=!0,r=i,n=l;break}o=o.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function cd(e){return e=sp(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var dd=Et.unstable_scheduleCallback,pc=Et.unstable_cancelCallback,lp=Et.unstable_shouldYield,ip=Et.unstable_requestPaint,Oe=Et.unstable_now,ap=Et.unstable_getCurrentPriorityLevel,no=Et.unstable_ImmediatePriority,fd=Et.unstable_UserBlockingPriority,Tl=Et.unstable_NormalPriority,op=Et.unstable_LowPriority,md=Et.unstable_IdlePriority,ti=null,ln=null;function cp(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(ti,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:fp,up=Math.log,dp=Math.LN2;function fp(e){return e>>>=0,e===0?32:31-(up(e)/dp|0)|0}var Qs=64,Xs=4194304;function is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~l;o!==0?r=is(o):(i&=a,i!==0&&(r=is(i)))}else a=n&~l,a!==0?r=is(a):i!==0&&(r=is(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),l=1<<n,r|=e[n],t&=~l;return r}function mp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Vt(i),o=1<<a,c=l[a];c===-1?(!(o&n)||o&r)&&(l[a]=mp(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pd(){var e=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),e}function wi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function hp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Vt(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function ro(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Se=0;function hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xd,so,gd,yd,vd,da=!1,Js=[],_n=null,Pn=null,Ln=null,Ns=new Map,ws=new Map,Tn=[],xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hc(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(t.pointerId)}}function Xr(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=$s(t),t!==null&&so(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function gp(e,t,n,r,l){switch(t){case"focusin":return _n=Xr(_n,e,t,n,r,l),!0;case"dragenter":return Pn=Xr(Pn,e,t,n,r,l),!0;case"mouseover":return Ln=Xr(Ln,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Ns.set(i,Xr(Ns.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,ws.set(i,Xr(ws.get(i)||null,e,t,n,r,l)),!0}return!1}function Nd(e){var t=Xn(e.target);if(t!==null){var n=cr(t);if(n!==null){if(t=n.tag,t===13){if(t=od(n),t!==null){e.blockedOn=t,vd(e.priority,function(){gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ia=r,n.target.dispatchEvent(r),ia=null}else return t=$s(n),t!==null&&so(t),e.blockedOn=n,!1;t.shift()}return!0}function xc(e,t,n){hl(e)&&n.delete(t)}function yp(){da=!1,_n!==null&&hl(_n)&&(_n=null),Pn!==null&&hl(Pn)&&(Pn=null),Ln!==null&&hl(Ln)&&(Ln=null),Ns.forEach(xc),ws.forEach(xc)}function Jr(e,t){e.blockedOn===t&&(e.blockedOn=null,da||(da=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,yp)))}function Ss(e){function t(l){return Jr(l,e)}if(0<Js.length){Jr(Js[0],e);for(var n=1;n<Js.length;n++){var r=Js[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&Jr(_n,e),Pn!==null&&Jr(Pn,e),Ln!==null&&Jr(Ln,e),Ns.forEach(t),ws.forEach(t),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Nd(n),n.blockedOn===null&&Tn.shift()}var Dr=Sn.ReactCurrentBatchConfig,Al=!0;function vp(e,t,n,r){var l=Se,i=Dr.transition;Dr.transition=null;try{Se=1,lo(e,t,n,r)}finally{Se=l,Dr.transition=i}}function Np(e,t,n,r){var l=Se,i=Dr.transition;Dr.transition=null;try{Se=4,lo(e,t,n,r)}finally{Se=l,Dr.transition=i}}function lo(e,t,n,r){if(Al){var l=fa(e,t,n,r);if(l===null)Ii(e,t,r,Il,n),hc(e,r);else if(gp(l,e,t,n,r))r.stopPropagation();else if(hc(e,r),t&4&&-1<xp.indexOf(e)){for(;l!==null;){var i=$s(l);if(i!==null&&xd(i),i=fa(e,t,n,r),i===null&&Ii(e,t,r,Il,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else Ii(e,t,r,null,n)}}var Il=null;function fa(e,t,n,r){if(Il=null,e=to(r),e=Xn(e),e!==null)if(t=cr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=od(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Il=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ap()){case no:return 1;case fd:return 4;case Tl:case op:return 16;case md:return 536870912;default:return 16}default:return 16}}var In=null,io=null,xl=null;function Sd(){if(xl)return xl;var e,t=io,n=t.length,r,l="value"in In?In.value:In.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[i-r];r++);return xl=l.slice(e,1<r?1-r:void 0)}function gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function gc(){return!1}function Tt(e){function t(n,r,l,i,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qs:gc,this.isPropagationStopped=gc,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=Tt(Hr),Bs=_e({},Hr,{view:0,detail:0}),wp=Tt(Bs),Si,bi,qr,ni=_e({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Si=e.screenX-qr.screenX,bi=e.screenY-qr.screenY):bi=Si=0,qr=e),Si)},movementY:function(e){return"movementY"in e?e.movementY:bi}}),yc=Tt(ni),Sp=_e({},ni,{dataTransfer:0}),bp=Tt(Sp),jp=_e({},Bs,{relatedTarget:0}),ji=Tt(jp),Ep=_e({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),kp=Tt(Ep),Cp=_e({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tp=Tt(Cp),Rp=_e({},Hr,{data:0}),vc=Tt(Rp),Ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _p(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dp[e])?!!t[e]:!1}function oo(){return _p}var Pp=_e({},Bs,{key:function(e){if(e.key){var t=Ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ip[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lp=Tt(Pp),Op=_e({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=Tt(Op),Mp=_e({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Fp=Tt(Mp),Bp=_e({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),$p=Tt(Bp),zp=_e({},ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=Tt(zp),Hp=[9,13,27,32],co=yn&&"CompositionEvent"in window,us=null;yn&&"documentMode"in document&&(us=document.documentMode);var Up=yn&&"TextEvent"in window&&!us,bd=yn&&(!co||us&&8<us&&11>=us),wc=" ",Sc=!1;function jd(e,t){switch(e){case"keyup":return Hp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vr=!1;function Vp(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(Sc=!0,wc);case"textInput":return e=t.data,e===wc&&Sc?null:e;default:return null}}function Gp(e,t){if(vr)return e==="compositionend"||!co&&jd(e,t)?(e=Sd(),xl=io=In=null,vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bd&&t.locale!=="ko"?null:t.data;default:return null}}var Kp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kp[e.type]:t==="textarea"}function kd(e,t,n,r){rd(r),t=Dl(t,"onChange"),0<t.length&&(n=new ao("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ds=null,bs=null;function Yp(e){Md(e,0)}function ri(e){var t=Sr(e);if(Xu(t))return e}function Qp(e,t){if(e==="change")return t}var Cd=!1;if(yn){var Ei;if(yn){var ki="oninput"in document;if(!ki){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),ki=typeof jc.oninput=="function"}Ei=ki}else Ei=!1;Cd=Ei&&(!document.documentMode||9<document.documentMode)}function Ec(){ds&&(ds.detachEvent("onpropertychange",Td),bs=ds=null)}function Td(e){if(e.propertyName==="value"&&ri(bs)){var t=[];kd(t,bs,e,to(e)),ad(Yp,t)}}function Xp(e,t,n){e==="focusin"?(Ec(),ds=t,bs=n,ds.attachEvent("onpropertychange",Td)):e==="focusout"&&Ec()}function Jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ri(bs)}function qp(e,t){if(e==="click")return ri(t)}function Zp(e,t){if(e==="input"||e==="change")return ri(t)}function eh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:eh;function js(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!Yi.call(t,l)||!Kt(e[l],t[l]))return!1}return!0}function kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,t){var n=kc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kc(n)}}function Rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ad(){for(var e=window,t=El();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=El(e.document)}return t}function uo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function th(e){var t=Ad(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Rd(n.ownerDocument.documentElement,n)){if(r!==null&&uo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Cc(n,i);var a=Cc(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nh=yn&&"documentMode"in document&&11>=document.documentMode,Nr=null,ma=null,fs=null,pa=!1;function Tc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pa||Nr==null||Nr!==El(r)||(r=Nr,"selectionStart"in r&&uo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fs&&js(fs,r)||(fs=r,r=Dl(ma,"onSelect"),0<r.length&&(t=new ao("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nr)))}function Zs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Ci={},Id={};yn&&(Id=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function si(e){if(Ci[e])return Ci[e];if(!wr[e])return e;var t=wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Id)return Ci[e]=t[n];return e}var Dd=si("animationend"),_d=si("animationiteration"),Pd=si("animationstart"),Ld=si("transitionend"),Od=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(e,t){Od.set(e,t),or(t,[e])}for(var Ti=0;Ti<Rc.length;Ti++){var Ri=Rc[Ti],rh=Ri.toLowerCase(),sh=Ri[0].toUpperCase()+Ri.slice(1);Hn(rh,"on"+sh)}Hn(Dd,"onAnimationEnd");Hn(_d,"onAnimationIteration");Hn(Pd,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(Ld,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lh=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Ac(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rp(r,t,void 0,e),e.currentTarget=null}function Md(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,p=o.currentTarget;if(o=o.listener,c!==i&&l.isPropagationStopped())break e;Ac(l,o,p),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,p=o.currentTarget,o=o.listener,c!==i&&l.isPropagationStopped())break e;Ac(l,o,p),i=c}}}if(Cl)throw e=ca,Cl=!1,ca=null,e}function Ce(e,t){var n=t[va];n===void 0&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Fd(t,e,2,!1),n.add(r))}function Ai(e,t,n){var r=0;t&&(r|=4),Fd(n,e,r,t)}var el="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[el]){e[el]=!0,Vu.forEach(function(n){n!=="selectionchange"&&(lh.has(n)||Ai(n,!1,e),Ai(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[el]||(t[el]=!0,Ai("selectionchange",!1,t))}}function Fd(e,t,n,r){switch(wd(t)){case 1:var l=vp;break;case 4:l=Np;break;default:l=lo}n=l.bind(null,t,n,e),l=void 0,!oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ii(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===l||o.nodeType===8&&o.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;a=a.return}for(;o!==null;){if(a=Xn(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}ad(function(){var p=i,v=to(n),g=[];e:{var y=Od.get(e);if(y!==void 0){var T=ao,R=e;switch(e){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":T=Lp;break;case"focusin":R="focus",T=ji;break;case"focusout":R="blur",T=ji;break;case"beforeblur":case"afterblur":T=ji;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=bp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Fp;break;case Dd:case _d:case Pd:T=kp;break;case Ld:T=$p;break;case"scroll":T=wp;break;case"wheel":T=Wp;break;case"copy":case"cut":case"paste":T=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Nc}var j=(t&4)!==0,z=!j&&e==="scroll",f=j?y!==null?y+"Capture":null:y;j=[];for(var m=p,h;m!==null;){h=m;var E=h.stateNode;if(h.tag===5&&E!==null&&(h=E,f!==null&&(E=vs(m,f),E!=null&&j.push(ks(m,E,h)))),z)break;m=m.return}0<j.length&&(y=new T(y,R,null,n,v),g.push({event:y,listeners:j}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",y&&n!==ia&&(R=n.relatedTarget||n.fromElement)&&(Xn(R)||R[vn]))break e;if((T||y)&&(y=v.window===v?v:(y=v.ownerDocument)?y.defaultView||y.parentWindow:window,T?(R=n.relatedTarget||n.toElement,T=p,R=R?Xn(R):null,R!==null&&(z=cr(R),R!==z||R.tag!==5&&R.tag!==6)&&(R=null)):(T=null,R=p),T!==R)){if(j=yc,E="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(j=Nc,E="onPointerLeave",f="onPointerEnter",m="pointer"),z=T==null?y:Sr(T),h=R==null?y:Sr(R),y=new j(E,m+"leave",T,n,v),y.target=z,y.relatedTarget=h,E=null,Xn(v)===p&&(j=new j(f,m+"enter",R,n,v),j.target=h,j.relatedTarget=z,E=j),z=E,T&&R)t:{for(j=T,f=R,m=0,h=j;h;h=hr(h))m++;for(h=0,E=f;E;E=hr(E))h++;for(;0<m-h;)j=hr(j),m--;for(;0<h-m;)f=hr(f),h--;for(;m--;){if(j===f||f!==null&&j===f.alternate)break t;j=hr(j),f=hr(f)}j=null}else j=null;T!==null&&Ic(g,y,T,j,!1),R!==null&&z!==null&&Ic(g,z,R,j,!0)}}e:{if(y=p?Sr(p):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var A=Qp;else if(bc(y))if(Cd)A=Zp;else{A=Jp;var I=Xp}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(A=qp);if(A&&(A=A(e,p))){kd(g,A,n,v);break e}I&&I(e,y,p),e==="focusout"&&(I=y._wrapperState)&&I.controlled&&y.type==="number"&&ta(y,"number",y.value)}switch(I=p?Sr(p):window,e){case"focusin":(bc(I)||I.contentEditable==="true")&&(Nr=I,ma=p,fs=null);break;case"focusout":fs=ma=Nr=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":pa=!1,Tc(g,n,v);break;case"selectionchange":if(nh)break;case"keydown":case"keyup":Tc(g,n,v)}var B;if(co)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else vr?jd(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(bd&&n.locale!=="ko"&&(vr||H!=="onCompositionStart"?H==="onCompositionEnd"&&vr&&(B=Sd()):(In=v,io="value"in In?In.value:In.textContent,vr=!0)),I=Dl(p,H),0<I.length&&(H=new vc(H,e,null,n,v),g.push({event:H,listeners:I}),B?H.data=B:(B=Ed(n),B!==null&&(H.data=B)))),(B=Up?Vp(e,n):Gp(e,n))&&(p=Dl(p,"onBeforeInput"),0<p.length&&(v=new vc("onBeforeInput","beforeinput",null,n,v),g.push({event:v,listeners:p}),v.data=B))}Md(g,t)})}function ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dl(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=vs(e,n),i!=null&&r.unshift(ks(e,i,l)),i=vs(e,t),i!=null&&r.push(ks(e,i,l))),e=e.return}return r}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ic(e,t,n,r,l){for(var i=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,p=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&p!==null&&(o=p,l?(c=vs(n,i),c!=null&&a.unshift(ks(n,c,o))):l||(c=vs(n,i),c!=null&&a.push(ks(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ih=/\r\n?/g,ah=/\u0000|\uFFFD/g;function Dc(e){return(typeof e=="string"?e:""+e).replace(ih,`
`).replace(ah,"")}function tl(e,t,n){if(t=Dc(t),Dc(e)!==t&&n)throw Error(M(425))}function _l(){}var ha=null,xa=null;function ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ya=typeof setTimeout=="function"?setTimeout:void 0,oh=typeof clearTimeout=="function"?clearTimeout:void 0,_c=typeof Promise=="function"?Promise:void 0,ch=typeof queueMicrotask=="function"?queueMicrotask:typeof _c<"u"?function(e){return _c.resolve(null).then(e).catch(uh)}:ya;function uh(e){setTimeout(function(){throw e})}function Di(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),Ss(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);Ss(t)}function On(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ur,Cs="__reactProps$"+Ur,vn="__reactContainer$"+Ur,va="__reactEvents$"+Ur,dh="__reactListeners$"+Ur,fh="__reactHandles$"+Ur;function Xn(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pc(e);e!==null;){if(n=e[tn])return n;e=Pc(e)}return t}e=n,n=e.parentNode}return null}function $s(e){return e=e[tn]||e[vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function li(e){return e[Cs]||null}var Na=[],br=-1;function Un(e){return{current:e}}function Te(e){0>br||(e.current=Na[br],Na[br]=null,br--)}function ke(e,t){br++,Na[br]=e.current,e.current=t}var Wn={},nt=Un(Wn),pt=Un(!1),nr=Wn;function Or(e,t){var n=e.type.contextTypes;if(!n)return Wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function ht(e){return e=e.childContextTypes,e!=null}function Pl(){Te(pt),Te(nt)}function Lc(e,t,n){if(nt.current!==Wn)throw Error(M(168));ke(nt,t),ke(pt,n)}function Bd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(M(108,Xm(e)||"Unknown",l));return _e({},n,r)}function Ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,nr=nt.current,ke(nt,e),ke(pt,pt.current),!0}function Oc(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=Bd(e,t,nr),r.__reactInternalMemoizedMergedChildContext=e,Te(pt),Te(nt),ke(nt,e)):Te(pt),ke(pt,n)}var mn=null,ii=!1,_i=!1;function $d(e){mn===null?mn=[e]:mn.push(e)}function mh(e){ii=!0,$d(e)}function Vn(){if(!_i&&mn!==null){_i=!0;var e=0,t=Se;try{var n=mn;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mn=null,ii=!1}catch(l){throw mn!==null&&(mn=mn.slice(e+1)),dd(no,Vn),l}finally{Se=t,_i=!1}}return null}var jr=[],Er=0,Ol=null,Ml=0,Dt=[],_t=0,rr=null,pn=1,hn="";function Yn(e,t){jr[Er++]=Ml,jr[Er++]=Ol,Ol=e,Ml=t}function zd(e,t,n){Dt[_t++]=pn,Dt[_t++]=hn,Dt[_t++]=rr,rr=e;var r=pn;e=hn;var l=32-Vt(r)-1;r&=~(1<<l),n+=1;var i=32-Vt(t)+l;if(30<i){var a=l-l%5;i=(r&(1<<a)-1).toString(32),r>>=a,l-=a,pn=1<<32-Vt(t)+l|n<<l|r,hn=i+e}else pn=1<<i|n<<l|r,hn=e}function fo(e){e.return!==null&&(Yn(e,1),zd(e,1,0))}function mo(e){for(;e===Ol;)Ol=jr[--Er],jr[Er]=null,Ml=jr[--Er],jr[Er]=null;for(;e===rr;)rr=Dt[--_t],Dt[_t]=null,hn=Dt[--_t],Dt[_t]=null,pn=Dt[--_t],Dt[_t]=null}var jt=null,bt=null,Re=!1,Ht=null;function Wd(e,t){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,bt=On(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rr!==null?{id:pn,overflow:hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,bt=null,!0):!1;default:return!1}}function wa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sa(e){if(Re){var t=bt;if(t){var n=t;if(!Mc(e,t)){if(wa(e))throw Error(M(418));t=On(n.nextSibling);var r=jt;t&&Mc(e,t)?Wd(r,n):(e.flags=e.flags&-4097|2,Re=!1,jt=e)}}else{if(wa(e))throw Error(M(418));e.flags=e.flags&-4097|2,Re=!1,jt=e}}}function Fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function nl(e){if(e!==jt)return!1;if(!Re)return Fc(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ga(e.type,e.memoizedProps)),t&&(t=bt)){if(wa(e))throw Hd(),Error(M(418));for(;t;)Wd(e,t),t=On(t.nextSibling)}if(Fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=On(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=jt?On(e.stateNode.nextSibling):null;return!0}function Hd(){for(var e=bt;e;)e=On(e.nextSibling)}function Mr(){bt=jt=null,Re=!1}function po(e){Ht===null?Ht=[e]:Ht.push(e)}var ph=Sn.ReactCurrentBatchConfig;function Zr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=l.refs;a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function rl(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bc(e){var t=e._init;return t(e._payload)}function Ud(e){function t(f,m){if(e){var h=f.deletions;h===null?(f.deletions=[m],f.flags|=16):h.push(m)}}function n(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function r(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function l(f,m){return f=$n(f,m),f.index=0,f.sibling=null,f}function i(f,m,h){return f.index=h,e?(h=f.alternate,h!==null?(h=h.index,h<m?(f.flags|=2,m):h):(f.flags|=2,m)):(f.flags|=1048576,m)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,m,h,E){return m===null||m.tag!==6?(m=$i(h,f.mode,E),m.return=f,m):(m=l(m,h),m.return=f,m)}function c(f,m,h,E){var A=h.type;return A===yr?v(f,m,h.props.children,E,h.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===En&&Bc(A)===m.type)?(E=l(m,h.props),E.ref=Zr(f,m,h),E.return=f,E):(E=jl(h.type,h.key,h.props,null,f.mode,E),E.ref=Zr(f,m,h),E.return=f,E)}function p(f,m,h,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==h.containerInfo||m.stateNode.implementation!==h.implementation?(m=zi(h,f.mode,E),m.return=f,m):(m=l(m,h.children||[]),m.return=f,m)}function v(f,m,h,E,A){return m===null||m.tag!==7?(m=er(h,f.mode,E,A),m.return=f,m):(m=l(m,h),m.return=f,m)}function g(f,m,h){if(typeof m=="string"&&m!==""||typeof m=="number")return m=$i(""+m,f.mode,h),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gs:return h=jl(m.type,m.key,m.props,null,f.mode,h),h.ref=Zr(f,null,m),h.return=f,h;case gr:return m=zi(m,f.mode,h),m.return=f,m;case En:var E=m._init;return g(f,E(m._payload),h)}if(ls(m)||Yr(m))return m=er(m,f.mode,h,null),m.return=f,m;rl(f,m)}return null}function y(f,m,h,E){var A=m!==null?m.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return A!==null?null:o(f,m,""+h,E);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Gs:return h.key===A?c(f,m,h,E):null;case gr:return h.key===A?p(f,m,h,E):null;case En:return A=h._init,y(f,m,A(h._payload),E)}if(ls(h)||Yr(h))return A!==null?null:v(f,m,h,E,null);rl(f,h)}return null}function T(f,m,h,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return f=f.get(h)||null,o(m,f,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gs:return f=f.get(E.key===null?h:E.key)||null,c(m,f,E,A);case gr:return f=f.get(E.key===null?h:E.key)||null,p(m,f,E,A);case En:var I=E._init;return T(f,m,h,I(E._payload),A)}if(ls(E)||Yr(E))return f=f.get(h)||null,v(m,f,E,A,null);rl(m,E)}return null}function R(f,m,h,E){for(var A=null,I=null,B=m,H=m=0,se=null;B!==null&&H<h.length;H++){B.index>H?(se=B,B=null):se=B.sibling;var te=y(f,B,h[H],E);if(te===null){B===null&&(B=se);break}e&&B&&te.alternate===null&&t(f,B),m=i(te,m,H),I===null?A=te:I.sibling=te,I=te,B=se}if(H===h.length)return n(f,B),Re&&Yn(f,H),A;if(B===null){for(;H<h.length;H++)B=g(f,h[H],E),B!==null&&(m=i(B,m,H),I===null?A=B:I.sibling=B,I=B);return Re&&Yn(f,H),A}for(B=r(f,B);H<h.length;H++)se=T(B,f,H,h[H],E),se!==null&&(e&&se.alternate!==null&&B.delete(se.key===null?H:se.key),m=i(se,m,H),I===null?A=se:I.sibling=se,I=se);return e&&B.forEach(function(w){return t(f,w)}),Re&&Yn(f,H),A}function j(f,m,h,E){var A=Yr(h);if(typeof A!="function")throw Error(M(150));if(h=A.call(h),h==null)throw Error(M(151));for(var I=A=null,B=m,H=m=0,se=null,te=h.next();B!==null&&!te.done;H++,te=h.next()){B.index>H?(se=B,B=null):se=B.sibling;var w=y(f,B,te.value,E);if(w===null){B===null&&(B=se);break}e&&B&&w.alternate===null&&t(f,B),m=i(w,m,H),I===null?A=w:I.sibling=w,I=w,B=se}if(te.done)return n(f,B),Re&&Yn(f,H),A;if(B===null){for(;!te.done;H++,te=h.next())te=g(f,te.value,E),te!==null&&(m=i(te,m,H),I===null?A=te:I.sibling=te,I=te);return Re&&Yn(f,H),A}for(B=r(f,B);!te.done;H++,te=h.next())te=T(B,f,H,te.value,E),te!==null&&(e&&te.alternate!==null&&B.delete(te.key===null?H:te.key),m=i(te,m,H),I===null?A=te:I.sibling=te,I=te);return e&&B.forEach(function(X){return t(f,X)}),Re&&Yn(f,H),A}function z(f,m,h,E){if(typeof h=="object"&&h!==null&&h.type===yr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Gs:e:{for(var A=h.key,I=m;I!==null;){if(I.key===A){if(A=h.type,A===yr){if(I.tag===7){n(f,I.sibling),m=l(I,h.props.children),m.return=f,f=m;break e}}else if(I.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===En&&Bc(A)===I.type){n(f,I.sibling),m=l(I,h.props),m.ref=Zr(f,I,h),m.return=f,f=m;break e}n(f,I);break}else t(f,I);I=I.sibling}h.type===yr?(m=er(h.props.children,f.mode,E,h.key),m.return=f,f=m):(E=jl(h.type,h.key,h.props,null,f.mode,E),E.ref=Zr(f,m,h),E.return=f,f=E)}return a(f);case gr:e:{for(I=h.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===h.containerInfo&&m.stateNode.implementation===h.implementation){n(f,m.sibling),m=l(m,h.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else t(f,m);m=m.sibling}m=zi(h,f.mode,E),m.return=f,f=m}return a(f);case En:return I=h._init,z(f,m,I(h._payload),E)}if(ls(h))return R(f,m,h,E);if(Yr(h))return j(f,m,h,E);rl(f,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,m!==null&&m.tag===6?(n(f,m.sibling),m=l(m,h),m.return=f,f=m):(n(f,m),m=$i(h,f.mode,E),m.return=f,f=m),a(f)):n(f,m)}return z}var Fr=Ud(!0),Vd=Ud(!1),Fl=Un(null),Bl=null,kr=null,ho=null;function xo(){ho=kr=Bl=null}function go(e){var t=Fl.current;Te(Fl),e._currentValue=t}function ba(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){Bl=e,ho=kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(ho!==e)if(e={context:e,memoizedValue:t,next:null},kr===null){if(Bl===null)throw Error(M(308));kr=e,Bl.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Jn=null;function yo(e){Jn===null?Jn=[e]:Jn.push(e)}function Gd(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,yo(t)):(n.next=l.next,l.next=n),t.interleaved=n,Nn(e,r)}function Nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Nn(e,n)}return l=r.interleaved,l===null?(t.next=t,yo(r)):(t.next=l.next,l.next=t),r.interleaved=t,Nn(e,n)}function yl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ro(e,n)}}function $c(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $l(e,t,n,r){var l=e.updateQueue;kn=!1;var i=l.firstBaseUpdate,a=l.lastBaseUpdate,o=l.shared.pending;if(o!==null){l.shared.pending=null;var c=o,p=c.next;c.next=null,a===null?i=p:a.next=p,a=c;var v=e.alternate;v!==null&&(v=v.updateQueue,o=v.lastBaseUpdate,o!==a&&(o===null?v.firstBaseUpdate=p:o.next=p,v.lastBaseUpdate=c))}if(i!==null){var g=l.baseState;a=0,v=p=c=null,o=i;do{var y=o.lane,T=o.eventTime;if((r&y)===y){v!==null&&(v=v.next={eventTime:T,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var R=e,j=o;switch(y=t,T=n,j.tag){case 1:if(R=j.payload,typeof R=="function"){g=R.call(T,g,y);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=j.payload,y=typeof R=="function"?R.call(T,g,y):R,y==null)break e;g=_e({},g,y);break e;case 2:kn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,y=l.effects,y===null?l.effects=[o]:y.push(o))}else T={eventTime:T,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(p=v=T,c=g):v=v.next=T,a|=y;if(o=o.next,o===null){if(o=l.shared.pending,o===null)break;y=o,o=y.next,y.next=null,l.lastBaseUpdate=y,l.shared.pending=null}}while(!0);if(v===null&&(c=g),l.baseState=c,l.firstBaseUpdate=p,l.lastBaseUpdate=v,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);lr|=a,e.lanes=a,e.memoizedState=g}}function zc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(M(191,l));l.call(r)}}}var zs={},an=Un(zs),Ts=Un(zs),Rs=Un(zs);function qn(e){if(e===zs)throw Error(M(174));return e}function No(e,t){switch(ke(Rs,t),ke(Ts,e),ke(an,zs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ra(t,e)}Te(an),ke(an,t)}function Br(){Te(an),Te(Ts),Te(Rs)}function Yd(e){qn(Rs.current);var t=qn(an.current),n=ra(t,e.type);t!==n&&(ke(Ts,e),ke(an,n))}function wo(e){Ts.current===e&&(Te(an),Te(Ts))}var Ie=Un(0);function zl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pi=[];function So(){for(var e=0;e<Pi.length;e++)Pi[e]._workInProgressVersionPrimary=null;Pi.length=0}var vl=Sn.ReactCurrentDispatcher,Li=Sn.ReactCurrentBatchConfig,sr=0,De=null,$e=null,Ue=null,Wl=!1,ms=!1,As=0,hh=0;function Ze(){throw Error(M(321))}function bo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function jo(e,t,n,r,l,i){if(sr=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?vh:Nh,e=n(r,l),ms){i=0;do{if(ms=!1,As=0,25<=i)throw Error(M(301));i+=1,Ue=$e=null,t.updateQueue=null,vl.current=wh,e=n(r,l)}while(ms)}if(vl.current=Hl,t=$e!==null&&$e.next!==null,sr=0,Ue=$e=De=null,Wl=!1,t)throw Error(M(300));return e}function Eo(){var e=As!==0;return As=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?De.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Mt(){if($e===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Ue===null?De.memoizedState:Ue.next;if(t!==null)Ue=t,$e=e;else{if(e===null)throw Error(M(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ue===null?De.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Is(e,t){return typeof t=="function"?t(e):t}function Oi(e){var t=Mt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=$e,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var a=l.next;l.next=i.next,i.next=a}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var o=a=null,c=null,p=i;do{var v=p.lane;if((sr&v)===v)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var g={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(o=c=g,a=r):c=c.next=g,De.lanes|=v,lr|=v}p=p.next}while(p!==null&&p!==i);c===null?a=r:c.next=o,Kt(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,De.lanes|=i,lr|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mi(e){var t=Mt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do i=e(i,a.action),a=a.next;while(a!==l);Kt(i,t.memoizedState)||(mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Qd(){}function Xd(e,t){var n=De,r=Mt(),l=t(),i=!Kt(r.memoizedState,l);if(i&&(r.memoizedState=l,mt=!0),r=r.queue,ko(Zd.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Ds(9,qd.bind(null,n,r,l,t),void 0,null),Ve===null)throw Error(M(349));sr&30||Jd(n,t,l)}return l}function Jd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qd(e,t,n,r){t.value=n,t.getSnapshot=r,ef(t)&&tf(e)}function Zd(e,t,n){return n(function(){ef(t)&&tf(e)})}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function tf(e){var t=Nn(e,1);t!==null&&Gt(t,e,1,-1)}function Wc(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=yh.bind(null,De,e),[t.memoizedState,e]}function Ds(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nf(){return Mt().memoizedState}function Nl(e,t,n,r){var l=en();De.flags|=e,l.memoizedState=Ds(1|t,n,void 0,r===void 0?null:r)}function ai(e,t,n,r){var l=Mt();r=r===void 0?null:r;var i=void 0;if($e!==null){var a=$e.memoizedState;if(i=a.destroy,r!==null&&bo(r,a.deps)){l.memoizedState=Ds(t,n,i,r);return}}De.flags|=e,l.memoizedState=Ds(1|t,n,i,r)}function Hc(e,t){return Nl(8390656,8,e,t)}function ko(e,t){return ai(2048,8,e,t)}function rf(e,t){return ai(4,2,e,t)}function sf(e,t){return ai(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function af(e,t,n){return n=n!=null?n.concat([e]):null,ai(4,4,lf.bind(null,t,e),n)}function Co(){}function of(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cf(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return sr&21?(Kt(n,t)||(n=pd(),De.lanes|=n,lr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function xh(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=Li.transition;Li.transition={};try{e(!1),t()}finally{Se=n,Li.transition=r}}function df(){return Mt().memoizedState}function gh(e,t,n){var r=Bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ff(e))mf(t,n);else if(n=Gd(e,t,n,r),n!==null){var l=it();Gt(n,e,r,l),pf(n,t,r)}}function yh(e,t,n){var r=Bn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ff(e))mf(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,n);if(l.hasEagerState=!0,l.eagerState=o,Kt(o,a)){var c=t.interleaved;c===null?(l.next=l,yo(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}n=Gd(e,t,l,r),n!==null&&(l=it(),Gt(n,e,r,l),pf(n,t,r))}}function ff(e){var t=e.alternate;return e===De||t!==null&&t===De}function mf(e,t){ms=Wl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ro(e,n)}}var Hl={readContext:Ot,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},vh={readContext:Ot,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Nl(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nl(4,2,e,t)},useMemo:function(e,t){var n=en();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=en();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gh.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:Wc,useDebugValue:Co,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=Wc(!1),t=e[0];return e=xh.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,l=en();if(Re){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),Ve===null)throw Error(M(349));sr&30||Jd(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,Hc(Zd.bind(null,r,i,e),[e]),r.flags|=2048,Ds(9,qd.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=en(),t=Ve.identifierPrefix;if(Re){var n=hn,r=pn;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=As++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nh={readContext:Ot,useCallback:of,useContext:Ot,useEffect:ko,useImperativeHandle:af,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:Oi,useRef:nf,useState:function(){return Oi(Is)},useDebugValue:Co,useDeferredValue:function(e){var t=Mt();return uf(t,$e.memoizedState,e)},useTransition:function(){var e=Oi(Is)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:Qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1},wh={readContext:Ot,useCallback:of,useContext:Ot,useEffect:ko,useImperativeHandle:af,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:cf,useReducer:Mi,useRef:nf,useState:function(){return Mi(Is)},useDebugValue:Co,useDeferredValue:function(e){var t=Mt();return $e===null?t.memoizedState=e:uf(t,$e.memoizedState,e)},useTransition:function(){var e=Mi(Is)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:Qd,useSyncExternalStore:Xd,useId:df,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ja(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oi={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),l=Bn(e),i=gn(r,l);i.payload=t,n!=null&&(i.callback=n),t=Mn(e,i,l),t!==null&&(Gt(t,e,l,r),yl(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),l=Bn(e),i=gn(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Mn(e,i,l),t!==null&&(Gt(t,e,l,r),yl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=Bn(e),l=gn(n,r);l.tag=2,t!=null&&(l.callback=t),t=Mn(e,l,r),t!==null&&(Gt(t,e,r,n),yl(t,e,r))}};function Uc(e,t,n,r,l,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!js(n,r)||!js(l,i):!0}function hf(e,t,n){var r=!1,l=Wn,i=t.contextType;return typeof i=="object"&&i!==null?i=Ot(i):(l=ht(t)?nr:nt.current,r=t.contextTypes,i=(r=r!=null)?Or(e,l):Wn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function Vc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},vo(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=Ot(i):(i=ht(t)?nr:nt.current,l.context=Or(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ja(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&oi.enqueueReplaceState(l,l.state,null),$l(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function $r(e,t){try{var n="",r=t;do n+=Qm(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function Fi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ka(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Sh=typeof WeakMap=="function"?WeakMap:Map;function xf(e,t,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Oa=r),ka(e,t)},n}function gf(e,t,n){n=gn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){ka(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ka(e,t),typeof r!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Gc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Sh;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Oh.bind(null,e,t,n),t.then(e,e))}function Kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gn(-1,1),t.tag=2,Mn(n,t,1))),n.lanes|=1),e)}var bh=Sn.ReactCurrentOwner,mt=!1;function lt(e,t,n,r){t.child=e===null?Vd(t,null,n,r):Fr(t,e.child,n,r)}function Qc(e,t,n,r,l){n=n.render;var i=t.ref;return _r(t,l),r=jo(e,t,n,r,i,l),n=Eo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,wn(e,t,l)):(Re&&n&&fo(t),t.flags|=1,lt(e,t,r,l),t.child)}function Xc(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!Lo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,yf(e,t,i,r,l)):(e=jl(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:js,n(a,r)&&e.ref===t.ref)return wn(e,t,l)}return t.flags|=1,e=$n(i,r),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(js(i,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,wn(e,t,l)}return Ca(e,t,n,r,l)}function vf(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Tr,St),St|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(Tr,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(Tr,St),St|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ke(Tr,St),St|=r;return lt(e,t,l,n),t.child}function Nf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,l){var i=ht(n)?nr:nt.current;return i=Or(t,i),_r(t,l),n=jo(e,t,n,r,i,l),r=Eo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,wn(e,t,l)):(Re&&r&&fo(t),t.flags|=1,lt(e,t,n,l),t.child)}function Jc(e,t,n,r,l){if(ht(n)){var i=!0;Ll(t)}else i=!1;if(_r(t,l),t.stateNode===null)wl(e,t),hf(t,n,r),Ea(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Ot(p):(p=ht(n)?nr:nt.current,p=Or(t,p));var v=n.getDerivedStateFromProps,g=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==p)&&Vc(t,a,r,p),kn=!1;var y=t.memoizedState;a.state=y,$l(t,r,a,l),c=t.memoizedState,o!==r||y!==c||pt.current||kn?(typeof v=="function"&&(ja(t,n,v,r),c=t.memoizedState),(o=kn||Uc(t,n,o,r,y,c,p))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=p,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Kd(e,t),o=t.memoizedProps,p=t.type===t.elementType?o:zt(t.type,o),a.props=p,g=t.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=ht(n)?nr:nt.current,c=Or(t,c));var T=n.getDerivedStateFromProps;(v=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==g||y!==c)&&Vc(t,a,r,c),kn=!1,y=t.memoizedState,a.state=y,$l(t,r,a,l);var R=t.memoizedState;o!==g||y!==R||pt.current||kn?(typeof T=="function"&&(ja(t,n,T,r),R=t.memoizedState),(p=kn||Uc(t,n,p,r,y,R,c)||!1)?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=R),a.props=r,a.state=R,a.context=c,r=p):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Ta(e,t,n,r,i,l)}function Ta(e,t,n,r,l,i){Nf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&Oc(t,n,!1),wn(e,t,i);r=t.stateNode,bh.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Fr(t,e.child,null,i),t.child=Fr(t,null,o,i)):lt(e,t,o,i),t.memoizedState=r.state,l&&Oc(t,n,!0),t.child}function wf(e){var t=e.stateNode;t.pendingContext?Lc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lc(e,t.context,!1),No(e,t.containerInfo)}function qc(e,t,n,r,l){return Mr(),po(l),t.flags|=256,lt(e,t,n,r),t.child}var Ra={dehydrated:null,treeContext:null,retryLane:0};function Aa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sf(e,t,n){var r=t.pendingProps,l=Ie.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(l&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ke(Ie,l&1),e===null)return Sa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=di(a,r,0,null),e=er(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Aa(n),t.memoizedState=Ra,e):To(t,a));if(l=e.memoizedState,l!==null&&(o=l.dehydrated,o!==null))return jh(e,t,a,r,o,l,n);if(i){i=r.fallback,a=t.mode,l=e.child,o=l.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=$n(l,c),r.subtreeFlags=l.subtreeFlags&14680064),o!==null?i=$n(o,i):(i=er(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Aa(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ra,r}return i=e.child,e=i.sibling,r=$n(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function To(e,t){return t=di({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sl(e,t,n,r){return r!==null&&po(r),Fr(t,e.child,null,n),e=To(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jh(e,t,n,r,l,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Fi(Error(M(422))),sl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=di({mode:"visible",children:r.children},l,0,null),i=er(i,l,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Fr(t,e.child,null,a),t.child.memoizedState=Aa(a),t.memoizedState=Ra,i);if(!(t.mode&1))return sl(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(M(419)),r=Fi(i,r,void 0),sl(e,t,a,r)}if(o=(a&e.childLanes)!==0,mt||o){if(r=Ve,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,Nn(e,l),Gt(r,e,l,-1))}return Po(),r=Fi(Error(M(421))),sl(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Mh.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,bt=On(l.nextSibling),jt=t,Re=!0,Ht=null,e!==null&&(Dt[_t++]=pn,Dt[_t++]=hn,Dt[_t++]=rr,pn=e.id,hn=e.overflow,rr=t),t=To(t,r.children),t.flags|=4096,t)}function Zc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ba(e.return,t,n)}function Bi(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function bf(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(lt(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,n,t);else if(e.tag===19)Zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ke(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&zl(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Bi(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&zl(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Bi(t,!0,n,null,i);break;case"together":Bi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=$n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Eh(e,t,n){switch(t.tag){case 3:wf(t),Mr();break;case 5:Yd(t);break;case 1:ht(t.type)&&Ll(t);break;case 4:No(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;ke(Fl,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Sf(e,t,n):(ke(Ie,Ie.current&1),e=wn(e,t,n),e!==null?e.sibling:null);ke(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bf(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ke(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,vf(e,t,n)}return wn(e,t,n)}var jf,Ia,Ef,kf;jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};Ef=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,qn(an.current);var i=null;switch(n){case"input":l=Zi(e,l),r=Zi(e,r),i=[];break;case"select":l=_e({},l,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":l=na(e,l),r=na(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_l)}sa(n,r);var a;n=null;for(p in l)if(!r.hasOwnProperty(p)&&l.hasOwnProperty(p)&&l[p]!=null)if(p==="style"){var o=l[p];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(gs.hasOwnProperty(p)?i||(i=[]):(i=i||[]).push(p,null));for(p in r){var c=r[p];if(o=l!=null?l[p]:void 0,r.hasOwnProperty(p)&&c!==o&&(c!=null||o!=null))if(p==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(p,n)),n=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(gs.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&Ce("scroll",e),i||o===c||(i=[])):(i=i||[]).push(p,c))}n&&(i=i||[]).push("style",n);var p=i;(t.updateQueue=p)&&(t.flags|=4)}};kf=function(e,t,n,r){n!==r&&(t.flags|=4)};function es(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function kh(e,t,n){var r=t.pendingProps;switch(mo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return ht(t.type)&&Pl(),et(t),null;case 3:return r=t.stateNode,Br(),Te(pt),Te(nt),So(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(nl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(Ba(Ht),Ht=null))),Ia(e,t),et(t),null;case 5:wo(t);var l=qn(Rs.current);if(n=t.type,e!==null&&t.stateNode!=null)Ef(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return et(t),null}if(e=qn(an.current),nl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[tn]=t,r[Cs]=i,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(l=0;l<as.length;l++)Ce(as[l],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":oc(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":uc(r,i),Ce("invalid",r)}sa(n,i),l=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&tl(r.textContent,o,e),l=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&tl(r.textContent,o,e),l=["children",""+o]):gs.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Ks(r),cc(r,i,!0);break;case"textarea":Ks(r),dc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_l)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[tn]=t,e[Cs]=r,jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=la(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),l=r;break;case"iframe":case"object":case"embed":Ce("load",e),l=r;break;case"video":case"audio":for(l=0;l<as.length;l++)Ce(as[l],e);l=r;break;case"source":Ce("error",e),l=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),l=r;break;case"details":Ce("toggle",e),l=r;break;case"input":oc(e,r),l=Zi(e,r),Ce("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=_e({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":uc(e,r),l=na(e,r),Ce("invalid",e);break;default:l=r}sa(n,l),o=l;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?nd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ed(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ys(e,c):typeof c=="number"&&ys(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",e):c!=null&&Ja(e,i,c,a))}switch(n){case"input":Ks(e),cc(e,r,!1);break;case"textarea":Ks(e),dc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Rr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Rr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=_l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)kf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=qn(Rs.current),qn(an.current),nl(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(i=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return et(t),null;case 13:if(Te(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&bt!==null&&t.mode&1&&!(t.flags&128))Hd(),Mr(),t.flags|=98560,i=!1;else if(i=nl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(M(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[tn]=t}else Mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),i=!1}else Ht!==null&&(Ba(Ht),Ht=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?ze===0&&(ze=3):Po())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Br(),Ia(e,t),e===null&&Es(t.stateNode.containerInfo),et(t),null;case 10:return go(t.type._context),et(t),null;case 17:return ht(t.type)&&Pl(),et(t),null;case 19:if(Te(Ie),i=t.memoizedState,i===null)return et(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)es(i,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zl(e),a!==null){for(t.flags|=128,es(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ke(Ie,Ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>zr&&(t.flags|=128,r=!0,es(i,!1),t.lanes=4194304)}else{if(!r)if(e=zl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),es(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Re)return et(t),null}else 2*Oe()-i.renderingStartTime>zr&&n!==1073741824&&(t.flags|=128,r=!0,es(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,n=Ie.current,ke(Ie,r?n&1|2:n&1),t):(et(t),null);case 22:case 23:return _o(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?St&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Ch(e,t){switch(mo(t),t.tag){case 1:return ht(t.type)&&Pl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Br(),Te(pt),Te(nt),So(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wo(t),null;case 13:if(Te(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Ie),null;case 4:return Br(),null;case 10:return go(t.type._context),null;case 22:case 23:return _o(),null;case 24:return null;default:return null}}var ll=!1,tt=!1,Th=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function Da(e,t,n){try{n()}catch(r){Le(e,t,r)}}var eu=!1;function Rh(e,t){if(ha=Al,e=Ad(),uo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,p=0,v=0,g=e,y=null;t:for(;;){for(var T;g!==n||l!==0&&g.nodeType!==3||(o=a+l),g!==i||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)y=g,g=T;for(;;){if(g===e)break t;if(y===n&&++p===l&&(o=a),y===i&&++v===r&&(c=a),(T=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=T}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xa={focusedElem:e,selectionRange:n},Al=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var j=R.memoizedProps,z=R.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?j:zt(t.type,j),z);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){Le(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return R=eu,eu=!1,R}function ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&Da(t,n,i)}l=l.next}while(l!==r)}}function ci(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _a(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cf(e){var t=e.alternate;t!==null&&(e.alternate=null,Cf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Cs],delete t[va],delete t[dh],delete t[fh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tf(e){return e.tag===5||e.tag===3||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_l));else if(r!==4&&(e=e.child,e!==null))for(Pa(e,t,n),e=e.sibling;e!==null;)Pa(e,t,n),e=e.sibling}function La(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(La(e,t,n),e=e.sibling;e!==null;)La(e,t,n),e=e.sibling}var Ye=null,Wt=!1;function jn(e,t,n){for(n=n.child;n!==null;)Rf(e,t,n),n=n.sibling}function Rf(e,t,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(ti,n)}catch{}switch(n.tag){case 5:tt||Cr(n,t);case 6:var r=Ye,l=Wt;Ye=null,jn(e,t,n),Ye=r,Wt=l,Ye!==null&&(Wt?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Wt?(e=Ye,n=n.stateNode,e.nodeType===8?Di(e.parentNode,n):e.nodeType===1&&Di(e,n),Ss(e)):Di(Ye,n.stateNode));break;case 4:r=Ye,l=Wt,Ye=n.stateNode.containerInfo,Wt=!0,jn(e,t,n),Ye=r,Wt=l;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Da(n,t,a),l=l.next}while(l!==r)}jn(e,t,n);break;case 1:if(!tt&&(Cr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Le(n,t,o)}jn(e,t,n);break;case 21:jn(e,t,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,jn(e,t,n),tt=r):jn(e,t,n);break;default:jn(e,t,n)}}function nu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Th),t.forEach(function(r){var l=Fh.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function $t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Wt=!1;break e;case 3:Ye=o.stateNode.containerInfo,Wt=!0;break e;case 4:Ye=o.stateNode.containerInfo,Wt=!0;break e}o=o.return}if(Ye===null)throw Error(M(160));Rf(i,a,l),Ye=null,Wt=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(p){Le(l,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Af(t,e),t=t.sibling}function Af(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),Zt(e),r&4){try{ps(3,e,e.return),ci(3,e)}catch(j){Le(e,e.return,j)}try{ps(5,e,e.return)}catch(j){Le(e,e.return,j)}}break;case 1:$t(t,e),Zt(e),r&512&&n!==null&&Cr(n,n.return);break;case 5:if($t(t,e),Zt(e),r&512&&n!==null&&Cr(n,n.return),e.flags&32){var l=e.stateNode;try{ys(l,"")}catch(j){Le(e,e.return,j)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Ju(l,i),la(o,a);var p=la(o,i);for(a=0;a<c.length;a+=2){var v=c[a],g=c[a+1];v==="style"?nd(l,g):v==="dangerouslySetInnerHTML"?ed(l,g):v==="children"?ys(l,g):Ja(l,v,g,p)}switch(o){case"input":ea(l,i);break;case"textarea":qu(l,i);break;case"select":var y=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Rr(l,!!i.multiple,T,!1):y!==!!i.multiple&&(i.defaultValue!=null?Rr(l,!!i.multiple,i.defaultValue,!0):Rr(l,!!i.multiple,i.multiple?[]:"",!1))}l[Cs]=i}catch(j){Le(e,e.return,j)}}break;case 6:if($t(t,e),Zt(e),r&4){if(e.stateNode===null)throw Error(M(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(j){Le(e,e.return,j)}}break;case 3:if($t(t,e),Zt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ss(t.containerInfo)}catch(j){Le(e,e.return,j)}break;case 4:$t(t,e),Zt(e);break;case 13:$t(t,e),Zt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(Io=Oe())),r&4&&nu(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(p=tt)||v,$t(t,e),tt=p):$t(t,e),Zt(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for(Q=e,v=e.child;v!==null;){for(g=Q=v;Q!==null;){switch(y=Q,T=y.child,y.tag){case 0:case 11:case 14:case 15:ps(4,y,y.return);break;case 1:Cr(y,y.return);var R=y.stateNode;if(typeof R.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(j){Le(r,n,j)}}break;case 5:Cr(y,y.return);break;case 22:if(y.memoizedState!==null){su(g);continue}}T!==null?(T.return=y,Q=T):su(g)}v=v.sibling}e:for(v=null,g=e;;){if(g.tag===5){if(v===null){v=g;try{l=g.stateNode,p?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=td("display",a))}catch(j){Le(e,e.return,j)}}}else if(g.tag===6){if(v===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(j){Le(e,e.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;v===g&&(v=null),g=g.return}v===g&&(v=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:$t(t,e),Zt(e),r&4&&nu(e);break;case 21:break;default:$t(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tf(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ys(l,""),r.flags&=-33);var i=tu(e);La(e,i,l);break;case 3:case 4:var a=r.stateNode.containerInfo,o=tu(e);Pa(e,o,a);break;default:throw Error(M(161))}}catch(c){Le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ah(e,t,n){Q=e,If(e)}function If(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var l=Q,i=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||ll;if(!a){var o=l.alternate,c=o!==null&&o.memoizedState!==null||tt;o=ll;var p=tt;if(ll=a,(tt=c)&&!p)for(Q=l;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?lu(l):c!==null?(c.return=a,Q=c):lu(l);for(;i!==null;)Q=i,If(i),i=i.sibling;Q=l,ll=o,tt=p}ru(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,Q=i):ru(e)}}function ru(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||ci(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tt)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:zt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zc(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zc(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var g=v.dehydrated;g!==null&&Ss(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}tt||t.flags&512&&_a(t)}catch(y){Le(t,t.return,y)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function su(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function lu(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ci(4,t)}catch(c){Le(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){Le(t,l,c)}}var i=t.return;try{_a(t)}catch(c){Le(t,i,c)}break;case 5:var a=t.return;try{_a(t)}catch(c){Le(t,a,c)}}}catch(c){Le(t,t.return,c)}if(t===e){Q=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Q=o;break}Q=t.return}}var Ih=Math.ceil,Ul=Sn.ReactCurrentDispatcher,Ro=Sn.ReactCurrentOwner,Lt=Sn.ReactCurrentBatchConfig,xe=0,Ve=null,Fe=null,Qe=0,St=0,Tr=Un(0),ze=0,_s=null,lr=0,ui=0,Ao=0,hs=null,ft=null,Io=0,zr=1/0,fn=null,Vl=!1,Oa=null,Fn=null,il=!1,Dn=null,Gl=0,xs=0,Ma=null,Sl=-1,bl=0;function it(){return xe&6?Oe():Sl!==-1?Sl:Sl=Oe()}function Bn(e){return e.mode&1?xe&2&&Qe!==0?Qe&-Qe:ph.transition!==null?(bl===0&&(bl=pd()),bl):(e=Se,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function Gt(e,t,n,r){if(50<xs)throw xs=0,Ma=null,Error(M(185));Fs(e,n,r),(!(xe&2)||e!==Ve)&&(e===Ve&&(!(xe&2)&&(ui|=n),ze===4&&Rn(e,Qe)),xt(e,r),n===1&&xe===0&&!(t.mode&1)&&(zr=Oe()+500,ii&&Vn()))}function xt(e,t){var n=e.callbackNode;pp(e,t);var r=Rl(e,e===Ve?Qe:0);if(r===0)n!==null&&pc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pc(n),t===1)e.tag===0?mh(iu.bind(null,e)):$d(iu.bind(null,e)),ch(function(){!(xe&6)&&Vn()}),n=null;else{switch(hd(r)){case 1:n=no;break;case 4:n=fd;break;case 16:n=Tl;break;case 536870912:n=md;break;default:n=Tl}n=Bf(n,Df.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Df(e,t){if(Sl=-1,bl=0,xe&6)throw Error(M(327));var n=e.callbackNode;if(Pr()&&e.callbackNode!==n)return null;var r=Rl(e,e===Ve?Qe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Kl(e,r);else{t=r;var l=xe;xe|=2;var i=Pf();(Ve!==e||Qe!==t)&&(fn=null,zr=Oe()+500,Zn(e,t));do try{Ph();break}catch(o){_f(e,o)}while(!0);xo(),Ul.current=i,xe=l,Fe!==null?t=0:(Ve=null,Qe=0,t=ze)}if(t!==0){if(t===2&&(l=ua(e),l!==0&&(r=l,t=Fa(e,l))),t===1)throw n=_s,Zn(e,0),Rn(e,r),xt(e,Oe()),n;if(t===6)Rn(e,r);else{if(l=e.current.alternate,!(r&30)&&!Dh(l)&&(t=Kl(e,r),t===2&&(i=ua(e),i!==0&&(r=i,t=Fa(e,i))),t===1))throw n=_s,Zn(e,0),Rn(e,r),xt(e,Oe()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Qn(e,ft,fn);break;case 3:if(Rn(e,r),(r&130023424)===r&&(t=Io+500-Oe(),10<t)){if(Rl(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=ya(Qn.bind(null,e,ft,fn),t);break}Qn(e,ft,fn);break;case 4:if(Rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-Vt(r);i=1<<a,a=t[a],a>l&&(l=a),r&=~i}if(r=l,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ih(r/1960))-r,10<r){e.timeoutHandle=ya(Qn.bind(null,e,ft,fn),r);break}Qn(e,ft,fn);break;case 5:Qn(e,ft,fn);break;default:throw Error(M(329))}}}return xt(e,Oe()),e.callbackNode===n?Df.bind(null,e):null}function Fa(e,t){var n=hs;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=Kl(e,t),e!==2&&(t=ft,ft=n,t!==null&&Ba(t)),e}function Ba(e){ft===null?ft=e:ft.push.apply(ft,e)}function Dh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!Kt(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rn(e,t){for(t&=~Ao,t&=~ui,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function iu(e){if(xe&6)throw Error(M(327));Pr();var t=Rl(e,0);if(!(t&1))return xt(e,Oe()),null;var n=Kl(e,t);if(e.tag!==0&&n===2){var r=ua(e);r!==0&&(t=r,n=Fa(e,r))}if(n===1)throw n=_s,Zn(e,0),Rn(e,t),xt(e,Oe()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qn(e,ft,fn),xt(e,Oe()),null}function Do(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(zr=Oe()+500,ii&&Vn())}}function ir(e){Dn!==null&&Dn.tag===0&&!(xe&6)&&Pr();var t=xe;xe|=1;var n=Lt.transition,r=Se;try{if(Lt.transition=null,Se=1,e)return e()}finally{Se=r,Lt.transition=n,xe=t,!(xe&6)&&Vn()}}function _o(){St=Tr.current,Te(Tr)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oh(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(mo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pl();break;case 3:Br(),Te(pt),Te(nt),So();break;case 5:wo(r);break;case 4:Br();break;case 13:Te(Ie);break;case 19:Te(Ie);break;case 10:go(r.type._context);break;case 22:case 23:_o()}n=n.return}if(Ve=e,Fe=e=$n(e.current,null),Qe=St=t,ze=0,_s=null,Ao=ui=lr=0,ft=hs=null,Jn!==null){for(t=0;t<Jn.length;t++)if(n=Jn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=l,r.next=a}n.pending=r}Jn=null}return e}function _f(e,t){do{var n=Fe;try{if(xo(),vl.current=Hl,Wl){for(var r=De.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Wl=!1}if(sr=0,Ue=$e=De=null,ms=!1,As=0,Ro.current=null,n===null||n.return===null){ze=1,_s=t,Fe=null;break}e:{var i=e,a=n.return,o=n,c=t;if(t=Qe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,v=o,g=v.tag;if(!(v.mode&1)&&(g===0||g===11||g===15)){var y=v.alternate;y?(v.updateQueue=y.updateQueue,v.memoizedState=y.memoizedState,v.lanes=y.lanes):(v.updateQueue=null,v.memoizedState=null)}var T=Kc(a);if(T!==null){T.flags&=-257,Yc(T,a,o,i,t),T.mode&1&&Gc(i,p,t),t=T,c=p;var R=t.updateQueue;if(R===null){var j=new Set;j.add(c),t.updateQueue=j}else R.add(c);break e}else{if(!(t&1)){Gc(i,p,t),Po();break e}c=Error(M(426))}}else if(Re&&o.mode&1){var z=Kc(a);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Yc(z,a,o,i,t),po($r(c,o));break e}}i=c=$r(c,o),ze!==4&&(ze=2),hs===null?hs=[i]:hs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=xf(i,c,t);$c(i,f);break e;case 1:o=c;var m=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Fn===null||!Fn.has(h)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=gf(i,o,t);$c(i,E);break e}}i=i.return}while(i!==null)}Of(n)}catch(A){t=A,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Pf(){var e=Ul.current;return Ul.current=Hl,e===null?Hl:e}function Po(){(ze===0||ze===3||ze===2)&&(ze=4),Ve===null||!(lr&268435455)&&!(ui&268435455)||Rn(Ve,Qe)}function Kl(e,t){var n=xe;xe|=2;var r=Pf();(Ve!==e||Qe!==t)&&(fn=null,Zn(e,t));do try{_h();break}catch(l){_f(e,l)}while(!0);if(xo(),xe=n,Ul.current=r,Fe!==null)throw Error(M(261));return Ve=null,Qe=0,ze}function _h(){for(;Fe!==null;)Lf(Fe)}function Ph(){for(;Fe!==null&&!lp();)Lf(Fe)}function Lf(e){var t=Ff(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?Of(e):Fe=t,Ro.current=null}function Of(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ch(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Fe=null;return}}else if(n=kh(n,t,St),n!==null){Fe=n;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);ze===0&&(ze=5)}function Qn(e,t,n){var r=Se,l=Lt.transition;try{Lt.transition=null,Se=1,Lh(e,t,n,r)}finally{Lt.transition=l,Se=r}return null}function Lh(e,t,n,r){do Pr();while(Dn!==null);if(xe&6)throw Error(M(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(hp(e,i),e===Ve&&(Fe=Ve=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,Bf(Tl,function(){return Pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Lt.transition,Lt.transition=null;var a=Se;Se=1;var o=xe;xe|=4,Ro.current=null,Rh(e,n),Af(n,e),th(xa),Al=!!ha,xa=ha=null,e.current=n,Ah(n),ip(),xe=o,Se=a,Lt.transition=i}else e.current=n;if(il&&(il=!1,Dn=e,Gl=l),i=e.pendingLanes,i===0&&(Fn=null),cp(n.stateNode),xt(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Vl)throw Vl=!1,e=Oa,Oa=null,e;return Gl&1&&e.tag!==0&&Pr(),i=e.pendingLanes,i&1?e===Ma?xs++:(xs=0,Ma=e):xs=0,Vn(),null}function Pr(){if(Dn!==null){var e=hd(Gl),t=Lt.transition,n=Se;try{if(Lt.transition=null,Se=16>e?16:e,Dn===null)var r=!1;else{if(e=Dn,Dn=null,Gl=0,xe&6)throw Error(M(331));var l=xe;for(xe|=4,Q=e.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var p=o[c];for(Q=p;Q!==null;){var v=Q;switch(v.tag){case 0:case 11:case 15:ps(8,v,i)}var g=v.child;if(g!==null)g.return=v,Q=g;else for(;Q!==null;){v=Q;var y=v.sibling,T=v.return;if(Cf(v),v===p){Q=null;break}if(y!==null){y.return=T,Q=y;break}Q=T}}}var R=i.alternate;if(R!==null){var j=R.child;if(j!==null){R.child=null;do{var z=j.sibling;j.sibling=null,j=z}while(j!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ps(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,Q=f;break e}Q=i.return}}var m=e.current;for(Q=m;Q!==null;){a=Q;var h=a.child;if(a.subtreeFlags&2064&&h!==null)h.return=a,Q=h;else e:for(a=m;Q!==null;){if(o=Q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ci(9,o)}}catch(A){Le(o,o.return,A)}if(o===a){Q=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,Q=E;break e}Q=o.return}}if(xe=l,Vn(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(ti,e)}catch{}r=!0}return r}finally{Se=n,Lt.transition=t}}return!1}function au(e,t,n){t=$r(n,t),t=xf(e,t,1),e=Mn(e,t,1),t=it(),e!==null&&(Fs(e,1,t),xt(e,t))}function Le(e,t,n){if(e.tag===3)au(e,e,n);else for(;t!==null;){if(t.tag===3){au(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fn===null||!Fn.has(r))){e=$r(n,e),e=gf(t,e,1),t=Mn(t,e,1),e=it(),t!==null&&(Fs(t,1,e),xt(t,e));break}}t=t.return}}function Oh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(Qe&n)===n&&(ze===4||ze===3&&(Qe&130023424)===Qe&&500>Oe()-Io?Zn(e,0):Ao|=n),xt(e,t)}function Mf(e,t){t===0&&(e.mode&1?(t=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):t=1);var n=it();e=Nn(e,t),e!==null&&(Fs(e,t,n),xt(e,n))}function Mh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Mf(e,n)}function Fh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Mf(e,n)}var Ff;Ff=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,Eh(e,t,n);mt=!!(e.flags&131072)}else mt=!1,Re&&t.flags&1048576&&zd(t,Ml,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wl(e,t),e=t.pendingProps;var l=Or(t,nt.current);_r(t,n),l=jo(null,t,r,e,l,n);var i=Eo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(i=!0,Ll(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,vo(t),l.updater=oi,t.stateNode=l,l._reactInternals=t,Ea(t,r,e,n),t=Ta(null,t,r,!0,i,n)):(t.tag=0,Re&&i&&fo(t),lt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wl(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=$h(r),e=zt(r,e),l){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Jc(null,t,r,e,n);break e;case 11:t=Qc(null,t,r,e,n);break e;case 14:t=Xc(null,t,r,zt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:zt(r,l),Ca(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:zt(r,l),Jc(e,t,r,l,n);case 3:e:{if(wf(t),e===null)throw Error(M(387));r=t.pendingProps,i=t.memoizedState,l=i.element,Kd(e,t),$l(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=$r(Error(M(423)),t),t=qc(e,t,r,n,l);break e}else if(r!==l){l=$r(Error(M(424)),t),t=qc(e,t,r,n,l);break e}else for(bt=On(t.stateNode.containerInfo.firstChild),jt=t,Re=!0,Ht=null,n=Vd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===l){t=wn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return Yd(t),e===null&&Sa(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,a=l.children,ga(r,l)?a=null:i!==null&&ga(r,i)&&(t.flags|=32),Nf(e,t),lt(e,t,a,n),t.child;case 6:return e===null&&Sa(t),null;case 13:return Sf(e,t,n);case 4:return No(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fr(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:zt(r,l),Qc(e,t,r,l,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,a=l.value,ke(Fl,r._currentValue),r._currentValue=a,i!==null)if(Kt(i.value,a)){if(i.children===l.children&&!pt.current){t=wn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=gn(-1,n&-n),c.tag=2;var p=i.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?c.next=c:(c.next=v.next,v.next=c),p.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ba(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(M(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),ba(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}lt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,_r(t,n),l=Ot(l),r=r(l),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,l=zt(r,t.pendingProps),l=zt(r.type,l),Xc(e,t,r,l,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:zt(r,l),wl(e,t),t.tag=1,ht(r)?(e=!0,Ll(t)):e=!1,_r(t,n),hf(t,r,l),Ea(t,r,l,n),Ta(null,t,r,!0,e,n);case 19:return bf(e,t,n);case 22:return vf(e,t,n)}throw Error(M(156,t.tag))};function Bf(e,t){return dd(e,t)}function Bh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,r){return new Bh(e,t,n,r)}function Lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $h(e){if(typeof e=="function")return Lo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Za)return 11;if(e===eo)return 14}return 2}function $n(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jl(e,t,n,r,l,i){var a=2;if(r=e,typeof e=="function")Lo(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yr:return er(n.children,l,i,t);case qa:a=8,l|=8;break;case Qi:return e=Pt(12,n,t,l|2),e.elementType=Qi,e.lanes=i,e;case Xi:return e=Pt(13,n,t,l),e.elementType=Xi,e.lanes=i,e;case Ji:return e=Pt(19,n,t,l),e.elementType=Ji,e.lanes=i,e;case Yu:return di(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gu:a=10;break e;case Ku:a=9;break e;case Za:a=11;break e;case eo:a=14;break e;case En:a=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Pt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function er(e,t,n,r){return e=Pt(7,e,r,t),e.lanes=n,e}function di(e,t,n,r){return e=Pt(22,e,r,t),e.elementType=Yu,e.lanes=n,e.stateNode={isHidden:!1},e}function $i(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function zi(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wi(0),this.expirationTimes=wi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Oo(e,t,n,r,l,i,a,o,c){return e=new zh(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Pt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vo(i),e}function Wh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $f(e){if(!e)return Wn;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(ht(n))return Bd(e,n,t)}return t}function zf(e,t,n,r,l,i,a,o,c){return e=Oo(n,r,!0,e,l,i,a,o,c),e.context=$f(null),n=e.current,r=it(),l=Bn(n),i=gn(r,l),i.callback=t??null,Mn(n,i,l),e.current.lanes=l,Fs(e,l,r),xt(e,r),e}function fi(e,t,n,r){var l=t.current,i=it(),a=Bn(l);return n=$f(n),t.context===null?t.context=n:t.pendingContext=n,t=gn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mn(l,t,a),e!==null&&(Gt(e,l,a,i),yl(e,l,a)),a}function Yl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mo(e,t){ou(e,t),(e=e.alternate)&&ou(e,t)}function Hh(){return null}var Wf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fo(e){this._internalRoot=e}mi.prototype.render=Fo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));fi(e,t,null,null)};mi.prototype.unmount=Fo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ir(function(){fi(null,e,null,null)}),t[vn]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tn.length&&t!==0&&t<Tn[n].priority;n++);Tn.splice(n,0,e),n===0&&Nd(e)}};function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cu(){}function Uh(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var p=Yl(a);i.call(p)}}var a=zf(t,r,e,0,null,!1,!1,"",cu);return e._reactRootContainer=a,e[vn]=a.current,Es(e.nodeType===8?e.parentNode:e),ir(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var o=r;r=function(){var p=Yl(c);o.call(p)}}var c=Oo(e,0,!1,null,null,!1,!1,"",cu);return e._reactRootContainer=c,e[vn]=c.current,Es(e.nodeType===8?e.parentNode:e),ir(function(){fi(t,c,n,r)}),c}function hi(e,t,n,r,l){var i=n._reactRootContainer;if(i){var a=i;if(typeof l=="function"){var o=l;l=function(){var c=Yl(a);o.call(c)}}fi(t,a,e,l)}else a=Uh(n,t,e,l,r);return Yl(a)}xd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=is(t.pendingLanes);n!==0&&(ro(t,n|1),xt(t,Oe()),!(xe&6)&&(zr=Oe()+500,Vn()))}break;case 13:ir(function(){var r=Nn(e,1);if(r!==null){var l=it();Gt(r,e,1,l)}}),Mo(e,1)}};so=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var n=it();Gt(t,e,134217728,n)}Mo(e,134217728)}};gd=function(e){if(e.tag===13){var t=Bn(e),n=Nn(e,t);if(n!==null){var r=it();Gt(n,e,t,r)}Mo(e,t)}};yd=function(){return Se};vd=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};aa=function(e,t,n){switch(t){case"input":if(ea(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=li(r);if(!l)throw Error(M(90));Xu(r),ea(r,l)}}}break;case"textarea":qu(e,n);break;case"select":t=n.value,t!=null&&Rr(e,!!n.multiple,t,!1)}};ld=Do;id=ir;var Vh={usingClientEntryPoint:!1,Events:[$s,Sr,li,rd,sd,Do]},ts={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gh={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cd(e),e===null?null:e.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||Hh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{ti=al.inject(Gh),ln=al}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vh;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bo(t))throw Error(M(200));return Wh(e,t,null,n)};Ct.createRoot=function(e,t){if(!Bo(e))throw Error(M(299));var n=!1,r="",l=Wf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Oo(e,1,!1,null,null,n,!1,r,l),e[vn]=t.current,Es(e.nodeType===8?e.parentNode:e),new Fo(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=cd(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return ir(e)};Ct.hydrate=function(e,t,n){if(!pi(t))throw Error(M(200));return hi(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!Bo(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",a=Wf;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=zf(t,null,e,1,n??null,l,!1,i,a),e[vn]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new mi(t)};Ct.render=function(e,t,n){if(!pi(t))throw Error(M(200));return hi(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!pi(e))throw Error(M(40));return e._reactRootContainer?(ir(function(){hi(null,null,e,!1,function(){e._reactRootContainer=null,e[vn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Do;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!pi(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return hi(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function Hf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hf)}catch(e){console.error(e)}}Hf(),Wu.exports=Ct;var Kh=Wu.exports,uu=Kh;Ki.createRoot=uu.createRoot,Ki.hydrateRoot=uu.hydrateRoot;/**
 * @license
 * (c) Copyright 2023 Grammarly, Inc.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var du=new Map;class Ps extends Error{constructor(t,n){super(),ol(this,"args",void 0),ol(this,"code",void 0),ol(this,"url",void 0),ol(this,"_c",void 0);var r=new URL("https://developer.grammarly.com/docs/error-explainer");r.searchParams.set("code",t.toString()),n.forEach(l=>r.searchParams.append("args",function(i){if(i instanceof Error)return i.message+`
`+String(i.stack);if(i==null)return"null";if(typeof i=="object")try{return Object.prototype.toString.call(i)}catch{}return String(i)}(l))),this.stack!=null&&r.searchParams.set("trace",this.stack),this.message="Minified error #".concat(t,": See ").concat(r.toString()," for details."),this.args=n,this.code=t,this.url=r.toString()}toUserMessage(){var t=du.get("".concat(this.code));if(t==null)return[this];var n=new Map(this.args.map((l,i)=>["${".concat(i,"}"),l])),r=t.split(/(\${\d+})/).filter(l=>l!=="");return r.map(l=>{var i;return(i=n.get(l))!==null&&i!==void 0?i:l})}toJSON(){return{name:"InvariantError",message:this.message,description:this._m,code:this.code,args:this.args,stack:this.stack}}static setMessages(t){du=t}static create(t,n,r,l){l!=null&&n.push(l);var i=new Ps(t,n,r);return i.stack=l==null?void 0:l.stack,i._m=r,i}}const fu=new WeakMap;async function Yh(e,t){const n=fu.get(e);if(n!=null)return await n;(function(l){l.Grammarly==null&&(l.Grammarly={})})(e);const r=new Promise((l,i)=>{try{let o=function(c,p){return c.document.querySelectorAll(`script[src^="${p.replace(/\?.*$/,"")}"]`)[0]}(e,t);o!=null?a():(o=function(c,p){const v=c.document.createElement("script");return v.src=p,c.document.head.appendChild(v),v}(e,t),o.addEventListener("load",a),o.addEventListener("error",function(){try{throw new Ps(23,[])}catch(c){i(c)}}))}catch(o){return i(o)}function a(){try{if(e.Grammarly==null||typeof e.Grammarly.EditorSDK!="function")throw new Ps(22,[]);l(e.Grammarly)}catch(o){i(o)}}});return fu.set(e,r),await r}async function mu(e,t,n,r){if(typeof window>"u"&&r===void 0)throw new Ps(21,[]);const l=function(o){return o.location.origin!=="null"?o.location.origin:o.origin!=="null"?o.origin:"null"}(r??window);l==="null"&&(r??window).top!==(r??window)&&console.warn("Grammarly is not supported in IFrames with `null` origin. Consider adding `sandbox='allow-same-origin allow-scripts'` to <iframe> element.");const i=new URL("https://js.grammarly.com/grammarly-editor-sdk@2.5",l);t!=null&&i.searchParams.set("clientId",t),i.searchParams.set("packageName",e);const a=await Yh(r??window,i.toString());if(t!=null)return new a.EditorSDK(t,n)}const Wi={onBeforeSuggestionCardOpen:"before-suggestion-card-open",onSuggestionCardOpen:"suggestion-card-open",onSuggestionCardClose:"suggestion-card-close",onSuggestionCardAction:"suggestion-card-action",onPluginTurnedOff:"plugin-turned-off",onPluginError:"plugin-error",onDocumentStats:"document-stats",onSessionStats:"session-stats"};/**
 * @license
 * (c) Copyright 2023 Grammarly, Inc.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=Ya.createContext({});function Xh(e,t,n){const r=b.useCallback(l=>e==null?void 0:e(new CustomEvent("plugin-error",{detail:l})),[e]);b.useEffect(()=>{var l;typeof navigator<"u"&&(t!=null&&((l=n==null?void 0:n.current)===null||l===void 0?void 0:l.ownerDocument.defaultView)!=null&&window!==n.current.ownerDocument.defaultView?mu("@grammarly/editor-sdk-react",t,void 0,n.current.ownerDocument.defaultView).catch(r):mu("@grammarly/editor-sdk-react").catch(r))},n!=null&&t!=null?[n,t]:[])}function pu(e){return typeof e=="function"}const Ls=e=>{const[t,{clientId:n,config:r,children:l,className:i,...a}]=function(j){const z={},f={...j};return Object.keys(Wi).forEach(m=>{z[m]=j[m],m in f&&delete f[m]}),[z,f]}(e),o=b.useContext(Qh),c=b.useRef(),p=b.useRef(),v=b.useRef(),g=b.useCallback(j=>{c.current=j,T()},[]),y=function(j){const[z,f]=b.useState({}),m=b.useCallback(()=>{customElements.whenDefined(j).then(()=>f(h=>({...h,[j]:!0}))).catch(()=>{})},[j]);return b.useEffect(m,[m]),!!z[j]}("grammarly-editor-plugin"),T=b.useCallback(()=>{var j;c.current!=null&&p.current!=null&&y&&c.current.connect(p.current,(j=v.current)!==null&&j!==void 0?j:void 0)},[y]),R=b.useMemo(()=>({...o.config,...r}),[o.config,r]);return b.useEffect(()=>{c.current&&(c.current.config=R)},[c,R]),b.useEffect(()=>{if(c.current==null)return;const{current:j}=c,z=[];return Object.keys(Wi).forEach(f=>{const m=t[f],h=Wi[f];m!=null&&(j.addEventListener(h,m),z.push(()=>j.removeEventListener(h,m)))}),()=>z.forEach(f=>f())},[...Object.values(t),y,c.current]),Xh(e.onPluginError,n??o.clientId,c),Ya.createElement("grammarly-editor-plugin",{...a,ref:g,clientId:n??o.clientId,autodetect:pu(l)?"off":"on",class:i},pu(l)?l({setEditor:j=>{p.current=j,T()},setViewport:j=>{v.current=j,T()}}):l)};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:c,...p},v)=>b.createElement("svg",{ref:v,...Jh,width:l,height:l,stroke:r,strokeWidth:a?Number(i)*24/Number(l):i,className:["lucide",`lucide-${qh(e)}`,o].join(" "),...p},[...t.map(([g,y])=>b.createElement(g,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ce("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ce("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ce("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ce("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M18.4 2.6a2.17 2.17 0 0 1 3 3L16 11l-4 1 1-4Z",key:"1dba1m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ce("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ce("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=ce("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ce("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jf=["The facts outlined in the statement of claim","Statement of Claim  Factual Summary"],xn="Factual background  Statement of Claim",qf=["Factual Summary from the Letter of Demand"],Vr="Factual background  Letter of Demand",Go="The plaintiff's expert opinion",Ko="The claimant's expert opinion",tr=[{id:"u1",username:"lior",password:"lior123",name:"Lior Perry",email:"lior@lp-law.co.il",role:"ADMIN"},{id:"u2",username:"lidor",password:"lidor123",name:"Lidor Kabilo",email:"Lidor@lp-law.co.il",role:"SUB_ADMIN"},{id:"u3",username:"iris",password:"iris123",name:"Iris Alfman",email:"Iris@lp-law.co.il",role:"FINANCE"},{id:"u4",username:"hava",password:"hava123",name:"Hava Kabilo",email:"Hava@lp-law.co.il",role:"LAWYER"},{id:"u5",username:"may",password:"may123",name:"May Harari",email:"May@lp-law.co.il",role:"LAWYER"},{id:"u6",username:"vlada",password:"vlada123",name:"Vlada Boltach",email:"Vlada@lp-law.co.il",role:"LAWYER"},{id:"u7",username:"orly",password:"orly123",name:"Orly Day",email:"Orly@lp-law.co.il",role:"LAWYER"}],hu=["W/R/B Underwriting","QBE Insurance Group","Market Form Underwriting","Dale Underwriting Partners","MedPro & CNA Syndicate","Hardy (Underwriting Agencies) Limited"],xx=[xn,Vr,Go,Ko,"The insured's expert opinion","Insurance Coverage","Risk Assessment","MPL","Strategy","Expenses breakdown","Expenses & Compensation breakdown","Recommendations","Strategy & Recommendations","Request for Approval of a Settlement Agreement"],Zf=["New lawsuit","Letter of demand","New third-party notice","Caution Notice"],Hi={Update:["    .","    [DATE]      .","       .","        ."],"Insurance Coverage":[`The policy period is from [policyStartDate] to [policyEndDate].

The retroactive date is [retroactiveDate].

    _______________, ,   .

      ,     ____________  ____________.

,         .`],"Risk Assessment":[",       ( 50%).","        .","     ,      .","     ,    ."],Recommendations:["         .","         .","      .","    '     ."],[xn]:[", {plaintiff},    [DATE]    .","    , {insured},     .","    ."],[Vr]:[", {plaintiff},         [DATE].","         .","        ."],Strategy:["         .","          .","         ."]},Yo=e=>e===Go,Qo=e=>e===Ko,xu=e=>Yo(e)||Qo(e),gx=e=>Yo(e)||e===xn?"PLAINTIFF":Qo(e)||e===Vr?"CLAIMANT":null,gu=(e,t="SINGLE")=>`${t==="MULTIPLE"?"Expert opinions":"Expert opinion"}  ${e==="PLAINTIFF"?"Statement of Claim":"Letter of Demand"}`,yx=(e,t)=>Yo(e)?gu("PLAINTIFF",t):Qo(e)?gu("CLAIMANT",t):e,vx=({data:e})=>{const[t,n]=b.useState(""),[r,l]=b.useState(!1),[i,a]=b.useState(null);if(b.useEffect(()=>{let c=!1;return(async()=>{l(!0),a(null);try{const v=await fetch("/api/render-report-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report:e})});if(!v.ok)throw new Error("Failed to load report HTML");const g=await v.text();c||n(g)}catch(v){console.error(v),c||a("   ")}finally{c||l(!1)}})(),()=>{c=!0}},[e]),i)return s.jsx("div",{className:"w-[210mm] min-h-[297mm] bg-white shadow-2xl mx-auto flex items-center justify-center text-sm text-red-600",children:i});if(r&&!t)return s.jsx("div",{className:"w-[210mm] min-h-[297mm] bg-white shadow-2xl mx-auto flex flex-col items-center justify-center text-sm text-gray-500",children:s.jsx("span",{children:"  ..."})});const o=!!e.policyFile&&(e.attachPolicyAsAppendix??!0);return s.jsxs("div",{className:"space-y-2",children:[s.jsx("iframe",{title:"Report Preview",className:"w-[210mm] min-h-[297mm] bg-white shadow-2xl mx-auto border-none print:shadow-none print:w-full",srcDoc:t}),o&&s.jsx("p",{className:"w-[210mm] mx-auto text-[11px] text-gray-500 text-right",children:"The policy file will be attached as Appendix A in the final PDF (not shown in this preview)."})]})},em=e=>{switch(e){case"HEBREW_SUBMITTED":return" ";case"HEBREW_CHANGES_REQUESTED":return" ";case"HEBREW_APPROVED":return" ";case"HEBREW_REOPENED_EXTERNAL":return"  ()";case"HEBREW_DRAFT":default:return" "}},Nx=e=>{switch(e){case"SUBMITTED":return"  ";case"CHANGES_REQUESTED":return"  ";case"APPROVED":return"  ";case"DRAFT":default:return"  (  )"}},wx=({report:e,currentUser:t,onSubmitToAdmin:n,onApproveHebrew:r,onRequestChanges:l,onMarkIssueDone:i,onAddExternalFeedbackIssues:a,onReopenHebrewDueToExternalFeedback:o})=>{const[c,p]=b.useState(!1),[v,g]=b.useState(""),[y,T]=b.useState(""),[R,j]=b.useState("NORMAL"),[z,f]=b.useState(""),[m,h]=b.useState("INTERNAL"),[E,A]=b.useState("ENGLISH_ONLY"),I=b.useMemo(()=>{const L=e.reportReview;return L||{status:"DRAFT",issues:[]}},[e.reportReview]),B=b.useMemo(()=>{const L={};return I.issues.filter(q=>(q.origin??"INTERNAL")==="INTERNAL").forEach(q=>{const C=q.sectionKey||"GENERAL";L[C]||(L[C]=[]),L[C]=[...L[C],q]}),L},[I.issues]),H=b.useMemo(()=>{const L={};return I.issues.filter(q=>q.origin==="EXTERNAL").forEach(q=>{const C=q.sectionKey||"GENERAL";L[C]||(L[C]=[]),L[C]=[...L[C],q]}),L},[I.issues]),se=(t==null?void 0:t.role)==="LAWYER",te=(t==null?void 0:t.role)==="ADMIN",w=I.issues.some(L=>(L.origin??"INTERNAL")==="EXTERNAL"&&L.status!=="DONE"&&L.externalAction==="REQUIRES_HEBREW"),X=L=>{h(L),g(""),T(""),j("NORMAL"),f(""),A("ENGLISH_ONLY"),p(!0)},Z=()=>{const L=v.trim(),q=y.trim();if(!L||!q)return;const C={title:L,instruction:q,severity:R,type:"OTHER",sectionKey:void 0,externalAction:m==="EXTERNAL"?E:void 0};m==="EXTERNAL"&&a?a([C],z.trim()||void 0):l([C]),p(!1)},D=Nx(I.status),V=em(e.hebrewWorkflowStatus);return s.jsxs("section",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 px-4 py-3",dir:"rtl",lang:"he",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500",children:" "}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:D})]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-700",children:V})]}),se&&s.jsx("div",{className:"mb-3 text-xs text-amber-700",children:e.hebrewWorkflowStatus==="HEBREW_REOPENED_EXTERNAL"?"            .":I.status==="SUBMITTED"?"   .       .":I.status==="CHANGES_REQUESTED"?"   .      .":null}),te&&w&&s.jsx("div",{className:"mb-3 text-xs font-semibold text-red-700",children:"      .    ."}),I.issues.length>0&&s.jsxs("div",{className:"mb-3 space-y-3",children:[Object.keys(B).length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600",children:"  ()"}),Object.entries(B).map(([L,q])=>s.jsxs("div",{className:"rounded-lg bg-white p-2 mb-1",children:[L!=="GENERAL"&&s.jsxs("div",{className:"mb-1 text-[11px] font-semibold text-slate-500",children:[": ",L]}),s.jsx("ul",{className:"space-y-1",children:q.map(C=>s.jsxs("li",{className:"flex items-start justify-between gap-2 rounded-md border border-slate-100 bg-slate-50 px-2 py-1.5",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold ${C.severity==="CRITICAL"?"bg-red-100 text-red-700":C.severity==="NORMAL"?"bg-amber-50 text-amber-700":"bg-slate-100 text-slate-600"}`,children:C.severity==="CRITICAL"?"":C.severity==="NORMAL"?"":""}),s.jsx("span",{className:"text-xs font-medium text-slate-900",children:C.title})]}),s.jsx("div",{className:"mt-1 text-[11px] text-slate-700",children:C.instruction})]}),(se||te)&&s.jsx("button",{type:"button",className:"mt-1 inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 hover:bg-emerald-100 disabled:opacity-50",disabled:C.status==="DONE",onClick:()=>i(C.id),children:C.status==="DONE"?"":" "})]},C.id))})]},L))]}),Object.keys(H).length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600",children:"  "}),Object.entries(H).map(([L,q])=>s.jsxs("div",{className:"rounded-lg bg-white p-2 mb-1",children:[L!=="GENERAL"&&s.jsxs("div",{className:"mb-1 text-[11px] font-semibold text-slate-500",children:[": ",L]}),s.jsx("ul",{className:"space-y-1",children:q.map(C=>s.jsxs("li",{className:"flex items-start justify-between gap-2 rounded-md border border-slate-100 bg-slate-50 px-2 py-1.5",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold ${C.severity==="CRITICAL"?"bg-red-100 text-red-700":C.severity==="NORMAL"?"bg-amber-50 text-amber-700":"bg-slate-100 text-slate-600"}`,children:C.severity==="CRITICAL"?"":C.severity==="NORMAL"?"":""}),s.jsx("span",{className:"text-xs font-medium text-slate-900",children:C.title})]}),s.jsx("div",{className:"mt-1 text-[11px] text-slate-700",children:C.instruction})]}),(se||te)&&s.jsx("button",{type:"button",className:"mt-1 inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700 hover:bg-emerald-100 disabled:opacity-50",disabled:C.status==="DONE",onClick:()=>i(C.id),children:C.status==="DONE"?"":" "})]},C.id))})]},L))]})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[se&&s.jsx("button",{type:"button",className:"rounded-md bg-sky-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-sky-800 disabled:opacity-50",onClick:n,disabled:I.status==="SUBMITTED"||I.status==="APPROVED",children:"  "}),te&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-emerald-800 disabled:opacity-50",onClick:r,children:"  "}),s.jsx("button",{type:"button",className:"rounded-md bg-amber-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-800",onClick:()=>X("INTERNAL"),children:" "}),a&&s.jsx("button",{type:"button",className:"rounded-md bg-slate-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-slate-800",onClick:()=>X("EXTERNAL"),children:"   "}),o&&e.status==="SENT"&&s.jsx("button",{type:"button",className:"rounded-md bg-red-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-800",onClick:o,children:"   ( )"}),o&&e.status!=="SENT"&&s.jsx("span",{className:"text-[11px] text-slate-500",children:"       (SENT)."})]})]}),c&&s.jsx("div",{className:"fixed inset-0 z-[180] flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-4 shadow-2xl",dir:"rtl",lang:"he",children:[s.jsx("h3",{className:"mb-3 text-sm font-bold text-slate-900",children:"   "}),s.jsxs("div",{className:"mb-3 space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-semibold text-slate-700",children:"  ()"}),s.jsx("input",{type:"text",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-sm",value:v,onChange:L=>g(L.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-semibold text-slate-700",children:"  ()"}),s.jsx("textarea",{className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-sm",rows:3,value:y,onChange:L=>T(L.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-semibold text-slate-700",children:" "}),s.jsxs("select",{className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs",value:R,onChange:L=>j(L.target.value),children:[s.jsx("option",{value:"NORMAL",children:""}),s.jsx("option",{value:"CRITICAL",children:""}),s.jsx("option",{value:"STYLE",children:""})]})]}),m==="EXTERNAL"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-semibold text-slate-700",children:"    ()"}),s.jsx("input",{type:"text",className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-sm",value:z,onChange:L=>f(L.target.value)}),s.jsx("label",{className:"mb-1 mt-3 block text-xs font-semibold text-slate-700",children:" "}),s.jsxs("select",{className:"w-full rounded-md border border-slate-300 px-2 py-1.5 text-xs",value:E,onChange:L=>A(L.target.value),children:[s.jsx("option",{value:"ENGLISH_ONLY",children:"  "}),s.jsx("option",{value:"REQUIRES_HEBREW",children:"  "})]})]})]}),s.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"rounded-md border border-slate-300 px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-100",onClick:()=>p(!1),children:""}),s.jsx("button",{type:"button",className:"rounded-md bg-amber-700 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-800 disabled:opacity-50",onClick:Z,disabled:!v.trim()||!y.trim(),children:" "})]})]})})]})},Os="REPLACE_WITH_GRAMMARLY_CLIENT_ID",yu=[{id:"general_update",label:"General Update",body:`Dear Sir/Madam,

Please find below our general update regarding the above-captioned matter.

Best regards,
Lior Perry, Adv.`},{id:"risk_assessment",label:"Risk Assessment",body:`Dear Sir/Madam,

Kindly review the following risk assessment prepared for the insurer.

Best regards,
Lior Perry, Adv.`},{id:"expert_opinion",label:"Expert Opinion",body:`Dear Sir/Madam,

Please find our expert opinion summary for your review and records.

Best regards,
Lior Perry, Adv.`},{id:"full_report",label:"Full Report Delivery",body:`Dear Sir/Madam,

Attached is the full report for the current update, including all relevant sections.

Best regards,
Lior Perry, Adv.`}],vu=e=>`emailTemplates:${e||"default"}`,Sx=({isOpen:e,report:t,userId:n,isSending:r=!1,onClose:l,onSend:i})=>{const a=yu[0],[o,c]=b.useState(a.id),[p,v]=b.useState(a.body),[g,y]=b.useState([]),T=h=>{if(typeof window>"u")return[];try{const E=localStorage.getItem(vu(h));if(!E)return[];const A=JSON.parse(E);return Array.isArray(A)?A.filter(I=>typeof(I==null?void 0:I.id)=="string"&&typeof(I==null?void 0:I.label)=="string"&&typeof(I==null?void 0:I.body)=="string"):[]}catch{return[]}},R=h=>{typeof window>"u"||localStorage.setItem(vu(n),JSON.stringify(h))},j=b.useMemo(()=>[...yu,...g],[g]),z=b.useMemo(()=>j.reduce((h,E)=>(h[E.id]=E,h),{}),[j]);b.useEffect(()=>{if(!e)return;const h=T(n);y(h)},[e,n]),b.useEffect(()=>{if(!e)return;const h=t.selectedEmailTemplate&&z[t.selectedEmailTemplate]?t.selectedEmailTemplate:a.id;c(h),v(t.emailBodyDraft||z[h].body)},[e,a.id,t.emailBodyDraft,t.selectedEmailTemplate,z]);const f=h=>{c(h);const E=z[h];E&&v(E.body)},m=()=>{const h=window.prompt("  ?");if(!h)return;const E=h.trim();if(!E)return;const A={id:`custom_${Date.now()}`,label:E,body:p},I=[...g,A];y(I),R(I),c(A.id)};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[999] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Compose Email"}),s.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700",children:s.jsx(kt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:o,onChange:h=>f(h.target.value),className:"flex-1 border rounded-md p-2",children:j.map(h=>s.jsx("option",{value:h.id,children:h.label},h.id))}),s.jsx("button",{type:"button",onClick:m,className:"px-3 py-2 bg-white border rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100",disabled:r,children:"Save Template"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),s.jsx(Ls,{clientId:Os,children:s.jsx("textarea",{value:p,onChange:h=>v(h.target.value),rows:12,dir:"ltr",className:"w-full border rounded-md p-3 text-sm",style:{direction:"ltr",textAlign:"left",unicodeBidi:"plaintext"}})})]}),s.jsxs("div",{className:"border-t pt-4 text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Signature"}),s.jsxs("div",{className:"inline-flex flex-col items-end",children:[s.jsx("img",{src:"/assets/branding/signature.png",alt:"Signature placeholder",className:"h-16 object-contain mb-2 opacity-80",onError:h=>{h.currentTarget.style.display="none"}}),s.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"Adv. Lior Perry"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 border-t px-6 py-4 bg-gray-50",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 rounded-md text-gray-600 hover:bg-gray-200",disabled:r,children:"Cancel"}),s.jsx("button",{onClick:()=>i(p,o),className:"px-5 py-2 rounded-md bg-lpBlue text-white font-semibold hover:bg-blue-900 disabled:opacity-60 disabled:cursor-not-allowed",disabled:r,children:r?"Sending":"Send Email"})]})]})}):null},bx=({isOpen:e,availableTitles:t,selectedTitles:n,onClose:r,onSave:l})=>{const i=b.useMemo(()=>y=>{const T=new Set,R=[];return y.forEach(j=>{const z=t.find(f=>f.label===j&&!T.has(f.id));z&&(R.push(z.id),T.add(z.id))}),R},[t]),a=b.useCallback(()=>{const y=i(n);return y.length?y:t.map(T=>T.id)},[i,n,t]),[o,c]=b.useState(a);if(b.useEffect(()=>{e&&c(a())},[e,a]),!e)return null;const p=y=>{c(T=>T.includes(y)?T.filter(R=>R!==y):[...T,y])},v=()=>{c(t.map(y=>y.id))},g=()=>{const y=o.map(T=>{var R;return(R=t.find(j=>j.id===T))==null?void 0:R.label}).filter(Boolean);l(y)};return s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[900] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b bg-gray-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Select File Name Titles"}),s.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-800",children:s.jsx(kt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-3",children:[t.length===0&&s.jsx("p",{className:"text-sm text-gray-500",children:"No sections available to include."}),t.map(y=>s.jsxs("label",{className:"flex items-center gap-3 border rounded-lg px-3 py-2 text-sm",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 text-lpBlue",checked:o.includes(y.id),onChange:()=>p(y.id)}),s.jsx("span",{className:"text-gray-800",children:y.label||"[Untitled Section]"})]},y.id)),t.length>0&&s.jsx("button",{type:"button",className:"text-xs text-lpBlue hover:underline",onClick:v,children:"Select All"})]}),s.jsxs("div",{className:"flex justify-end gap-3 border-t px-5 py-4 bg-gray-50",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:bg-gray-200 rounded-md",children:"Cancel"}),s.jsx("button",{onClick:g,className:"px-5 py-2 bg-lpBlue text-white rounded-md font-semibold hover:bg-blue-900",children:"Save"})]})]})})},jx={dashboardTitle:" ",brandName:"Lior Perry",brandSubtitle:"  ",welcomeBack:" ",roleLawyer:"",gettingStartedTitle:" ",gettingStartedBodyLine1:"  .",gettingStartedBodyLine2:"   .          .",gettingStartedStep1:"  ",gettingStartedStep2:" ",gettingStartedStep3:"  ",gettingStartedCta:"  ",searchSectionLabel:" ",searchLabel:" ",searchPlaceholder:"  , ,     ...",statusLabel:"",sortByLabel:" ",sortByUpdated:" ",sortByReportDate:" ",sortByInsured:"",onlyMyCases:"  ",clearFilters:" ",searchByOdakanit:"    ",searchOdakanitPlaceholder:"    ...",noCaseFolderFound:"       .",statsSectionLabel:"  ",statsActiveCases:" ",statsActionRequired:"  ",statsWaitingOnOthers:"  / ",statsDraftsReady:" /  ",bucketActionRequiredTitle:"  ",bucketActionRequiredDescription:"    .",bucketWaitingTitle:"  / ",bucketWaitingDescription:"     .",bucketInProgressTitle:"",bucketInProgressDescription:"   .",bucketSentTitle:" / ",bucketSentDescription:"     .",emptyActionRequiredTitle:"    ",emptyActionRequiredDesc:"    ,   .",emptyWaitingTitle:"    / ",emptyWaitingDesc:"       .",emptyInProgressTitle:"  ",emptyInProgressDesc:"    .",emptySentTitle:"   ",emptySentDesc:"  ,     .",emptyInProgressCta:"  ",defaultEmptyTitle:"  ",defaultEmptyDescription:"     .",untitledCase:"  ",labelInsured:"",labelPlaintiff:"",labelInsurer:" ",labelFile:" ",labelUpdated:":",labelNextStep:" :",nextStepReview:"  ",nextStepWaitingInvoices:" ",nextStepReadyToSend:" ",nextStepDraft:"  ",nextStepSent:"",nextStepContinue:" ",openContinue:" / ",preview:" ",viewSections:"  ",deleteDraftConfirm:"   ?     .",deleteDraftAria:" ",deleteTitle:"",pin:" ",unpin:" ",alertTimeBreach:" ",alertResponseDelay:" ",openNotificationsAria:" ",openNotificationsTitle:"",openNewCaseFolderAria:"  ",openNewCaseFolderTitle:"  ",openHelpCenterAria:"  ",openHelpCenterTitle:" ",logoutAria:"",logoutTitle:"",workQueuesAria:"  ",expand:"",collapse:"",statusDraft:"",statusActionRequired:" ",statusWaitingInvoices:" ",statusPendingReview:" ",statusApproved:"",statusReadyToSend:" ",statusSent:"",densityLabel:" :",densityComfortable:"",densityCompact:"",resumeLastCase:"   ",resumeLabel:"",internalFile:" ",workloadTitle:"  ",workloadActionLabel:"  ",workloadWaitingLabel:" ",workloadDraftLabel:"",focusModeLabel:"    ",tagNewCase:" ",tagOngoingCase:" ",notificationTitle:" ",dailySummary:" ",noNotifications:"  .",clearAll:" ",footerArchiveNote:"      "},P=e=>jx[e],cl=({label:e,value:t,icon:n,accentClass:r,selected:l,onClick:i})=>{const a=s.jsxs("div",{className:["flex items-center justify-between rounded-2xl border px-4 py-3 shadow-sm transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",l?"border-lpBlue bg-blue-50/80":"border-gray-200 bg-white hover:bg-gray-50"].join(" "),children:[s.jsxs("div",{children:[s.jsx("p",{className:["text-[11px] uppercase tracking-wide",l?"font-bold text-gray-800":"font-semibold text-gray-500"].join(" "),children:e}),s.jsx("p",{className:"mt-1 text-xl font-bold text-gray-900",children:t})]}),s.jsx("div",{className:["inline-flex h-9 w-9 items-center justify-center rounded-full",r].join(" "),"aria-hidden":"true",children:n})]});return i?s.jsx("button",{type:"button",onClick:i,className:"w-full text-left",children:a}):a},Ex=({activeCases:e,actionRequired:t,waitingOnOthers:n,draftsAndReady:r,selectedFilter:l,onChangeFilter:i})=>{const a=o=>{i&&i(l===o?null:o)};return s.jsxs("section",{"aria-label":P("statsSectionLabel"),className:"mb-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(cl,{label:P("statsActiveCases"),value:e,icon:s.jsx(zo,{className:"h-4 w-4 text-lpBlue"}),accentClass:"bg-blue-50",selected:l==="ACTIVE",onClick:()=>a("ACTIVE")}),s.jsx(cl,{label:P("statsActionRequired"),value:t,icon:s.jsx($a,{className:"h-4 w-4 text-orange-600"}),accentClass:"bg-orange-50",selected:l==="ACTION",onClick:()=>a("ACTION")}),s.jsx(cl,{label:P("statsWaitingOnOthers"),value:n,icon:s.jsx(rx,{className:"h-4 w-4 text-yellow-600"}),accentClass:"bg-yellow-50",selected:l==="WAITING",onClick:()=>a("WAITING")}),s.jsx(cl,{label:P("statsDraftsReady"),value:r,icon:s.jsx(Jl,{className:"h-4 w-4 text-emerald-600"}),accentClass:"bg-emerald-50",selected:l==="DRAFTS",onClick:()=>a("DRAFTS")})]})},kx=[{value:"ALL",label:" "},{value:"DRAFT",label:""},{value:"TASK_ASSIGNED",label:" "},{value:"WAITING_FOR_INVOICES",label:" "},{value:"PENDING_REVIEW",label:" "},{value:"APPROVED",label:""},{value:"READY_TO_SEND",label:" "},{value:"SENT",label:""}],Cx=({searchQuery:e,onSearchQueryChange:t,statusFilter:n,onStatusFilterChange:r,onlyMyCases:l,onOnlyMyCasesChange:i,sortBy:a,onSortByChange:o,hasActiveFilter:c,onClearFilters:p})=>s.jsx("section",{"aria-label":P("searchSectionLabel"),className:"mb-4 flex flex-col gap-3 rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("label",{className:"sr-only",htmlFor:"lawyer-dashboard-search",children:P("searchLabel")}),s.jsx(Yf,{className:"pointer-events-none absolute right-3 top-2.5 h-4 w-4 text-gray-400","aria-hidden":"true"}),s.jsx("input",{id:"lawyer-dashboard-search",type:"search",className:"w-full rounded-full border border-gray-300 py-2 pr-9 pl-3 text-sm text-gray-900 placeholder:text-gray-400 focus:border-lpBlue focus:outline-none focus:ring-1 focus:ring-lpBlue",placeholder:P("searchPlaceholder"),value:e,onChange:v=>t(v.target.value)})]}),s.jsxs("div",{className:"flex flex-1 flex-col gap-3 md:flex-row md:items-center md:justify-end",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"lawyer-dashboard-status-filter",className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:P("statusLabel")}),s.jsx("select",{id:"lawyer-dashboard-status-filter",className:"rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-800 focus:border-lpBlue focus:outline-none focus:ring-1 focus:ring-lpBlue",value:n,onChange:v=>r(v.target.value),children:kx.map(v=>s.jsx("option",{value:v.value,children:v.label},v.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"lawyer-dashboard-sort-by",className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:P("sortByLabel")}),s.jsxs("select",{id:"lawyer-dashboard-sort-by",className:"rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-800 focus:border-lpBlue focus:outline-none focus:ring-1 focus:ring-lpBlue",value:a,onChange:v=>o(v.target.value),children:[s.jsx("option",{value:"UPDATED",children:P("sortByUpdated")}),s.jsx("option",{value:"REPORT_DATE",children:P("sortByReportDate")}),s.jsx("option",{value:"INSURED",children:P("sortByInsured")})]})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-xs font-medium text-gray-700",children:[s.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 rounded border-gray-300 text-lpBlue focus:ring-lpBlue",checked:l,onChange:v=>i(v.target.checked)}),s.jsx("span",{children:P("onlyMyCases")})]}),c&&p&&s.jsx("button",{type:"button",onClick:p,className:"text-[11px] font-medium text-gray-600 underline-offset-2 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:P("clearFilters")})]})]})}),Tx={DRAFT:{label:P("statusDraft"),bg:"bg-blue-50",text:"text-blue-800",border:"border-blue-200"},TASK_ASSIGNED:{label:P("statusActionRequired"),bg:"bg-orange-50",text:"text-orange-800",border:"border-orange-200"},WAITING_FOR_INVOICES:{label:P("statusWaitingInvoices"),bg:"bg-yellow-50",text:"text-yellow-800",border:"border-yellow-200"},PENDING_REVIEW:{label:P("statusPendingReview"),bg:"bg-orange-50",text:"text-orange-800",border:"border-orange-200"},APPROVED:{label:P("statusApproved"),bg:"bg-green-50",text:"text-green-800",border:"border-green-200"},READY_TO_SEND:{label:P("statusReadyToSend"),bg:"bg-emerald-50",text:"text-emerald-800",border:"border-emerald-200"},SENT:{label:P("statusSent"),bg:"bg-slate-50",text:"text-slate-800",border:"border-slate-200"}},Rx=({status:e,ariaLabel:t})=>{const n=Tx[e];return n?s.jsxs("span",{className:["inline-flex items-center px-2.5 py-1 rounded-full border text-[11px] font-semibold tracking-wide",n.bg,n.text,n.border].join(" "),"aria-label":t||`: ${n.label}`,children:[s.jsx("span",{className:"ml-1.5 h-1.5 w-1.5 rounded-full bg-current","aria-hidden":"true"}),n.label]}):null},ns=e=>(e||"").trim().toLowerCase(),An=e=>{const t=(e.odakanitNo||"").trim();if(t)return`odakanit:${t}`;const n=[`umr:${ns(e.marketRef)}`,`line:${ns(e.lineSlipNo)}`,`cert:${ns(e.certificateRef)}`,`insured:${ns(e.insuredName)}`,`plaintiff:${ns(e.plaintiffName)}`].filter(r=>!r.endsWith(":"));return n.length?n.join("|"):`id:${e.id}`},tm=24*60*60*1e3,Ax=e=>{switch(e){case"TASK_ASSIGNED":case"PENDING_REVIEW":return P("nextStepReview");case"WAITING_FOR_INVOICES":return P("nextStepWaitingInvoices");case"READY_TO_SEND":return P("nextStepReadyToSend");case"DRAFT":return P("nextStepDraft");case"SENT":return"";default:return P("nextStepContinue")}},Ix=e=>{const t=e.updatedAt||e.reportDate;if(!t)return null;const n=new Date(t).getTime();return Number.isFinite(n)?n:null},nm=e=>{const t=Ix(e);return!t||(Date.now()-t)/tm<=3?null:e.status==="DRAFT"?P("alertResponseDelay"):e.status==="WAITING_FOR_INVOICES"||e.status==="READY_TO_SEND"?P("alertTimeBreach"):null},Dx=e=>e.status==="TASK_ASSIGNED"||e.status==="PENDING_REVIEW"||e.status==="READY_TO_SEND",_x=(e,t)=>{const n=An(e);if(!n)return!1;const r=t.filter(a=>!a.deletedAt&&An(a)===n);if(r.length<=1)return!0;let l=Number.POSITIVE_INFINITY;return r.forEach(a=>{if(!a.reportDate)return;const o=new Date(a.reportDate).getTime();Number.isFinite(o)&&o<l&&(l=o)}),Number.isFinite(l)?Date.now()-l<14*tm:!1},Px=e=>e.insuredName||e.plaintiffName||e.odakanitNo||P("untitledCase"),Lx=e=>{const t=[];return e.plaintiffName&&t.push(`${P("labelPlaintiff")}: ${e.plaintiffName}`),e.insurerName&&t.push(`${P("labelInsurer")}: ${e.insurerName}`),e.odakanitNo&&t.push(`${P("labelFile")}: ${e.odakanitNo}`),t.join("  ")},Ox=e=>e==="DRAFT",Mx=({report:e,onOpen:t,onDelete:n,pinned:r=!1,onTogglePin:l,density:i="COMFORTABLE",isNewCase:a})=>{const o=Px(e),c=Lx(e),p=n&&Ox(e.status),v=e.reportDate?new Date(e.reportDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",g=Ax(e.status),y=nm(e),T=R=>{R.key==="Enter"&&(R.preventDefault(),t())};return s.jsxs("article",{tabIndex:0,onKeyDown:T,className:`flex flex-col border border-gray-200 bg-white shadow-sm transition hover:border-gray-300 hover:shadow-md focus-within:ring-2 focus-within:ring-lpBlue focus-within:ring-offset-2 ${i==="COMPACT"?"rounded-xl p-3":"rounded-2xl p-4"}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"text-right flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-0.5",children:o}),i==="COMPACT"?c&&s.jsx("p",{className:"mt-0.5 text-[11px] text-gray-600",children:c}):s.jsxs(s.Fragment,{children:[c&&s.jsx("p",{className:"text-xs text-gray-600 mb-1.5",children:c}),s.jsxs("div",{className:"space-y-0.5 mt-1",children:[v&&s.jsxs("p",{className:"text-[11px] text-gray-500",children:[P("labelUpdated")," ",v]}),g&&s.jsxs("p",{className:"text-[11px] text-gray-600",children:[s.jsx("span",{className:"font-medium text-gray-700",children:P("labelNextStep")})," ",g]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Rx,{status:e.status}),e.hebrewWorkflowStatus&&s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-50 px-2 py-0.5 text-[10px] font-medium text-slate-700",children:em(e.hebrewWorkflowStatus)}),e.policyFile&&(e.attachPolicyAsAppendix??!0)&&s.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-[10px] font-medium text-emerald-700",children:"Policy attached as appendix"}),typeof a=="boolean"&&s.jsx("span",{className:"inline-flex items-center rounded-full border border-gray-200 bg-gray-50 px-2 py-0.5 text-[10px] font-medium text-gray-600",children:P(a?"tagNewCase":"tagOngoingCase")}),y&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200 bg-amber-50 px-2 py-0.5 text-[10px] font-medium text-amber-800",children:[s.jsx(Zh,{className:"h-3 w-3","aria-hidden":"true"}),y]}),l&&s.jsx("button",{type:"button",onClick:l,className:`inline-flex items-center justify-center rounded-full border bg-white p-1.5 text-xs focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2 ${r?"border-amber-300 text-amber-600":"border-gray-200 text-gray-400 hover:bg-gray-50"}`,"aria-label":r?`${P("unpin")} ${o}`:`${P("pin")} ${o}`,title:P(r?"unpin":"pin"),children:s.jsx(Qf,{className:`h-3.5 w-3.5 ${r?"fill-amber-400":"fill-none"}`,"aria-hidden":"true"})})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between gap-2",children:[s.jsx("div",{className:"flex flex-row-reverse items-center gap-2",children:s.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center rounded-full bg-lpBlue px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":`${P("openContinue")} ${o}`,children:[s.jsx($o,{className:"ml-1 h-3.5 w-3.5","aria-hidden":"true"}),P("openContinue")]})}),s.jsxs("div",{className:"flex flex-row-reverse items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-gray-200 bg-white p-1.5 text-gray-600 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":`${P("preview")} ${o}`,children:s.jsx(sx,{className:"h-3.5 w-3.5","aria-hidden":"true"})}),s.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-full border border-gray-200 bg-white p-1.5 text-gray-600 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":`${P("viewSections")} ${o}`,children:s.jsx(ar,{className:"h-3.5 w-3.5","aria-hidden":"true"})}),p&&s.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center justify-center rounded-full border border-red-200 bg-white p-1.5 text-red-600 hover:bg-red-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2","aria-label":P("deleteDraftAria"),title:P("deleteTitle"),children:s.jsx(nn,{className:"h-3.5 w-3.5","aria-hidden":"true"})})]})]})]})},Fx=({title:e,description:t,actionLabel:n,onAction:r})=>s.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8 px-4 text-sm text-gray-500",children:[s.jsx("div",{className:"mb-3 inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-100 text-gray-500",children:s.jsx(ar,{className:"h-5 w-5","aria-hidden":"true"})}),s.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:e}),s.jsx("p",{className:"max-w-sm mb-3",children:t}),n&&r&&s.jsx("button",{type:"button",onClick:r,className:"inline-flex items-center rounded-full bg-lpBlue px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:n})]}),ul=({id:e,title:t,description:n,reports:r,defaultCollapsed:l=!1,onOpenReport:i,onDeleteReport:a,emptyTitle:o,emptyDescription:c,emptyActionLabel:p,onEmptyAction:v,pinnedIds:g,onTogglePin:y,density:T="COMFORTABLE",stickyOffsetPx:R,isNewCase:j})=>{const[z,f]=b.useState(l),m=r.length,h=b.useMemo(()=>r,[r]),E=b.useCallback(()=>{f(A=>!A)},[]);return s.jsxs("section",{"aria-labelledby":`lawyer-section-${e}`,className:"rounded-2xl border border-gray-200 bg-white shadow-sm",children:[s.jsxs("header",{className:["flex items-center justify-between gap-3 border-b px-4 py-3",typeof R=="number"?"sticky z-10 bg-white/90 backdrop-blur-sm":""].join(" "),style:typeof R=="number"?{top:R}:void 0,children:[s.jsxs("div",{children:[s.jsxs("h2",{id:`lawyer-section-${e}`,className:"text-sm font-semibold text-gray-900",children:[t," ",s.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",m,")"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:n})]}),s.jsx("button",{type:"button",onClick:E,className:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-600 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-expanded":!z,"aria-controls":`lawyer-section-body-${e}`,children:z?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"ml-1 h-3 w-3","aria-hidden":"true"}),P("expand")]}):s.jsxs(s.Fragment,{children:[s.jsx(Vf,{className:"ml-1 h-3 w-3","aria-hidden":"true"}),P("collapse")]})})]}),s.jsx("div",{id:`lawyer-section-body-${e}`,className:z?"hidden":"",children:h.length===0?s.jsx(Fx,{title:o||P("defaultEmptyTitle"),description:c||P("defaultEmptyDescription"),actionLabel:p,onAction:v}):s.jsx("div",{className:"space-y-3 p-4",children:h.map(A=>s.jsx(Mx,{report:A,onOpen:()=>i(A),onDelete:a?()=>a(A):void 0,pinned:g?g.includes(An(A)):!1,onTogglePin:y?()=>y(A):void 0,density:T,isNewCase:j?j(A):void 0},A.id))})})]})},Bx=P("brandName"),$x=P("brandSubtitle"),zx=e=>e==="TASK_ASSIGNED"||e==="PENDING_REVIEW"?"ACTION_REQUIRED":e==="WAITING_FOR_INVOICES"||e==="APPROVED"||e==="READY_TO_SEND"?"WAITING_ON_OTHERS":e==="SENT"?"SENT_COMPLETED":"IN_PROGRESS",dl=e=>`lp_pins:${e}`,Nu=e=>`lp_dashboard_density:${e}`,Wx="lp_current_report",wu=e=>`lp_pins_migrated:${e}`,Hx=({user:e,reports:t,caseFolders:n,notifications:r,showNotifications:l,setShowNotifications:i,onClearNotifications:a,dailySummaryOptIn:o,setDailySummaryOptIn:c,archiveAfterMs:p,onSelectReport:v,onNewReport:g,onOpenCaseFolder:y,onLogout:T,deleteReportById:R})=>{const[j,z]=b.useState(""),[f,m]=b.useState("ALL"),[h,E]=b.useState(!0),[A,I]=b.useState(null),[B,H]=b.useState("UPDATED"),[se,te]=b.useState(()=>{if(typeof window>"u")return[];try{const $=window.localStorage.getItem(dl(e.id)),oe=$?JSON.parse($):[];return Array.isArray(oe)?oe.filter(N=>typeof N=="string"):[]}catch{return[]}}),[w,X]=b.useState(()=>{if(typeof window>"u")return"COMFORTABLE";try{return window.localStorage.getItem(Nu(e.id))==="COMPACT"?"COMPACT":"COMFORTABLE"}catch{return"COMFORTABLE"}}),Z=Date.now(),D=p??Number.MAX_SAFE_INTEGER,[V,L]=b.useState(!1),{mine:q,activeCasesCount:C,buckets:W,filteredReports:G}=b.useMemo(()=>{const $=t.filter(ee=>!ee.deletedAt),oe=$.filter(ee=>ee.createdBy===e.id),N=h?oe:$,F=f==="ALL"?N:N.filter(ee=>ee.status===f),Y=(()=>{const ee=j.trim().toLowerCase();return ee?F.filter(ge=>[ge.odakanitNo,ge.insuredName,ge.plaintiffName,ge.insurerName,ge.marketRef].filter(Boolean).join(" ").toLowerCase().includes(ee)):F})(),O=V?Y.filter(ee=>Dx(ee)||!!nm(ee)):Y,K={ACTION_REQUIRED:[],WAITING_ON_OTHERS:[],IN_PROGRESS:[],SENT_COMPLETED:[]};O.forEach(ee=>{const ge=zx(ee.status);K[ge].push(ee)});const ne=new Set;return N.forEach(ee=>{(ee.status!=="SENT"||ee.sentAt&&Z-new Date(ee.sentAt).getTime()<D)&&ne.add(An(ee))}),{mine:oe,activeCasesCount:ne.size,buckets:K,filteredReports:O}},[t,e.id,j,f,h,V,Z,D]),fe=W.ACTION_REQUIRED.length,le=W.WAITING_ON_OTHERS.length,be=G.filter($=>$.status==="DRAFT"||$.status==="READY_TO_SEND").length,Pe=G.filter($=>$.status==="DRAFT").length,gt=b.useMemo(()=>new Set(se),[se]),je=$=>{v($.id)},yt=$=>{const oe=A===$?null:$;switch(I(oe),oe){case"ACTION":m("TASK_ASSIGNED");break;case"WAITING":m("READY_TO_SEND");break;case"DRAFTS":m("DRAFT");break;case"ACTIVE":m("ALL");break;default:m("ALL");break}},Be=f!=="ALL"||!!j.trim()||!h,Yt=()=>{z(""),m("ALL"),E(!0),I(null)},vt=$=>{H($)},ct=$=>{te(oe=>{const N=new Set(oe);N.has($)?N.delete($):N.add($);const F=Array.from(N);if(typeof window<"u")try{window.localStorage.setItem(dl(e.id),JSON.stringify(F))}catch{}return F})},on=$=>{if(X($),typeof window<"u")try{window.localStorage.setItem(Nu(e.id),$)}catch{}},Je=$=>_x($,t),ut=$=>{R&&window.confirm(P("deleteDraftConfirm"))&&R($.id)},Qt=$=>[...$].sort((N,F)=>{const Y=An(N),O=An(F),K=gt.has(Y),ne=gt.has(O);if(K!==ne)return K?-1:1;const ee=Ne=>{const ve=Ne.updatedAt||Ne.reportDate;return ve&&new Date(ve).getTime()||0},ge=Ne=>Ne.reportDate&&new Date(Ne.reportDate).getTime()||0;if(B==="INSURED"){const Ne=He=>(He.insuredName||He.plaintiffName||"").toLowerCase(),ve=Ne(N),Ee=Ne(F);return ve<Ee?-1:ve>Ee?1:0}const Me=B==="REPORT_DATE"?ge(N):ee(N);return(B==="REPORT_DATE"?ge(F):ee(F))-Me});b.useEffect(()=>{if(!l)return;const $=oe=>{oe.key==="Escape"&&i(!1)};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[l,i]),b.useEffect(()=>{if(typeof window>"u"||!t.length)return;const $=wu(e.id);if(window.localStorage.getItem($)!=="1")try{const N=window.localStorage.getItem(dl(e.id));if(!N){window.localStorage.setItem($,"1");return}const F=JSON.parse(N);if(!Array.isArray(F)){window.localStorage.setItem($,"1");return}const Y=[],O=K=>{K&&(Y.includes(K)||Y.push(K))};F.forEach(K=>{if(typeof K!="string")return;const ne=K.trim();if(!ne)return;const ee=ne.toLowerCase();if(ee.startsWith("odakanit:")||ee.startsWith("umr:")||ee.startsWith("line:")||ee.startsWith("cert:")||ee.startsWith("insured:")||ee.startsWith("plaintiff:")||ee.startsWith("id:")){O(ne);return}const Me=t.find(ye=>An(ye)===ne?!0:ye.id===ne||ye.odakanitNo&&ye.odakanitNo===ne||ye.marketRef&&ye.marketRef===ne);O(Me?An(Me):`odakanit:${ne}`)}),te(Y),window.localStorage.setItem(dl(e.id),JSON.stringify(Y)),window.localStorage.setItem($,"1")}catch{window.localStorage.setItem(wu(e.id),"1")}},[t,e.id]);const rt=b.useMemo(()=>{if(!q.length)return null;if(typeof window<"u")try{const oe=window.localStorage.getItem(Wx),N=oe?q.find(F=>F.id===oe&&!F.deletedAt):null;if(N)return N}catch{}return[...q].sort((oe,N)=>{const F=K=>{const ne=K.updatedAt||K.reportDate;return ne&&new Date(ne).getTime()||0},Y=F(oe);return F(N)-Y})[0]||null},[q]),Gn=()=>s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>i(!l),className:"relative inline-flex h-9 w-9 items-center justify-center rounded-full bg-blue-50 text-xs font-medium text-blue-700 hover:bg-blue-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":P("openNotificationsAria"),title:P("openNotificationsTitle"),children:[s.jsx(Ql,{className:"h-4 w-4","aria-hidden":"true"}),r.length>0&&s.jsx("span",{className:"absolute -top-1.5 -right-1.5 inline-flex h-4 min-w-[16px] items-center justify-center rounded-full bg-red-500 px-1 text-[10px] font-bold text-white",children:r.length})]}),l&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 rounded-lg border border-gray-200 bg-white text-xs shadow-xl z-50",children:[s.jsxs("div",{className:"flex items-center justify-between border-b px-3 py-2",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:P("notificationTitle")}),s.jsxs("label",{className:"flex items-center gap-1 text-[11px] text-gray-500",children:[s.jsx("input",{type:"checkbox",checked:o,onChange:$=>c($.target.checked),className:"h-3 w-3 rounded border-gray-300 text-lpBlue focus:ring-lpBlue"}),P("dailySummary")]})]}),s.jsxs("div",{className:"max-h-64 overflow-auto divide-y",children:[r.length===0&&s.jsx("div",{className:"p-4 text-center text-gray-400",children:P("noNotifications")}),r.map($=>s.jsxs("div",{className:"p-3",children:[s.jsx("p",{className:"font-medium text-gray-800",children:$.message}),s.jsx("p",{className:"text-[10px] text-gray-400",children:new Date($.createdAt).toLocaleString()})]},$.id))]}),s.jsx("div",{className:"px-3 py-2 text-right",children:s.jsx("button",{type:"button",onClick:a,className:"text-[11px] font-medium text-red-500 hover:underline",children:P("clearAll")})})]})]}),[st,cn]=b.useState(""),[Nt,qe]=b.useState(!1),[dt,Ge]=b.useState(-1),We=b.useMemo(()=>{const $=st.trim();if(!$)return[];const oe=$.toLowerCase(),N=Object.values(n),F=N.filter(K=>K.odakanitNo.toLowerCase().startsWith(oe)),Y=N.filter(K=>!K.odakanitNo.toLowerCase().startsWith(oe)&&K.odakanitNo.toLowerCase().includes(oe));return[...F,...Y].slice(0,8).map(K=>({odakanitNo:K.odakanitNo,insuredName:K.insuredName,plaintiffName:K.plaintiffName}))},[st,n]);b.useEffect(()=>{if(!st.trim()){qe(!1),Ge(-1);return}We.length>0?(qe(!0),Ge(0)):(qe(!1),Ge(-1))},[st,We.length]);const wt=$=>{cn($),qe(!1),Ge(-1),y($)};return s.jsx("div",{className:"min-h-screen bg-gray-100 px-0 pb-6",dir:"rtl",lang:"he",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4",children:[s.jsxs("header",{className:"sticky top-0 z-20 mb-4 flex flex-col gap-3 border-b border-gray-200 bg-white/80 pb-3 pt-2 backdrop-blur-sm md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-lpBlue font-heebo",children:P("dashboardTitle")}),s.jsxs("p",{className:"text-sm text-gray-600 text-right",children:[s.jsx("span",{className:"font-semibold",children:Bx})," ",s.jsx("span",{className:"text-gray-500",children:$x}),s.jsx("span",{className:"text-gray-400",children:"  "}),P("welcomeBack"),","," ",s.jsx("span",{className:"font-semibold",children:e.name})," ",s.jsxs("span",{className:"text-gray-500",children:["(",P("roleLawyer"),")"]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2 md:justify-end",children:[s.jsx("button",{type:"button",onClick:g,className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-lpBlue text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":P("openNewCaseFolderAria"),title:P("openNewCaseFolderTitle"),children:s.jsx(Vo,{className:"h-4 w-4","aria-hidden":"true"})}),Gn(),s.jsx("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-blue-50 text-xs font-medium text-blue-700 hover:bg-blue-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",onClick:()=>{const $=new CustomEvent("openUserGuide");window.dispatchEvent($)},"aria-label":P("openHelpCenterAria"),title:P("openHelpCenterTitle"),children:s.jsx(Wo,{className:"h-4 w-4","aria-hidden":"true"})}),s.jsx("button",{type:"button",onClick:T,className:"inline-flex h-9 w-9 items-center justify-center rounded-full text-xs font-semibold text-red-600 hover:bg-red-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2","aria-label":P("logoutAria"),title:P("logoutTitle"),children:s.jsx(Gf,{className:"h-4 w-4","aria-hidden":"true"})})]})]}),q.length===0&&s.jsxs("section",{className:"mb-4 rounded-2xl border border-dashed border-gray-300 bg-white px-4 py-4 text-sm text-gray-700 shadow-sm text-right",children:[s.jsx("h2",{className:"mb-1 text-sm font-semibold text-gray-900",children:P("gettingStartedTitle")}),s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[P("gettingStartedBodyLine1"),s.jsx("br",{}),P("gettingStartedBodyLine2")]}),s.jsxs("ul",{className:"mb-3 mr-4 list-disc text-xs text-gray-600",children:[s.jsx("li",{children:P("gettingStartedStep1")}),s.jsx("li",{children:P("gettingStartedStep2")}),s.jsx("li",{children:P("gettingStartedStep3")})]}),s.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center rounded-full bg-lpBlue px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":P("gettingStartedCta"),children:P("gettingStartedCta")})]}),s.jsxs("section",{className:"mb-3 rounded-2xl border border-gray-200 bg-white px-4 py-3 text-xs text-gray-700 shadow-sm",children:[s.jsx("h2",{className:"mb-1 text-sm font-semibold text-gray-900",children:P("workloadTitle")}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[11px] text-gray-700",children:[s.jsxs("span",{children:[fe," ",P("workloadActionLabel")]}),s.jsxs("span",{children:[le," ",P("workloadWaitingLabel")]}),s.jsxs("span",{children:[Pe," ",P("workloadDraftLabel")]})]})]}),s.jsx("section",{className:"mb-3 flex flex-col gap-2 rounded-2xl border border-gray-200 bg-white px-4 py-3 shadow-sm md:flex-row md:items-center md:justify-between",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx("label",{htmlFor:"case-folder-search",className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:P("searchByOdakanit")}),s.jsx("input",{id:"case-folder-search",type:"text",className:"mt-1 w-full rounded-full border border-gray-300 px-3 py-1.5 text-xs text-gray-900 placeholder:text-gray-400 focus:border-lpBlue focus:outline-none focus:ring-1 focus:ring-lpBlue",placeholder:P("searchOdakanitPlaceholder"),value:st,onChange:$=>{cn($.target.value)},onFocus:()=>{We.length>0&&qe(!0)},onKeyDown:$=>{if(!Nt&&$.key==="ArrowDown"&&We.length>0){qe(!0),Ge(0);return}if(!Nt){if($.key==="Enter"){const oe=st.trim();oe&&n[oe]&&wt(oe)}$.key==="Escape"&&qe(!1);return}if($.key==="ArrowDown")$.preventDefault(),Ge(oe=>{const N=oe+1;return N>=We.length?We.length-1:N});else if($.key==="ArrowUp")$.preventDefault(),Ge(oe=>{const N=oe-1;return N<0?0:N});else if($.key==="Enter"){$.preventDefault();const oe=dt>=0?dt:0,N=We[oe];N&&wt(N.odakanitNo)}else $.key==="Escape"&&($.preventDefault(),qe(!1),Ge(-1))},role:"combobox","aria-autocomplete":"list","aria-expanded":Nt,"aria-controls":"case-folder-search-listbox"}),Nt&&We.length>0&&s.jsx("ul",{id:"case-folder-search-listbox",role:"listbox",className:"absolute z-20 mt-1 max-h-56 w-full overflow-y-auto rounded-2xl border border-gray-200 bg-white py-1 text-xs shadow-lg",children:We.map(($,oe)=>s.jsxs("li",{role:"option","aria-selected":oe===dt,className:`cursor-pointer px-3 py-2 flex flex-col gap-0.5 ${oe===dt?"bg-blue-50 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,onMouseDown:N=>{N.preventDefault()},onClick:()=>wt($.odakanitNo),children:[s.jsx("span",{className:"font-semibold text-[11px] text-gray-900",children:$.odakanitNo}),s.jsxs("span",{className:"text-[11px] text-gray-600",children:[$.insuredName||"",$.plaintiffName?`  ${$.plaintiffName}`:""]})]},$.odakanitNo))}),st.trim()&&!Nt&&We.length===0&&s.jsx("p",{className:"mt-1 text-[11px] text-red-500",children:P("noCaseFolderFound")})]})}),rt&&s.jsx("section",{className:"mb-3 rounded-2xl border border-blue-100 bg-blue-50/60 px-4 py-3 text-xs text-gray-800 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"text-right flex-1",children:[s.jsx("p",{className:"font-semibold text-lpBlue text-sm",children:P("resumeLastCase")}),s.jsxs("p",{className:"text-[11px] text-gray-600",children:[rt.insuredName||rt.plaintiffName||""," ",rt.odakanitNo?` ${P("internalFile")}: ${rt.odakanitNo}`:""]})]}),s.jsx("button",{type:"button",onClick:()=>je(rt),className:"inline-flex items-center rounded-full bg-lpBlue px-3 py-1.5 text-[11px] font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":P("resumeLastCase"),children:P("resumeLabel")})]})}),s.jsx(Ex,{activeCases:C,actionRequired:fe,waitingOnOthers:le,draftsAndReady:be,selectedFilter:A,onChangeFilter:yt}),s.jsx(Cx,{searchQuery:j,onSearchQueryChange:z,statusFilter:f,onStatusFilterChange:m,onlyMyCases:h,onOnlyMyCasesChange:E,sortBy:B,onSortByChange:vt,hasActiveFilter:Be,onClearFilters:Be?Yt:void 0}),s.jsxs("div",{className:"mb-3 flex items-center justify-start gap-3 text-[11px] text-gray-600",children:[s.jsx("span",{className:"text-gray-500",children:P("densityLabel")}),s.jsx("button",{type:"button",onClick:()=>on("COMFORTABLE"),className:`rounded-full px-3 py-1 text-[11px] font-semibold focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2 ${w==="COMFORTABLE"?"bg-gray-200 text-gray-900":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,"aria-pressed":w==="COMFORTABLE",children:P("densityComfortable")}),s.jsx("button",{type:"button",onClick:()=>on("COMPACT"),className:`rounded-full px-3 py-1 text-[11px] font-semibold focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2 ${w==="COMPACT"?"bg-gray-200 text-gray-900":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,"aria-pressed":w==="COMPACT",children:P("densityCompact")}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px] text-gray-700",children:[s.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 rounded border-gray-300 text-lpBlue focus:ring-lpBlue",checked:V,onChange:$=>L($.target.checked)}),s.jsx("span",{children:P("focusModeLabel")})]})]}),s.jsxs("main",{className:"space-y-4","aria-label":P("workQueuesAria"),children:[s.jsx(ul,{id:"action-required",title:P("bucketActionRequiredTitle"),description:P("bucketActionRequiredDescription"),reports:Qt(W.ACTION_REQUIRED),emptyTitle:P("emptyActionRequiredTitle"),emptyDescription:P("emptyActionRequiredDesc"),pinnedIds:se,onTogglePin:ct,density:w,onOpenReport:je,onDeleteReport:ut,isNewCase:Je}),s.jsx(ul,{id:"waiting-others",title:P("bucketWaitingTitle"),description:P("bucketWaitingDescription"),reports:Qt(W.WAITING_ON_OTHERS),emptyTitle:P("emptyWaitingTitle"),emptyDescription:P("emptyWaitingDesc"),pinnedIds:se,onTogglePin:ct,density:w,onOpenReport:je,onDeleteReport:ut,isNewCase:Je}),s.jsx(ul,{id:"in-progress",title:P("bucketInProgressTitle"),description:P("bucketInProgressDescription"),reports:Qt(W.IN_PROGRESS),emptyTitle:P("emptyInProgressTitle"),emptyDescription:P("emptyInProgressDesc"),emptyActionLabel:P("emptyInProgressCta"),onEmptyAction:g,pinnedIds:se,onTogglePin:ct,density:w,onOpenReport:je,onDeleteReport:ut,isNewCase:Je}),s.jsx(ul,{id:"sent-completed",title:P("bucketSentTitle"),description:P("bucketSentDescription"),reports:Qt(W.SENT_COMPLETED),defaultCollapsed:!0,emptyTitle:P("emptySentTitle"),emptyDescription:P("emptySentDesc"),pinnedIds:se,onTogglePin:ct,density:w,onOpenReport:je,onDeleteReport:ut,isNewCase:Je})]}),s.jsxs("footer",{className:"mt-6 text-[11px] text-gray-400 flex items-center gap-2 justify-start",children:[s.jsx(nn,{className:"h-3 w-3","aria-hidden":"true"}),s.jsxs("span",{children:[P("footerArchiveNote")," ",D/(1e3*60*60)," ","."]})]})]})})},Ux=({folder:e,reports:t,onBack:n,onUpdateReTemplate:r,onCreateReportInCase:l,onOpenReport:i})=>{const[a,o]=b.useState(e.reTemplate||""),c=()=>{const g=a.trim();g!==e.reTemplate&&r(g)},p=t.filter(g=>g.odakanitNo&&g.odakanitNo.trim()===e.odakanitNo),v=b.useMemo(()=>{const g=[],y=(T,R,j)=>{if(!T)return;const z=new Date(T).getTime();if(!Number.isFinite(z))return;const f=new Date(T).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});g.push({date:f,sortKey:z,icon:R,label:j})};return p.forEach(T=>{y(T.reportDate,""," ")}),e.sentReports.forEach(T=>{y(T.sentAt,""," ")}),g.sort((T,R)=>T.sortKey-R.sortKey)},[p,e.sentReports]);return s.jsx("div",{className:"min-h-screen bg-gray-100 px-0 pb-8",children:s.jsxs("div",{className:"mx-auto max-w-4xl px-4 pt-4",children:[s.jsx("button",{type:"button",onClick:n,className:"mb-4 inline-flex items-center rounded-full bg-white px-3 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:" Back to dashboard"}),s.jsxs("header",{className:"mb-4 rounded-2xl bg-white px-5 py-4 shadow-sm border border-gray-200",children:[s.jsxs("h1",{className:"text-xl font-serif font-bold text-lpBlue",children:["Case Folder  ",e.odakanitNo]}),s.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Central view for all reports and metadata in this case."})]}),s.jsxs("section",{className:"mb-4 grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl bg-white p-4 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Case Metadata"}),s.jsxs("dl",{className:"space-y-1 text-xs text-gray-700",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Insured"}),s.jsx("dd",{children:e.insuredName||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Plaintiff"}),s.jsx("dd",{children:e.plaintiffName||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Insurer"}),s.jsx("dd",{children:e.insurerName||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"UMR / Market Ref"}),s.jsx("dd",{children:e.marketRef||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Line Slip"}),s.jsx("dd",{children:e.lineSlipNo||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Certificate Ref"}),s.jsx("dd",{children:e.certificateRef||""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-semibold text-gray-600",children:"Reports in case"}),s.jsx("dd",{children:e.reportIds.length})]})]})]}),s.jsxs("div",{className:"rounded-2xl bg-white p-4 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"RE Template"}),s.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 p-2 text-xs text-gray-900 placeholder:text-gray-400 focus:border-lpBlue focus:outline-none focus:ring-1 focus:ring-lpBlue",rows:4,value:a,onChange:g=>o(g.target.value),onBlur:c,placeholder:"e.g. John Doe v. XYZ Medical Center  Claim Update"}),s.jsx("p",{className:"mt-1 text-[11px] text-gray-500",children:"This subject line will be used as the default RE for new reports in this case."})]})]}),s.jsxs("section",{className:"mb-4 rounded-2xl bg-white p-4 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Timeline"}),v.length===0?s.jsx("p",{className:"text-xs text-gray-400",children:"No activity recorded for this case yet."}):s.jsx("ol",{className:"border-r border-gray-200 pr-3 text-xs text-gray-700 space-y-2",children:v.map((g,y)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"ml-1",children:g.icon}),s.jsxs("span",{children:[g.date,"  ",g.label]})]},`${g.sortKey}-${y}`))})]}),s.jsxs("section",{className:"mb-4 rounded-2xl bg-white p-4 shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Previously sent reports"}),s.jsx("p",{className:"text-xs text-gray-500",children:"History of reports that were marked as SENT in this case."})]}),s.jsx("button",{type:"button",onClick:l,className:"inline-flex items-center rounded-full bg-lpBlue px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:"Create new report in this case"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-xs text-left text-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 text-[11px] uppercase tracking-wide text-gray-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"Report #"}),s.jsx("th",{className:"px-3 py-2",children:"Sent at"}),s.jsx("th",{className:"px-3 py-2",children:"File name"}),s.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.sentReports.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-gray-400",children:"No sent reports recorded for this case yet."})}),e.sentReports.map(g=>{const y=g.sentAt?new Date(g.sentAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"";return s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:g.reportNo?`#${g.reportNo}`:""}),s.jsx("td",{className:"px-3 py-2",children:y}),s.jsx("td",{className:"px-3 py-2",children:g.fileName||""}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{type:"button",onClick:()=>i(g.reportId),className:"inline-flex items-center rounded-full bg-white px-3 py-1 text-[11px] font-semibold text-lpBlue ring-1 ring-lpBlue hover:bg-blue-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2","aria-label":`Open report ${g.reportId}`,children:"Open"})})]},`${g.reportId}-${g.sentAt}`)})]})]})})]}),s.jsxs("section",{className:"rounded-2xl bg-white p-4 shadow-sm border border-gray-200",children:[s.jsx("h2",{className:"mb-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"All reports in this case"}),s.jsxs("ul",{className:"space-y-1 text-xs text-gray-700",children:[p.length===0&&s.jsx("li",{className:"text-gray-400",children:"No reports are currently linked to this case."}),p.map(g=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsxs("span",{children:[g.reportDate?new Date(g.reportDate).toLocaleDateString("en-GB"):""," "," ",g.status," "," ",g.reportSubject||"No subject"]}),s.jsx("button",{type:"button",onClick:()=>i(g.id),className:"inline-flex items-center rounded-full bg-gray-100 px-3 py-0.5 text-[11px] font-semibold text-gray-700 hover:bg-gray-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:"Open"})]},g.id))]})]})]})})},rm="lp_case_folders",sm="lp_case_folders_migrated",Vx=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(rm),t=e?JSON.parse(e):{};return!t||typeof t!="object"?{}:t}catch(e){return console.error("Failed to load case folders",e),{}}},rs=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(rm,JSON.stringify(e))}catch(t){console.error("Failed to persist case folders",t)}},Wa=(e,t,n)=>{if(!t.odakanitNo)return e;const r=t.odakanitNo.trim();if(!r)return e;const l=n||new Date().toISOString(),i=e[r],a=i||{odakanitNo:r,reTemplate:"",insuredName:"",insurerName:"",plaintiffName:"",marketRef:"",lineSlipNo:"",certificateRef:"",createdAt:(i==null?void 0:i.createdAt)||l,updatedAt:(i==null?void 0:i.updatedAt)||l,reportIds:[],sentReports:(i==null?void 0:i.sentReports)||[]},o={...a,insuredName:t.insuredName||a.insuredName,insurerName:t.insurerName||a.insurerName,plaintiffName:t.plaintiffName||a.plaintiffName,marketRef:t.marketRef||a.marketRef,lineSlipNo:t.lineSlipNo||a.lineSlipNo,certificateRef:t.certificateRef||a.certificateRef,updatedAt:l,reportIds:a.reportIds.includes(t.id)?a.reportIds:[...a.reportIds,t.id],sentReports:a.sentReports},c=(t.reportSubject||"").trim();return c&&(!a.reTemplate||c!==a.reTemplate)&&(o.reTemplate=c),{...e,[r]:o}},lm=(e,t,n,r,l)=>{var y;if(!t.odakanitNo)return e;const i=t.odakanitNo.trim();if(!i)return e;const a=n||new Date().toISOString(),o=e[i];if(!o)return e;const c=(((y=t.reportHistory)==null?void 0:y.length)||0)+1,p={id:t.id,odakanitNo:t.odakanitNo,insuredName:t.insuredName,plaintiffName:t.plaintiffName,insurerName:t.insurerName,marketRef:t.marketRef,lineSlipNo:t.lineSlipNo,certificateRef:t.certificateRef,reportDate:t.reportDate,status:"SENT",reportSubject:t.reportSubject},v={reportId:t.id,sentAt:a,reportNo:c,fileName:r,snapshot:p,isResend:!!l,resendIndex:c},g={...o,updatedAt:a,sentReports:[...o.sentReports,v]};return{...e,[i]:g}},Gx=(e,t)=>{let n={...e};return t.forEach(r=>{if(r.odakanitNo&&(n=Wa(n,r,r.updatedAt||r.reportDate),r.status==="SENT")){const l=r.sentAt||r.reportDate||new Date().toISOString();n=lm(n,r,l)}}),n},Kx=()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(sm,"1")}catch{}},Yx=()=>{if(typeof window>"u")return!0;try{return window.localStorage.getItem(sm)==="1"}catch{return!0}},Xo={[xn]:"Statement of Claim",[Vr]:"Letter of Demand",[Go]:"Statement of Claim Expert Opinion",[Ko]:"Letter of Demand Expert Opinion","The plaintiff's expert opinion":"Plaintiff Expert Opinion","The claimant's expert opinion":"Claimant Expert Opinion","The insured's expert opinion":"Insured Expert Opinion","Insurance Coverage":"Insurance Coverage","Risk Assessment":"Risk Assessment",MPL:"MPL",Strategy:"Strategy","Expenses breakdown":"Expenses Breakdown","Expenses & Compensation breakdown":"Expenses & Compensation",Recommendations:"Recommendations","Strategy & Recommendations":"Strategy & Recommendations","Request for Approval of a Settlement Agreement":"Settlement Approval",Update:"Update"};Jf.forEach(e=>{Xo[e]="Statement of Claim"});qf.forEach(e=>{Xo[e]="Letter of Demand"});const Qx=e=>(Xo[e]||e||"").trim(),im=e=>e.map(Qx).filter(Boolean),am=e=>{const t=new Set;return e.map(n=>n.trim()).filter(n=>{if(!n)return!1;const r=n.toLowerCase();return t.has(r)?!1:(t.add(r),!0)})},Xx=/[\\/:*?"<>|]/g,Ui=e=>(e||"").trim(),Jx=e=>{const t=(e.filenameTag||"").toLowerCase(),n=(e.plaintiffTitle||"").toLowerCase();return t.includes("demand")||n==="claimant"},qx=e=>{var t;return(((t=e.reportHistory)==null?void 0:t.length)||0)+1},fl=e=>{const t=Ui(e.insurerName),n=Ui(e.insuredName),r=Ui(e.plaintiffName),l=qx(e);let i=[];if(l===1)i=[Jx(e)?"New Letter of demand":"New Lawsuit"];else{const p=am(im(e.selectedSections||[])),v=Array.isArray(e.fileNameTitles)?e.fileNameTitles.map(g=>g.trim()).filter(Boolean):[];i=v.length?v:p,i.length||(i=["Update"])}const a=i.join(" & ");let c=[t||void 0,n||void 0,r||void 0,a||void 0,`Report ${l}`].filter(Boolean).join(" - ");return c=c.replace(Xx," ").replace(/\s+/g," ").replace(/-+/g,"-").trim(),c||(c=`Report-${Date.now()}`),`${c}.pdf`},Zx=async e=>{if(!e||!e.trim())return"";try{const t=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok)throw new Error(`Server error: ${t.statusText}`);return(await t.json()).translation||""}catch(t){return console.error("Translation error:",t),"Error translation."}},eg=async(e,t)=>{try{const n=await fetch("/api/extract-policy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e,mimeType:t})});if(!n.ok)throw new Error("Server error");return await n.json()}catch(n){return console.error(n),{}}},tg=async e=>{try{const t=await fetch("/api/refine-text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok)throw new Error("Refinement failed");return(await t.json()).refined||e}catch(t){return console.error(t),e}},ng=async(e,t,n="CLAIM",r)=>{try{const l=await fetch("/api/analyze-medical-complaint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileBase64:e,mimeType:t,analysisType:n,expertCountMode:r==null?void 0:r.expertCountMode,partyRole:r==null?void 0:r.partyRole,sectionKey:r==null?void 0:r.sectionKey,plaintiffName:r==null?void 0:r.plaintiffName,insuredName:r==null?void 0:r.insuredName,insurerName:r==null?void 0:r.insurerName,reportSubject:r==null?void 0:r.reportSubject})});if(!l.ok)throw new Error("Medical analysis failed");return await l.json()}catch(l){throw console.error("Medical complaint analysis error:",l),l}},rg=async(e,t)=>{try{const n=await fetch("/api/extract-expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileBase64:e,mimeType:t})});if(!n.ok)throw new Error("Expenses extraction failed");return await n.json()}catch(n){return console.error(n),{items:[]}}},sg=async e=>{try{const t=await fetch("/api/help-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})});if(!t.ok)throw new Error("Chat failed");return(await t.json()).answer||"Sorry, I could not answer that."}catch(t){return console.error(t),"System error. Please try again."}},Su=async e=>{try{if(!(await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Email failed");return!0}catch(t){return console.error(t),!1}},Vi=async e=>{try{const t=await fetch("/api/render-report-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report:e})});if(!t.ok)throw new Error("PDF rendering failed");return await t.blob()}catch(t){throw console.error("PDF render error:",t),t}},lg={title:"Final Preview",toggleHide:"Hide Preview",toggleShow:"Show Preview",downloadPdf:"Download PDF",editFileNames:"Edit file name titles",finalize:"Finalize & Close",backToEditing:"Back to Editing",backToStep2:"Back to Step 2",backToDashboard:"Back to dashboard",helperScroll:"Scroll to review entire document",collapsedHint:'Click "Show Preview" to review the document before sending.'},ig={title:" ",toggleHide:" ",toggleShow:" ",downloadPdf:" PDF",editFileNames:"  ",finalize:" ",backToEditing:" ",backToStep2:"  2",backToDashboard:"  ",helperScroll:"    ",collapsedHint:'  " "     .'},ag=e=>e==="LAWYER"?ig:lg,og=({message:e,type:t,onClose:n})=>s.jsxs("div",{className:`fixed top-4 right-4 z-[100] p-4 rounded-lg shadow-xl border-l-4 flex items-center gap-3 animate-slide-in bg-white ${t==="success"?"border-green-500 text-green-800":t==="error"?"border-red-500 text-red-800":"border-blue-500 text-blue-800"}`,children:[s.jsx("span",{children:e}),s.jsx("button",{onClick:n,className:"hover:bg-gray-100 p-1 rounded",children:s.jsx(kt,{className:"w-4 h-4"})})]}),bu=({value:e,onChange:t,placeholder:n,disabled:r,dir:l="ltr",className:i,style:a={}})=>{const o=b.useRef(null);return b.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[e]),s.jsx(Ls,{clientId:Os,children:s.jsx("textarea",{ref:o,className:i,dir:l,value:e,onChange:t,placeholder:n,disabled:r,rows:3,style:{...a,overflow:"hidden",resize:"none"}})})},cg=({onClose:e})=>{const[t,n]=b.useState("MANUAL"),[r,l]=b.useState(""),[i,a]=b.useState([]),[o,c]=b.useState(!1),p=async()=>{if(!r.trim())return;c(!0);const v=await sg(r);a(g=>[...g,{q:r,a:v}]),l(""),c(!1)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[200] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-3xl h-[600px] rounded-xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",children:[s.jsxs("div",{className:"bg-lpBlue p-4 text-white flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wo,{className:"w-6 h-6"}),s.jsx("h2",{className:"font-bold text-lg",children:"  "})]}),s.jsx("button",{onClick:e,className:"hover:bg-white/20 rounded p-1",children:s.jsx(kt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex border-b",children:[s.jsx("button",{onClick:()=>n("MANUAL"),className:`flex-1 p-3 font-bold ${t==="MANUAL"?"text-lpBlue border-b-2 border-lpBlue":"text-gray-500"}`,children:" "}),s.jsx("button",{onClick:()=>n("CHAT"),className:`flex-1 p-3 font-bold ${t==="CHAT"?"text-lpBlue border-b-2 border-lpBlue":"text-gray-500"}`,children:"   "})]}),s.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gray-50",dir:"rtl",children:t==="MANUAL"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("details",{className:"bg-white p-4 rounded shadow-sm group",children:[s.jsxs("summary",{className:"font-bold text-gray-800 cursor-pointer list-none flex justify-between",children:["   ",s.jsx(Ut,{className:"group-open:rotate-90 transition"})]}),s.jsxs("div",{className:"mt-2 text-gray-600 text-sm space-y-1",children:[s.jsx("p",{children:"1.       (CRM / Finance /    )."}),s.jsx("p",{children:"2.       +  Notifications   ."}),s.jsx("p",{children:`3.  ""     ' .`})]})]}),s.jsxs("details",{className:"bg-white p-4 rounded shadow-sm group",children:[s.jsxs("summary",{className:"font-bold text-gray-800 cursor-pointer list-none flex justify-between",children:['    " ',s.jsx(Ut,{className:"group-open:rotate-90 transition"})]}),s.jsxs("div",{className:"mt-2 text-gray-600 text-sm space-y-1",children:[s.jsxs("p",{children:["1.   ",s.jsx("strong",{children:"Open New Case Folder"}),",      ."]}),s.jsx("p",{children:"2.  ,   4  (Word/PDF)    ."}),s.jsx("p",{children:"3.   FINANCE FINALIZE     ."})]})]}),s.jsxs("details",{className:"bg-white p-4 rounded shadow-sm group",children:[s.jsxs("summary",{className:"font-bold text-gray-800 cursor-pointer list-none flex justify-between",children:["   ",s.jsx(Ut,{className:"group-open:rotate-90 transition"})]}),s.jsxs("div",{className:"mt-2 text-gray-600 text-sm space-y-1",children:[s.jsx("p",{children:'   View Worksheet  , ,   " .'}),s.jsx("p",{children:" /     ( ADD),    ."}),s.jsx("p",{children:'  ,      "     Expenses.'})]})]}),s.jsxs("details",{className:"bg-white p-4 rounded shadow-sm group",children:[s.jsxs("summary",{className:"font-bold text-gray-800 cursor-pointer list-none flex justify-between",children:["    ",s.jsx(Ut,{className:"group-open:rotate-90 transition"})]}),s.jsxs("div",{className:"mt-2 text-gray-600 text-sm space-y-1",children:[s.jsx("p",{children:"  Manage Favorite Providers     ."}),s.jsx("p",{children:"        ."}),s.jsx("p",{children:'    4   (PDF/Word)  "    .'})]})]}),s.jsxs("details",{className:"bg-white p-4 rounded shadow-sm group",children:[s.jsxs("summary",{className:"font-bold text-gray-800 cursor-pointer list-none flex justify-between",children:[' "     ',s.jsx(Ut,{className:"group-open:rotate-90 transition"})]}),s.jsxs("div",{className:"mt-2 text-gray-600 text-sm space-y-1",children:[s.jsx("p",{children:"       -FINANCE   FINALIZE."}),s.jsx("p",{children:' FINALIZE  "     (READY TO SEND)   .'}),s.jsx("p",{children:"     (48   , 30   )     ."})]})]})]}):s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex-1 space-y-4 mb-4 overflow-auto",children:[i.length===0&&s.jsx("div",{className:"text-center text-gray-400 mt-10",children:"     !"}),i.map((v,g)=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"bg-blue-100 text-blue-900 p-2 rounded-lg rounded-tr-none self-end w-fit ml-auto max-w-[80%]",children:v.q}),s.jsx("div",{className:"bg-white border text-gray-800 p-2 rounded-lg rounded-tl-none self-start w-fit mr-auto max-w-[80%]",children:v.a})]},g))]}),s.jsxs("div",{className:"flex gap-2",dir:"ltr",children:[s.jsx("input",{className:"flex-1 border p-2 rounded",placeholder:"/   ...",value:r,onChange:v=>l(v.target.value),onKeyDown:v=>v.key==="Enter"&&p()}),s.jsx("button",{onClick:p,disabled:o,className:"bg-lpBlue text-white px-4 rounded hover:bg-blue-800",children:o?s.jsx(rn,{className:"w-5 h-5 animate-spin"}):s.jsx(Jl,{className:"w-5 h-5"})})]})]})})]})})},ug=({reports:e,currentUser:t,onMarkPaid:n})=>{const r=e.filter(a=>a.expensesSum&&!a.isPaid),l=r.reduce((a,o)=>{var p;const c=parseFloat(((p=o.expensesSum)==null?void 0:p.replace(/,/g,""))||"0");return a+(isNaN(c)?0:c)},0),i=t.role==="SUB_ADMIN";return r.length?s.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm border border-indigo-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 p-4 text-white flex justify-between items-center",children:[s.jsxs("h3",{className:"font-bold text-lg flex items-center",children:[s.jsx(ex,{className:"w-6 h-6 mr-2"})," Financial Control - Outstanding Expenses"]}),s.jsxs("div",{className:"text-xl font-bold bg-white/20 px-4 py-1 rounded",children:["Total: ",l.toLocaleString()]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-indigo-50 text-indigo-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3",children:"Report Date"}),s.jsx("th",{className:"p-3",children:"Insured / File"}),s.jsx("th",{className:"p-3",children:"Amount Requested"}),s.jsx("th",{className:"p-3",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:r.map(a=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"p-3",children:new Date(a.reportDate).toLocaleDateString()}),s.jsxs("td",{className:"p-3 font-medium",children:[a.insuredName," (",a.marketRef,")"]}),s.jsxs("td",{className:"p-3 font-bold text-indigo-700",children:["",a.expensesSum]}),s.jsx("td",{className:"p-3",children:i?s.jsx("button",{onClick:()=>n(a.id),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-1.5 rounded transition",title:"Mark as Paid",children:s.jsx(nn,{className:"w-4 h-4"})}):s.jsx("span",{className:"text-gray-400 cursor-not-allowed",children:s.jsx(nn,{className:"w-4 h-4"})})})]},a.id))})]})})]}):null},dg=[{id:"statement_of_claim",name:"Statement of Claim",src:new URL("/assets/statement%20of%20claim-BbEIHM0L.jpg",import.meta.url).href},{id:"statement_of_defence",name:"Statement of Defence",src:new URL("/assets/statement%20of%20defence-BIigMwUC.jpg",import.meta.url).href},{id:"preliminary",name:"Preliminary Proceedings",src:new URL("/assets/preliminary%20proceedings-BoY9iCcP.jpg",import.meta.url).href},{id:"evidence_submission",name:"Evidence Submission",src:new URL("/assets/evidence%20submission-CZIKo1E1.jpg",import.meta.url).href},{id:"evidentiary",name:"Evidentiary Hearing",src:new URL("/assets/evidentiary%20hearing-BibkA_Ru.jpg",import.meta.url).href},{id:"summaries",name:"Summaries",src:new URL("/assets/summaries-BEUvavav.jpg",import.meta.url).href},{id:"judgment",name:"Judgment",src:new URL("/assets/judgment-cIMuyU1R.jpg",import.meta.url).href}],sn=[{value:"EXPERT_OUR",label:"Expert fees on our behalf",type:"EXPENSE"},{value:"EXPERT_COURT",label:"Expert fees on behalf of the court",type:"EXPENSE"},{value:"INVESTIGATION",label:"Private Investigation fees",type:"EXPENSE"},{value:"SECONDARY_FEE",label:"Payment of secondary procedure fee",type:"EXPENSE"},{value:"COURT_FEES",label:"Court fees",type:"EXPENSE"},{value:"PHOTOCOPY",label:"Photocopying and binding of documents",type:"EXPENSE"},{value:"MEDICAL_RECORDS",label:"Medical Records Collection",type:"EXPENSE"},{value:"ATTORNEY_PHASE_1",label:"Attorney fees for phase 1",type:"EXPENSE"},{value:"ATTORNEY_PHASE_2",label:"Attorney fees for phase 2",type:"EXPENSE"},{value:"ATTORNEY_PHASE_3",label:"Attorney fees for phase 3",type:"EXPENSE"},{value:"ATTORNEY_PHASE_4",label:"Attorney fees for phase 4",type:"EXPENSE"},{value:"ATTORNEY_PHASE_5",label:"Attorney fees for phase 5",type:"EXPENSE"},{value:"ATTORNEY_EXTRA_HEARING",label:"Attorney fees for extra court hearing",type:"EXPENSE"},{value:"ATTORNEY_THIRD_PARTY",label:"Attorney fees for third party notice",type:"EXPENSE"},{value:"OTHER",label:"Other",type:"EXPENSE"},{value:"COMPENSATION_JUDGMENT",label:"Compensation by Judgment",type:"ADJUSTMENT"},{value:"COMPENSATION_SETTLEMENT",label:"Compensation under Settlement",type:"ADJUSTMENT"},{value:"DEDUCTIBLE",label:"Deductible paid by the insured",type:"ADJUSTMENT"},{value:"PAID_BY_INSURER",label:"Expenses already paid by the insurer",type:"ADJUSTMENT"}],Cn=()=>({status:"DRAFT",rows:[],history:[],notes:[],favorites:[],totals:{totalExpenses:0,totalAdjustments:0,totalBalance:0}}),fg=1e3*60*60*48,om=1e3*60*60*24*30,cm=7*24*60*60*1e3,ju={lineSlip:"UNIQUE MARKET REF",certificate:"CERTIFICATE REF"},Ae={REPORTS:"lp_reports",USER:"lp_current_user",VIEW:"lp_view",CURRENT_REPORT:"lp_current_report",CASE_FOLDERS:"lp_case_folders"},Eu="__reset_done__",ku=["report","reports","case","cases","finance","expense","worksheet","templates","draft","archive","recycle"],mg=()=>{if(!(typeof window>"u"))try{Object.values(Ae).forEach(t=>{localStorage.removeItem(t)}),localStorage.removeItem("caseTemplates"),localStorage.removeItem("favoriteProviders");const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(!n)continue;const r=n.toLowerCase();if(r.startsWith("emailtemplates:")){e.push(n);continue}(ku.some(l=>r.startsWith(l))||ku.some(l=>r.includes(l)))&&e.push(n)}e.forEach(t=>{localStorage.removeItem(t)})}catch(e){console.error("Failed to reset app localStorage data",e)}},Jo=()=>{typeof window>"u"||localStorage.getItem(Eu)==="1"||(mg(),localStorage.setItem(Eu,"1"))},Cu=(e,t,n)=>{if(!e)return e;let r=!1;const l={...e};if(l.content&&t.forEach(i=>{var o;const a=(o=l.content)==null?void 0:o[i];a!==void 0&&(l.content={...l.content},!l.content[n]&&a&&(l.content[n]=a),delete l.content[i],r=!0)}),l.translatedContent&&t.forEach(i=>{var o;const a=(o=l.translatedContent)==null?void 0:o[i];a!==void 0&&(l.translatedContent={...l.translatedContent},!l.translatedContent[n]&&a&&(l.translatedContent[n]=a),delete l.translatedContent[i],r=!0)}),Array.isArray(l.selectedSections)&&l.selectedSections.some(a=>t.includes(a))){const a=l.selectedSections.map(o=>t.includes(o)?n:o);l.selectedSections=Array.from(new Set(a)),r=!0}return l.expertSummaryMode&&t.forEach(i=>{var o;const a=(o=l.expertSummaryMode)==null?void 0:o[i];a&&(l.expertSummaryMode={...l.expertSummaryMode,[n]:a},delete l.expertSummaryMode[i],r=!0)}),r?l:e},pg=e=>{let t=Cu(e,Jf,xn);return t=Cu(t,qf,Vr),t},hg=e=>{const t={...e};return t.reportReview||(t.reportReview={status:"DRAFT",issues:[]}),t.hebrewWorkflowStatus||(t.hebrewWorkflowStatus="HEBREW_DRAFT"),Array.isArray(t.reportReview.issues)&&t.reportReview.issues.length>0&&(t.reportReview={...t.reportReview,issues:t.reportReview.issues.map(n=>{const r=n.origin??"INTERNAL";let l=n.externalAction;return r==="EXTERNAL"&&!l&&(l="ENGLISH_ONLY"),{...n,origin:r,externalAction:l}})}),t},xg=()=>{if(typeof window>"u")return[];try{Jo();const e=localStorage.getItem(Ae.REPORTS);return(e?JSON.parse(e):[]).map(pg).map(hg)}catch(e){return console.error("Failed to load stored reports",e),[]}},gg=()=>{if(typeof window>"u")return null;try{Jo();const e=localStorage.getItem(Ae.USER);return e&&tr.find(t=>t.username===e)||null}catch(e){return console.error("Failed to load stored user",e),null}},yg=()=>{if(typeof window>"u")return"DASHBOARD";Jo();const e=localStorage.getItem(Ae.VIEW);return e&&(e==="STEP1"||e==="STEP2"||e==="PREVIEW"||e==="DASHBOARD"||e==="CASE_FOLDER")?e:"DASHBOARD"},Zl=e=>{const t=e.filter(r=>r.type==="EXPENSE").reduce((r,l)=>r+(l.amount||0),0),n=e.filter(r=>r.type==="ADJUSTMENT").reduce((r,l)=>r+(l.amount||0),0);return{totalExpenses:t,totalAdjustments:n,totalBalance:t-n}},Tu=e=>{var t,n;if((t=e.expenseWorksheet)!=null&&t.totals)return e.expenseWorksheet.totals.totalBalance;if(e.expensesSum){const r=parseFloat(e.expensesSum.replace(/,/g,""));if(!isNaN(r))return r}return(n=e.expensesItems)!=null&&n.length?e.expensesItems.reduce((r,l)=>r+(l.amount||0),0):0},Ru=e=>{var t,n,r;return(((n=(t=e.expenseWorksheet)==null?void 0:t.rows)==null?void 0:n.length)??0)>0||(((r=e.expensesItems)==null?void 0:r.length)??0)>0||!!(e.expensesSum&&e.expensesSum!=="0")},It=()=>Math.random().toString(36).slice(2,10),xr=e=>e==null?e:JSON.parse(JSON.stringify(e)),Au=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{const l=r.result,i=l.includes(",")?l.split(",")[1]:l;t(i)},r.onerror=()=>n(new Error("Failed to convert blob")),r.readAsDataURL(e)}),um=e=>e?e.replace(/\r\n/g,`
`).replace(/\t/g," ").split(`
`).map(r=>r.replace(/\s+$/g,"").replace(/ {2,}/g," ")).join(`
`).trim().replace(/\n{3,}/g,`

`):"",Gi=e=>{const t=e||{};return Object.keys(t).reduce((n,r)=>(n[r]=um(t[r]),n),{})},vg=`
               . ,   ,          .

          , ,  ,            .

      -  ,     .

   ,     ,                .

      .
`.trim(),Ng=["The policy period is from [policyStartDate] to [policyEndDate].","","The retroactive date is [retroactiveDate].","","    _______________, ,   .","","      ,     ____________  ____________.","",",         ."].join(`
`),dm=(e,t,n,r,l)=>{const i=Ng,a=E=>`${E}`,o=t||"",c=n||"",p=r||l||"",v=a(`The policy period is from ${o} to ${c}.`),g=a(`The retroactive date is ${p}.`),y=["    _______________, ,   .","","      ,     ____________  ____________.","",",         ."].join(`
`),T=E=>E.replace(/\[policyStartDate\]/gi,o).replace(/\[policyEndDate\]/gi,c).replace(/\[retroactiveDate\]/gi,p),R=`${v}

${g}

${y}`,j=i?T(i):"";if(!j&&!e)return R;let f=e&&e.trim().length?e:j||R;(/\[policyStartDate\]/i.test(f)||/\[policyEndDate\]/i.test(f)||/\[retroactiveDate\]/i.test(f))&&(f=T(f));const m=/The policy period is[^\n]*/i;m.test(f)?f=f.replace(m,v):(!e||!e.trim())&&(f=`${v}

${f}`);const h=/The retroactive date is[^\n]*/i;return h.test(f)?f=f.replace(h,g):(!e||!e.trim())&&(f=f.includes(v)?f.replace(v,`${v}

${g}`):`${g}

${f}`),f.includes("   ")||(f=`${f.trim()}

${y}`),f},Ha=(e,t)=>e.map(n=>{var a;const r=sn.find(o=>o.value===n.category),l=(r==null?void 0:r.type)||"EXPENSE",i=n.category==="OTHER"?((a=n.customLabel)==null?void 0:a.trim())||"Other expense":(r==null?void 0:r.label)||"Expense";return{id:n.id||It(),type:l,category:n.category,label:i,serviceProvider:l==="EXPENSE"?n.serviceProvider:void 0,amount:Number(n.amount)||0,locked:!1,createdBy:t==null?void 0:t.id,createdAt:new Date().toISOString(),updatedBy:t==null?void 0:t.id,updatedAt:new Date().toISOString()}}),wg=e=>e.filter(t=>t.type==="EXPENSE").map(t=>({id:t.id,date:new Date().toISOString().split("T")[0],description:`${t.label}${t.serviceProvider?` (${t.serviceProvider})`:""}`,amount:t.amount,currency:"NIS"})),Sg=({data:e,updateData:t,onNext:n,currentUser:r,timelineGallery:l,onAddTimelineImages:i,onRemoveTimelineImage:a,onSaveAndExit:o})=>{const[c,p]=b.useState(""),[v,g]=b.useState(!1),y=e.insurerName===""||hu.includes(e.insurerName),[T,R]=b.useState(!y),[j,z]=b.useState(!1),[f,m]=b.useState(!1);b.useRef(null);const h=D=>D?new Date(D).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],E=D=>D.trim().replace(/\s+/g," "),A=D=>{const V=e,L="plaintiffName"in D?D.plaintiffName??V.plaintiffName:V.plaintiffName,q="insuredName"in D?D.insuredName??V.insuredName:V.insuredName;if(!(!!L&&!!q))return D;const W=E(L),G=E(q),fe=`${W} v. ${G}`,le="reportSubject"in D?D.reportSubject??V.reportSubject:V.reportSubject,be="isSubjectAuto"in D?D.isSubjectAuto??V.isSubjectAuto:V.isSubjectAuto;return!le||!le.trim()||be?{...D,reportSubject:fe,isSubjectAuto:!0}:D},I=D=>{D==="OTHER"?(R(!0),t(A({insurerName:""}))):(R(!1),t(A({insurerName:D})))},B=D=>{e.selectedSections.includes(D)||t({selectedSections:[...e.selectedSections,D]}),g(!1)},H=D=>{D!=="Update"&&t({selectedSections:e.selectedSections.filter(V=>V!==D)})},se=()=>{c.trim()&&!e.selectedSections.includes(c)&&(t({selectedSections:[...e.selectedSections,c]}),p(""))},te=(D,V)=>{const L=V==="UP"?D-1:D+1;if(L<0||L>=e.selectedSections.length)return;const q=[...e.selectedSections];[q[D],q[L]]=[q[L],q[D]],t({selectedSections:q})},w=D=>{t({selectedTimeline:D.id,selectedTimelineImage:D.src}),l.some(V=>V.name===D.name)||i([{name:D.name,src:D.src}])},X=async D=>{var L;const V=(L=D.target.files)==null?void 0:L[0];if(V){z(!0);try{const q=new FileReader;q.onload=async()=>{var le;const C=q.result.split(",")[1],W=await eg(C,V.type);let G={};W.insuredName&&(G=A({...G,insuredName:W.insuredName})),W.marketRef?(G.marketRef=W.marketRef,G.lineSlipNo=W.marketRef):W.lineSlipNo&&!G.lineSlipNo&&(G.lineSlipNo=W.lineSlipNo),W.certificateRef&&(G.certificateRef=W.certificateRef),typeof W.policyPeriodStart=="string"&&(G.policyPeriodStart=W.policyPeriodStart),typeof W.policyPeriodEnd=="string"&&(G.policyPeriodEnd=W.policyPeriodEnd),typeof W.retroStart=="string"&&(G.retroStart=W.retroStart),typeof W.retroEnd=="string"&&(G.retroEnd=W.retroEnd),G.policyFile={id:"policy-doc",name:V.name,data:C,type:V.type};const fe=dm((le=e.content)==null?void 0:le["Insurance Coverage"],G.policyPeriodStart||e.policyPeriodStart,G.policyPeriodEnd||e.policyPeriodEnd,G.retroStart||e.retroStart,G.retroEnd||e.retroEnd);fe&&(G.content={...e.content,"Insurance Coverage":fe}),t(G),z(!1)},q.readAsDataURL(V)}catch(q){console.error("Error reading file",q),z(!1)}}},Z=(D,V,L)=>s.jsxs("div",{className:"relative group",children:[s.jsx("input",{className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-lpBlue outline-none pr-8",placeholder:L,value:D,onChange:q=>V(q.target.value)}),D&&s.jsx("button",{onClick:()=>V(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-300 hover:text-red-500 transition-colors",children:s.jsx(nn,{className:"w-4 h-4"})})]});return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:o,className:"flex items-center text-sm text-lpBlue hover:text-blue-900 bg-blue-50 px-3 py-1.5 rounded-full",children:[s.jsx(Ho,{className:"w-4 h-4 mr-1"}),"  "]})}),s.jsx("h2",{className:"text-3xl font-bold text-lpBlue font-serif border-b pb-2",children:"1. Case Setup & Structure"}),e.odakanitNo&&s.jsx("div",{className:"bg-indigo-50 border-l-4 border-indigo-600 p-4 mb-6",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-indigo-900 flex items-center",children:[s.jsx(zo,{className:"w-5 h-5 mr-2"})," Odakanit Case #",e.odakanitNo]}),s.jsx("p",{className:"text-sm text-indigo-700",children:"This report folder was initiated by Finance."})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-lpGold"}),s.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 flex items-center",children:[s.jsx(ar,{className:"w-5 h-5 mr-2 text-lpGold"}),"Re: Case Details (Mandatory Fields - English)"]}),s.jsx("div",{className:"mb-6 bg-blue-50 border-2 border-dashed border-blue-200 rounded-lg p-4 text-center relative group",children:j?s.jsxs("div",{className:"flex flex-col items-center justify-center py-2",children:[s.jsx(rn,{className:"w-8 h-8 text-lpBlue animate-spin mb-2"}),s.jsx("span",{className:"text-sm font-bold text-lpBlue",children:"Analyzing Policy Document..."})]}):s.jsx(s.Fragment,{children:e.policyFile?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center text-green-700 font-bold text-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Uf,{className:"w-6 h-6 mr-2"}),"Policy Document Attached"]}),s.jsxs("span",{className:"text-xs font-normal text-green-800",children:["Original file: ",e.policyFile.name]})]}),s.jsx("button",{className:"text-xs text-red-500 hover:underline",onClick:()=>t({policyFile:void 0}),children:"Remove"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-700 bg-white/70 px-3 py-1 rounded-full border border-gray-200",children:[s.jsx("input",{id:"attach-policy-appendix",type:"checkbox",className:"h-3 w-3 accent-lpBlue",checked:e.attachPolicyAsAppendix??!0,onChange:D=>t({attachPolicyAsAppendix:D.target.checked})}),s.jsx("label",{htmlFor:"attach-policy-appendix",className:"cursor-pointer",children:"Attach policy as Appendix A to final PDF"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center justify-center cursor-pointer text-center px-4",children:[s.jsx(ql,{className:"w-8 h-8 text-lpBlue mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Upload Policy Document"}),s.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Any file uploaded here (PDF/DOCX/scan) is treated as the official policy for this case."})]}),s.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",accept:"application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,image/*",onChange:X})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase flex items-center",children:[s.jsx(tx,{className:"w-3 h-3 mr-1"})," Report Date"]}),s.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded",value:h(e.reportDate),onChange:D=>t({reportDate:new Date(D.target.value).toISOString()})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"RE (Subject)"}),s.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded text-sm",placeholder:"e.g. John Doe v. XYZ Medical Center  Claim Update",value:e.reportSubject||"",onChange:D=>t({reportSubject:D.target.value,isSubjectAuto:!1})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Insurer Name"}),s.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded",value:T?"OTHER":e.insurerName,onChange:D=>I(D.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"-- Select Insurer --"}),hu.map(D=>s.jsx("option",{value:D,children:D},D)),s.jsx("option",{value:"OTHER",children:"Other (Enter Manually)"})]}),T&&s.jsx("div",{className:"mt-2 animate-fade-in",children:Z(e.insurerName,D=>t({insurerName:D}),"Type custom insurer name...")})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:ju.lineSlip}),Z(e.lineSlipNo,D=>t({lineSlipNo:D,marketRef:D}),"e.g., B0180PD2391439")]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:ju.certificate}),Z(e.certificateRef||"",D=>t({certificateRef:D}),"e.g., 516902624")]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Insured Name"}),Z(e.insuredName,D=>t(A({insuredName:D})),"e.g., Dr. Cohen")]}),s.jsxs("div",{className:"space-y-1 md:col-span-2",children:[s.jsxs("div",{className:"flex justify-between items-end mb-1",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Party Name"}),s.jsxs("div",{className:"flex bg-gray-100 rounded p-0.5 text-xs",children:[s.jsx("button",{className:`px-3 py-1 rounded-sm transition-all ${e.plaintiffTitle==="Plaintiff"?"bg-white shadow text-lpBlue font-bold":"text-gray-500"}`,onClick:()=>t({plaintiffTitle:"Plaintiff"}),children:"Plaintiff"}),s.jsx("button",{className:`px-3 py-1 rounded-sm transition-all ${e.plaintiffTitle==="Claimant"?"bg-white shadow text-lpBlue font-bold":"text-gray-500"}`,onClick:()=>t({plaintiffTitle:"Claimant"}),children:"Claimant"})]})]}),Z(e.plaintiffName,D=>t(A({plaintiffName:D})),"e.g., Mr. Levi")]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex items-center",children:[s.jsx(za,{className:"w-5 h-5 mr-2 text-lpBlue"}),"Timeline Selection"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"       (   )."})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:dg.map(D=>{const V=e.selectedTimeline===D.id;return s.jsxs("button",{type:"button",onClick:()=>w(D),className:`text-left border rounded-xl p-4 transition hover:shadow-lg focus:outline-none ${V?"border-lpBlue ring-2 ring-lpBlue/30 shadow-lg bg-blue-50":"border-gray-200 bg-white"}`,children:[s.jsx("p",{className:"font-semibold text-gray-800",children:D.name}),s.jsx("p",{className:"text-xs text-gray-500",children:"     "}),V&&s.jsx("span",{className:"text-xs font-bold text-lpBlue mt-1 inline-block",children:""})]},D.id)})}),l.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(za,{className:"w-3 h-3 text-lpBlue"})," Selected Timeline Slides"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(D=>s.jsxs("div",{className:"px-3 py-1.5 border border-gray-200 rounded-full bg-white text-xs font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx("span",{children:D.name}),a&&s.jsx("button",{onClick:()=>a(D.id),className:"text-red-400 hover:text-red-600",children:s.jsx(kt,{className:"w-3 h-3"})})]},D.id))})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-800 flex items-center",children:[s.jsx(cx,{className:"w-5 h-5 mr-2 text-green-600"}),"Current Report Sections"]}),s.jsx("div",{className:"space-y-2 mb-6",children:e.selectedSections.map((D,V)=>{const L=V>0,q=V<e.selectedSections.length-1,C=D==="Update";return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-100 text-gray-500 flex items-center justify-center text-xs font-bold",children:V+1}),s.jsx("span",{className:"font-medium text-gray-800",children:D}),C&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"Fixed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{onClick:()=>te(V,"UP"),disabled:!L,className:`p-1 rounded border ${L?"text-gray-600 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,title:" ",children:s.jsx(nx,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>te(V,"DOWN"),disabled:!q,className:`p-1 rounded border ${q?"text-gray-600 hover:bg-gray-100":"text-gray-300 cursor-not-allowed"}`,title:" ",children:s.jsx(Vf,{className:"w-4 h-4"})})]}),!C&&s.jsx("button",{onClick:()=>H(D),className:"text-gray-400 hover:text-red-500 transition",title:" ",children:s.jsx(kt,{className:"w-4 h-4"})})]})]},`${D}-${V}`)})}),v?s.jsxs("div",{className:"bg-gray-50 p-4 rounded border animate-fade-in",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{className:"flex-1 border p-2 rounded",onChange:D=>B(D.target.value),defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"-- Select a Header --"}),xx.filter(D=>!e.selectedSections.includes(D)).map(D=>s.jsx("option",{value:D,children:D},D))]}),s.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300",children:"Cancel"})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 border p-2 rounded",placeholder:"Type custom header name...",value:c,onChange:D=>p(D.target.value)}),s.jsx("button",{onClick:()=>{se(),g(!1)},className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Add Custom"})]})})]}):s.jsxs("button",{onClick:()=>g(!0),className:"w-full py-2 border-2 border-dashed border-gray-300 text-gray-500 rounded hover:border-green-500 hover:text-green-600 transition flex items-center justify-center font-medium",children:[s.jsx(Vo,{className:"w-4 h-4 mr-2"})," Add Report Section"]})]}),s.jsxs("div",{className:"flex flex-wrap justify-between gap-2",children:[s.jsxs("button",{onClick:o,className:"flex items-center text-gray-600 px-4 py-2 border rounded hover:bg-gray-50 transition",children:[s.jsx(Xl,{className:"mr-2 w-4 h-4"})," Back to Dashboard"]}),s.jsxs("button",{onClick:n,className:"flex items-center bg-lpBlue text-white px-6 py-2 rounded hover:bg-blue-900 transition shadow-md",children:["Next Step ",s.jsx(Ut,{className:"ml-2 w-4 h-4"})]})]})]})},bg=({data:e,updateData:t,onBack:n,onNext:r,currentUser:l,onSaveAndExit:i,onTranslate:a,onFormatContent:o,onSubmitHebrewForReview:c,onApproveHebrewForTranslation:p,onAddReviewIssues:v,onMarkReviewIssueDone:g,onAddExternalFeedbackIssues:y,onReopenHebrewDueToExternalFeedback:T})=>{var oe;const R=xn,j=Vr,[z,f]=b.useState(null),[m,h]=b.useState(!1),[E,A]=b.useState(null),[I,B]=b.useState(null),[H,se]=b.useState(null),[te,w]=b.useState(null),[X,Z]=b.useState(null),D=b.useRef(null),V=b.useRef(null),[L,q]=b.useState({date:new Date().toISOString().split("T")[0],description:"",amount:0,currency:"NIS"}),C=l.role==="SUB_ADMIN"||l.role==="FINANCE",W=e.selectedSections.some(N=>N.toLowerCase().includes("expenses")),G=l.role==="LAWYER"&&e.requiresExpenses===!0&&W,fe=l.role==="ADMIN"&&e.isTranslated,le=l.role==="LAWYER"||l.role==="ADMIN",be=l.role==="FINANCE"||l.role==="SUB_ADMIN"||l.role==="ADMIN",Pe=((oe=e.reportReview)==null?void 0:oe.status)==="APPROVED"||e.hebrewWorkflowStatus==="HEBREW_APPROVED",gt=N=>xu(N)?"EXPERT":N===j?"DEMAND":"CLAIM",je=()=>{if(!be||!L.description||!L.amount)return;const N={id:Date.now().toString(),date:L.date||"",description:L.description,amount:Number(L.amount),currency:L.currency||"NIS"},F=[...e.expensesItems,N],Y=F.reduce((O,K)=>O+K.amount,0);t({expensesItems:F,expensesSum:Y.toLocaleString()}),q({date:new Date().toISOString().split("T")[0],description:"",amount:0,currency:"NIS"})},yt=N=>{const F=e.expensesItems.filter(O=>O.id!==N),Y=F.reduce((O,K)=>O+K.amount,0);t({expensesItems:F,expensesSum:Y.toLocaleString()})},Be=async N=>{const F=N.target.files;if(!F)return;const Y=e.invoiceFiles.length;if(Y>=4){A({msg:"   4   (PDF  Word).",type:"info"}),N.target.value="";return}const O=Array.from(F).slice(0,4-Y),K=[];for(let ye=0;ye<O.length;ye++){const Ne=O[ye],ve=new FileReader;await new Promise(Ee=>{ve.onload=He=>{var Ke;K.push({id:`inv-${Date.now()}-${ye}`,name:Ne.name,data:((Ke=He.target)==null?void 0:Ke.result).split(",")[1],type:Ne.type}),Ee()},ve.readAsDataURL(Ne)})}const ne=[...e.invoiceFiles,...K],ee=ne.length>0,Me=be&&e.status==="WAITING_FOR_INVOICES"&&ee?"TASK_ASSIGNED":e.status;t({invoiceFiles:ne,isWaitingForInvoices:!ee,status:Me}),A({msg:"   ( 4 ).",type:"success"})},Yt=N=>{const F=e.invoiceFiles.filter(ne=>ne.id!==N),Y=F.length>0,K=be&&!Y&&e.status==="TASK_ASSIGNED"?"WAITING_FOR_INVOICES":e.status;t({invoiceFiles:F,isWaitingForInvoices:!Y,status:K})},vt=(N,F)=>{C||t({content:{...e.content,[N]:F}})},ct=(N,F)=>{fe&&t({translatedContent:{...e.translatedContent,[N]:F}})},on=(N,F)=>{if(C)return;let Y=F.replace(/{plaintiff}/g,e.plaintiffName||"").replace(/{insured}/g,e.insuredName||"").replace(/\[DATE\]/g,new Date().toLocaleDateString("he-IL"));const O=e.content[N]||"";vt(N,O?`${O}

${Y}`:Y),f(null)},Je=async N=>{if(C)return;const F=e.content[N];if(F){w(N),h(!0);try{const Y=await tg(F);vt(N,Y)}finally{h(!1),w(null)}}},ut=async(N,F,Y)=>{var O;h(!0);try{const K=await rg(F,Y);if((O=K.items)!=null&&O.length){const ne=[...e.expensesItems,...K.items],ee=ne.reduce((ge,Me)=>ge+(Me.amount||0),0);t({expensesItems:ne,expensesSum:ee.toLocaleString()}),A({msg:`  "${N}"  .`,type:"success"})}else A({msg:"    .",type:"info"})}catch(K){console.error("Expenses extraction failed",K),A({msg:" .   PDF/Word .",type:"error"})}finally{h(!1)}},Qt=N=>new Promise((F,Y)=>{const O=new FileReader;O.onload=()=>F(O.result.split(",")[1]),O.onerror=()=>Y(new Error("Failed to read file")),O.readAsDataURL(N)}),rt=N=>{var Me,ye,Ne,ve,Ee,He,Ke,Ft;if(!N)return;const F=[...e.selectedSections],Y=de=>{F.includes(de)||F.push(de)},O=de=>de&&de.length?de.map(Bt=>` ${Bt}`).join(`
`):"",K=(Me=N.timeline)!=null&&Me.length?N.timeline.map(de=>` ${(de==null?void 0:de.date)||"  "}  ${(de==null?void 0:de.event)||""}`).join(`
`):"",ne={...e.content};if(N.briefSummary||K||(ye=N.injuries)!=null&&ye.length){Y("Update");const de=O(N.injuries),Bt=O(N.requestedRelief),un=[N.briefSummary||"",de?`
 :
${de}`:"",Bt?`
 :
${Bt}`:"",K?`
 :
${K}`:""].filter(Boolean);ne.Update=un.join(`
`).trim()}if((Ne=N.facts)!=null&&Ne.length){const de=xn;Y(de),ne[de]=O(N.facts)}const ee=[];if((ve=N.allegations)!=null&&ve.length&&ee.push(` :
${O(N.allegations)}`),(Ee=N.negligenceTheory)!=null&&Ee.length&&ee.push(` :
${O(N.negligenceTheory)}`),(He=N.medicalFindings)!=null&&He.length&&ee.push(` :
${O(N.medicalFindings)}`),ee.length){const de=e.selectedSections.includes("Strategy & Recommendations")?"Strategy & Recommendations":"Strategy";Y(de),ne[de]=ee.join(`

`)}N.riskAssessment&&(Y("Risk Assessment"),ne["Risk Assessment"]=N.riskAssessment);const ge=[];(Ke=N.recommendedActions)!=null&&Ke.length&&ge.push(O(N.recommendedActions)),(Ft=N.requestedRelief)!=null&&Ft.length&&ge.push(` :
${O(N.requestedRelief)}`),ge.length&&(Y("Recommendations"),ne.Recommendations=ge.join(`

`)),t({content:ne,selectedSections:F,complaintAnalysis:N}),A({msg:"     .",type:"success"})},Gn=(N,F)=>{var dr,bn,dn,Kn,fr;if(!N)return"";const Y=(F==null?void 0:F.analysisType)==="DEMAND"||(F==null?void 0:F.section)===j?"DEMAND":"CLAIM",O=Y==="DEMAND"?"":"",K=Y==="DEMAND"?"   ":"  ",ne=(bn=(dr=N.entities)==null?void 0:dr.plaintiff)==null?void 0:bn.trim(),ee=(N.defendants||[]).filter(Boolean).join(", "),ge=[];ge.push(ne?`${O}, ${ne}`:O),ee&&ge.push(`${K} ${ee}`);const Me=`${ge.join(" ")}.`.replace(/\s+/g," ").trim(),ye=(d,J,ie,ae=!1)=>{const we=J.map(Jt=>Jt.trim()).filter(Boolean);if(!we.length&&ae)return"";const he=we.length?we:ie?[ie]:[];if(!he.length)return"";const Rt=he.map((Jt,Gr)=>`${Gr+1}. ${Jt}`.trim()).join(`
`);return`${d}
${Rt}`},Ne=((dn=N.timeline)==null?void 0:dn.map(d=>!(d!=null&&d.event)&&!(d!=null&&d.date)?"":`${d!=null&&d.date?` ${d.date} `:""}${(d==null?void 0:d.event)||""}`.trim()).filter(Boolean))||[],ve=((Kn=N.facts)==null?void 0:Kn.filter(Boolean))||[],Ee=Ne.length?Ne:ve,Ke=ye(Y==="DEMAND"?"    :":"    :",Ee,"    ."),Ft=Y==="DEMAND"?"    :":"    :",de=((fr=N.allegations)==null?void 0:fr.filter(Boolean))||[],Bt=ye(Ft,de,"    ."),un=[...N.injuries||[],...N.medicalFindings||[],...N.requestedRelief||[]].filter(Boolean),Xt=ye(Y==="DEMAND"?"      :":"      :",un,void 0,!0);return[Me,Ke,Bt,Xt].filter(Boolean).join(`

`).trim()},st=()=>{vt("Strategy",vg),A({msg:' " "  .',type:"success"})},cn=(N,F)=>{var K;const Y=(K=N.target.files)==null?void 0:K[0];if(!Y)return;if(!F.includes("Expenses")){N.target.value="";return}const O=new FileReader;O.onload=async ne=>{var ge;const ee=((ge=ne.target)==null?void 0:ge.result).split(",")[1];await ut(Y.name,ee,Y.type)},O.readAsDataURL(Y),N.target.value=""},Nt=N=>{Z(null),B(N),setTimeout(()=>{var F;(F=D.current)==null||F.click()},0)},qe=async N=>{var O,K;const F=(O=N.target.files)==null?void 0:O[0];if(!F||!I){B(null),N.target.value="";return}const Y=I.section||I.mode;se(Y);try{const ne=await Qt(F),ee=I.mode==="SECTION"&&I.section||xn,ge=ee===R||ee===j,Me=xu(ee),ye={expertCountMode:I.analysisType==="EXPERT"?((K=e.expertSummaryMode)==null?void 0:K[ee])||"SINGLE":void 0,partyRole:gx(ee)||void 0};(ge||Me)&&(ye.sectionKey=ee,ye.plaintiffName=e.plaintiffName||"",ye.insuredName=e.insuredName||"",ye.insurerName=e.insurerName||"",ye.reportSubject=e.reportSubject||"");const Ne=await ng(ne,F.type||"application/octet-stream",I.analysisType||"CLAIM",ye),ve=(Ne==null?void 0:Ne.analysis)||null;if(I.mode==="SECTION"){const Ee=((Ne==null?void 0:Ne.claimSummary)||"").trim()||Gn(ve,{analysisType:I.analysisType,section:I.section});if(!Ee)A({msg:"      .",type:"error"});else{const He=I.section||R,Ke=e.content[He]||"",Ft=Ke?`${Ke}

${Ee}`:Ee,de={content:{...e.content,[He]:Ft},selectedSections:e.selectedSections.includes(He)?e.selectedSections:[...e.selectedSections,He]};if(I.analysisType==="EXPERT"&&I.section){const un=!!Ke.trim()?"MULTIPLE":"SINGLE";de.expertSummaryMode={...e.expertSummaryMode||{},[He]:un}}ve&&(de.complaintAnalysis=ve),t(de),A({msg:"     .",type:"success"})}}else ve?(rt(ve),I.mode==="POLICY"&&t({policyFile:{id:`policy-${Date.now()}`,name:F.name,data:ne,type:F.type}})):A({msg:"   .   .",type:"error"})}catch(ne){console.error(ne),A({msg:" .    .",type:"error"})}finally{se(null),B(null),N.target.value=""}},dt=()=>{const{policyPeriodStart:N,policyPeriodEnd:F,retroStart:Y,retroEnd:O}=e;if(!N&&!F&&!Y&&!O){A({msg:"    .  POLCY .",type:"info"});return}const K=dm(e.content["Insurance Coverage"],N,F,Y,O);vt("Insurance Coverage",K),A({msg:"   .",type:"success"})},Ge=!!(e.policyPeriodStart||e.policyPeriodEnd||e.retroStart||e.retroEnd),We=N=>{const F=e.expenseWorksheet;if(!F||!F.rows||F.rows.length===0){A({msg:"    .",type:"info"});return}if(F.status!=="LOCKED"){A({msg:'       ".',type:"info"});return}const Y=$(F);vt(N,Y),A({msg:'   ".',type:"success"})},wt=()=>{o&&(o(),A({msg:"    .",type:"success"}))},$=N=>{const F=N.rows.filter(ne=>ne.type==="EXPENSE"),Y=N.rows.filter(ne=>ne.type==="ADJUSTMENT"),O=F.map(ne=>` ${ne.label}${ne.serviceProvider?` (${ne.serviceProvider})`:""}  ${ne.amount.toLocaleString()}`),K=Y.map(ne=>` ${ne.label}  ${ne.amount.toLocaleString()}`);return["     ","",":",O.length?O.join(`
`):"   ",""," / :",K.length?K.join(`
`):"  ","",`" : ${N.totals.totalExpenses.toLocaleString()}`,`" : ${N.totals.totalAdjustments.toLocaleString()}`,` : ${N.totals.totalBalance.toLocaleString()}`].join(`
`)};return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"file",ref:D,className:"hidden",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,image/*",onChange:qe}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2",children:[s.jsxs("button",{onClick:n,className:"flex items-center text-sm text-gray-600 bg-gray-100 px-3 py-1.5 rounded-full hover:bg-gray-200",children:[s.jsx(Xl,{className:"w-4 h-4 mr-1"}),"   1"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[l.role==="ADMIN"&&a&&s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsxs("button",{onClick:a,disabled:!Pe,className:`flex items-center text-sm px-3 py-1.5 rounded-full transition ${Pe?"text-indigo-700 bg-indigo-50 hover:bg-indigo-100":"text-slate-400 bg-slate-100 cursor-not-allowed"}`,children:[s.jsx(ix,{className:"w-4 h-4 mr-1"})," Auto-Translate"]}),!Pe&&s.jsx("p",{className:"text-[11px] text-slate-600",children:"      ."})]}),l.role==="ADMIN"&&o&&s.jsxs("button",{onClick:wt,className:"flex items-center text-sm text-purple-700 bg-purple-50 px-3 py-1.5 rounded-full hover:bg-purple-100",children:[s.jsx(Uo,{className:"w-4 h-4 mr-1"})," Format Text"]}),s.jsxs("button",{onClick:i,className:"flex items-center text-sm text-lpBlue bg-blue-50 px-3 py-1.5 rounded-full hover:bg-blue-100",children:[s.jsx(Ho,{className:"w-4 h-4 mr-1"}),"  "]})]})]}),E&&s.jsx(og,{message:E.msg,type:E.type,onClose:()=>A(null)}),s.jsx("h2",{className:"text-2xl font-bold text-lpBlue font-serif",children:"2. Draft Content"}),C&&s.jsxs("div",{className:"bg-orange-100 border-l-4 border-orange-500 p-4 text-orange-800",children:[s.jsxs("p",{className:"font-bold flex items-center",children:[s.jsx(dx,{className:"w-5 h-5 mr-2"})," Restricted Access Mode"]}),s.jsxs("p",{className:"text-sm",children:["You are logged in as ",l.role,". You can only modify the Invoice Attachments in the Expenses section."]})]}),e.financeInstructions&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 shadow-md rounded-r-lg animate-pulse-slow",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx($a,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{className:"ml-3 w-full",children:[s.jsx("h3",{className:"text-sm font-bold text-red-800",children:"Instruction from Finance"}),s.jsx("div",{className:"mt-2 text-sm text-red-700 whitespace-pre-wrap",children:e.financeInstructions}),e.expensesSourceFile&&s.jsxs("div",{className:"mt-4 pt-2 border-t border-red-200",children:[s.jsx("p",{className:"text-xs font-bold text-red-800 mb-1",children:"Attached Expenses Source File (Word/Excel):"}),s.jsxs("div",{className:"flex items-center bg-white p-2 rounded border border-red-200 max-w-md",children:[s.jsx(ar,{className:"w-4 h-4 text-blue-600 mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 flex-1",children:e.expensesSourceFile.name}),s.jsx("a",{href:`data:${e.expensesSourceFile.type};base64,${e.expensesSourceFile.data}`,download:e.expensesSourceFile.name,className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 font-bold",children:"Download"})]})]})]})]})}),G&&s.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 shadow rounded-r-lg flex gap-3 items-start",children:[s.jsx($a,{className:"w-5 h-5 text-amber-600 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-amber-900",children:"    "}),s.jsx("p",{className:"text-sm text-amber-800",children:"  /   .              ."})]})]}),s.jsx(wx,{report:e,currentUser:l,onSubmitToAdmin:()=>c&&c(),onApproveHebrew:()=>p&&p(),onRequestChanges:N=>v&&v(N),onMarkIssueDone:N=>g&&g(N),onAddExternalFeedbackIssues:(N,F)=>y&&y(N,F),onReopenHebrewDueToExternalFeedback:()=>T&&T()}),s.jsx("div",{className:"space-y-8",children:e.selectedSections.map(N=>{var F,Y;return s.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-sm border transition-all ${C&&!N.includes("Expenses")?"opacity-60 pointer-events-none border-gray-100":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-100",children:[s.jsx("h3",{className:"font-bold text-lg text-lpBlue uppercase tracking-wide",children:yx(N,(F=e.expertSummaryMode)==null?void 0:F[N])}),!C&&s.jsxs("div",{className:"flex items-center gap-2",children:[!N.includes("Expenses")&&s.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded text-gray-500",onClick:()=>Nt({mode:"SECTION",section:N,analysisType:gt(N)}),title:"   ",children:H===N?s.jsx(rn,{className:"w-4 h-4 animate-spin"}):s.jsx(ux,{className:"w-4 h-4"})}),N.includes("Expenses")&&le&&s.jsx("button",{onClick:()=>We(N),className:"p-1.5 hover:bg-green-50 rounded text-gray-500 hover:text-green-600",title:"   ",children:s.jsx(Xf,{className:"w-4 h-4"})}),!N.includes("Expenses")&&s.jsxs(s.Fragment,{children:[N==="Strategy"&&!C&&s.jsx("button",{onClick:st,className:"px-3 py-1 text-xs font-semibold text-blue-700 bg-blue-50 border border-blue-200 rounded-full hover:bg-blue-100",children:" "}),s.jsx("button",{onClick:()=>Je(N),className:"p-1.5 hover:bg-purple-50 rounded text-gray-500 hover:text-purple-600",title:"  ",children:te===N?s.jsx(rn,{className:"w-4 h-4 animate-spin"}):s.jsx(fx,{className:"w-4 h-4"})}),N==="Insurance Coverage"&&Ge&&s.jsx("button",{onClick:dt,className:"p-1.5 hover:bg-blue-50 rounded text-gray-500 hover:text-blue-600",title:"Auto-fill policy data",children:s.jsx(hx,{className:"w-4 h-4"})})]}),Hi[N]&&s.jsxs("button",{onClick:()=>f(z===N?null:N),className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-bold bg-gray-50 text-gray-500 border",children:[s.jsx(ox,{className:"w-3 h-3"})," Ideas"]})]})]}),z===N&&Hi[N]&&!C&&s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded border border-yellow-200",children:s.jsx("div",{className:"grid grid-cols-1 gap-2",children:Hi[N].map((O,K)=>s.jsx("button",{onClick:()=>on(N,O),className:"text-right text-xs p-2 bg-white border border-yellow-100 rounded hover:bg-yellow-100 text-gray-700",dir:"rtl",children:O},K))})}),N.includes("Expenses")?s.jsxs("div",{className:"space-y-4",children:[be&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded border border-blue-100 mb-4",children:[s.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-2",children:"Add Expense Item"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("input",{type:"date",className:"border p-2 rounded text-sm",value:L.date,onChange:O=>q({...L,date:O.target.value})}),s.jsx("input",{type:"text",className:"border p-2 rounded text-sm flex-1",placeholder:"Description (e.g. Court Fee)",value:L.description,onChange:O=>q({...L,description:O.target.value})}),s.jsx("input",{type:"number",className:"border p-2 rounded text-sm w-24",placeholder:"Amount",value:L.amount,onChange:O=>q({...L,amount:Number(O.target.value)})}),s.jsx("button",{onClick:je,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700",children:"Add"})]})]}),be&&s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"relative text-xs",children:[s.jsxs("button",{className:"flex items-center text-indigo-600 bg-white px-2 py-1 rounded hover:bg-indigo-50",onClick:()=>Z(X===N?null:N),children:[s.jsx(ql,{className:"w-3 h-3 mr-1"})," Auto-extract"]}),X===N&&s.jsxs("div",{className:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:[s.jsxs("label",{className:"w-full block px-3 py-2 hover:bg-gray-50 cursor-pointer text-right",children:["  ",s.jsx("input",{type:"file",className:"hidden",onChange:O=>{Z(null),cn(O,N)},accept:".pdf,.jpg,.png"})]}),s.jsx("button",{className:"w-full text-right px-3 py-2 hover:bg-gray-50",onClick:()=>Nt({mode:"EXPENSES",section:N}),children:"  OCR"})]})]}),m&&s.jsxs("span",{className:"text-xs text-indigo-500 flex items-center",children:[s.jsx(rn,{className:"w-3 h-3 animate-spin mr-1"})," Extracting..."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center bg-indigo-50 p-2 rounded border border-indigo-200",children:[s.jsxs("span",{className:"text-sm font-bold text-indigo-900",children:["Total Extracted: ",e.expensesSum||"0"," NIS"]}),be&&s.jsx("button",{onClick:()=>t({expensesItems:[],expensesSum:"0"}),className:"text-xs text-red-500 hover:underline",children:"Clear All"})]}),s.jsx("div",{className:"overflow-x-auto border rounded",children:s.jsxs("table",{className:"w-full text-sm border-collapse border-gray-300",children:[s.jsx("thead",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left text-gray-600",children:"Date"}),s.jsx("th",{className:"p-2 text-left text-gray-600",children:"Description"}),s.jsx("th",{className:"p-2 text-right text-gray-600",children:"Amount"}),!C&&s.jsx("th",{className:"p-2 w-8"})]})}),s.jsxs("tbody",{children:[e.expensesItems.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-400 italic",children:"No expenses added."})}),e.expensesItems.map((O,K)=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"p-2",children:O.date}),s.jsx("td",{className:"p-2",children:O.description}),s.jsxs("td",{className:"p-2 text-right",children:[O.amount," ",O.currency]}),be&&s.jsx("td",{className:"p-2 text-center",children:s.jsx("button",{onClick:()=>yt(O.id),className:"text-red-400 hover:text-red-600",children:s.jsx(kt,{className:"w-3 h-3"})})})]},K))]})]})}),be&&s.jsx("div",{className:"bg-indigo-50 p-3 rounded border",children:s.jsxs("select",{className:"w-full text-sm border p-2 rounded",value:e.paymentRecommendation||"",onChange:O=>t({paymentRecommendation:O.target.value}),children:[s.jsx("option",{value:"",children:"-- Select Recommendation --"}),s.jsx("option",{value:"The expenses are lower than the Deductible...",children:"Option A: Lower than Deductible"}),s.jsxs("option",{value:`It would be appreciated... transfer NIS ${e.expensesSum||"..."}`,children:["Option B: Transfer Funds (",e.expensesSum," NIS)"]})]})})]}),s.jsxs("div",{className:`border-t-2 pt-4 mt-6 ${C?"bg-green-50 p-4 rounded border-green-200":""}`,children:[s.jsxs("h4",{className:"font-bold text-sm text-gray-700 mb-2 flex items-center",children:[s.jsx(Kf,{className:"w-4 h-4 mr-2"})," Tax Invoices (Appendices)"]}),(be||!e.isWaitingForInvoices)&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>{var O;return(O=V.current)==null?void 0:O.click()},className:"px-3 py-1.5 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 flex items-center gap-1",children:[s.jsx(ql,{className:"w-3 h-3"})," "]}),s.jsx("button",{onClick:()=>Nt({mode:"INVOICE"}),className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 flex items-center gap-1",children:H==="INVOICE"?s.jsx(rn,{className:"w-3 h-3 animate-spin"}):" "}),s.jsx("input",{ref:V,type:"file",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf",onChange:Be})]}),s.jsx("div",{className:"mt-2 space-y-2",children:e.invoiceFiles.map(O=>s.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border shadow-sm text-xs",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(ar,{className:"w-3 h-3 mr-2 text-blue-500"})," ",O.name]}),s.jsx("button",{onClick:()=>Yt(O.id),className:"text-red-400 hover:text-red-600",children:s.jsx(kt,{className:"w-3 h-3"})})]},O.id))})]})]}):s.jsxs("div",{className:"relative",children:[s.jsx(bu,{className:"w-full border border-gray-300 rounded-md p-4 min-h-[100px] text-right font-sans focus:ring-1 focus:ring-lpBlue outline-none transition-all",dir:"rtl",value:e.content[N]||"",onChange:O=>vt(N,O.target.value),disabled:C,placeholder:"Type Hebrew content here...",style:{lineHeight:"1.6",textAlign:"justify"}}),fe&&s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase block mb-2",children:"English Output (Editable)"}),s.jsx(bu,{className:"w-full border border-indigo-200 rounded-md p-4 min-h-[100px] font-serif focus:ring-1 focus:ring-indigo-300 outline-none transition-all",dir:"ltr",value:((Y=e.translatedContent)==null?void 0:Y[N])||"",onChange:O=>ct(N,O.target.value),placeholder:"Translated text will appear here after Auto-Translate...",style:{lineHeight:"1.6",textAlign:"justify"}})]})]})]},N)})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs("button",{onClick:n,className:"flex items-center text-gray-600 px-4 py-2 hover:bg-gray-100 rounded",children:[s.jsx(Xl,{className:"mr-2 w-4 h-4"})," Back"]}),s.jsxs("button",{onClick:r,className:"flex items-center bg-lpBlue text-white px-6 py-2 rounded hover:bg-blue-900 transition",children:["Next Step ",s.jsx(Ut,{className:"ml-2 w-4 h-4"})]})]})]})]})},jg=({onClose:e,onSubmit:t,currentUser:n,favoriteProviders:r=[],onSaveFavorite:l})=>{const i=n.role==="LAWYER",[a,o]=b.useState(i?n.id:""),[c,p]=b.useState(""),[v,g]=b.useState(""),[y,T]=b.useState(null),[R,j]=b.useState([{id:It(),category:"EXPERT_OUR",serviceProvider:"",amount:""}]),[z,f]=b.useState([]),m=4,h=async()=>{if(!a||!v)return;let w=null;const X=Z=>t({lawyerId:a,instructions:c,odakanitNo:v,file:Z,worksheet:R,invoiceFiles:z});if(y){const Z=new FileReader;Z.onload=D=>{var V;w={name:y.name,type:y.type,data:((V=D.target)==null?void 0:V.result).split(",")[1]},X(w)},Z.readAsDataURL(y)}else X()},E=async w=>{const X=w.target.files;if(!X)return;if(z.length>=m){alert("   4 ."),w.target.value="";return}const Z=Array.from(X).slice(0,m-z.length),D=await Promise.all(Z.map(V=>new Promise(L=>{const q=new FileReader;q.onload=C=>{var W;return L({id:`inv-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,name:V.name,data:((W=C.target)==null?void 0:W.result).split(",")[1],type:V.type})},q.readAsDataURL(V)})));f(V=>[...V,...D]),w.target.value=""},A=w=>{f(X=>X.filter(Z=>Z.id!==w))},I=(w,X,Z)=>{j(D=>D.map(V=>V.id===w?{...V,[X]:Z}:V))},B=w=>{const X=sn.find(Z=>Z.type===w)||sn[0];j(Z=>[...Z,{id:It(),category:X.value,serviceProvider:"",amount:"",customLabel:""}])},H=w=>{j(X=>X.length===1?X:X.filter(Z=>Z.id!==w))},se=Ha(R,n),te=Zl(se);return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200]",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-96 animate-scale-in",children:[s.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-800",children:i?"  ":"Open New Finance Case"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500",children:"Internal Case # (Odakanit)"}),s.jsx("input",{className:"w-full border p-2 rounded",value:v,onChange:w=>g(w.target.value),placeholder:"e.g. 55492"})]}),!i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500",children:"Assign Lawyer"}),s.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:w=>o(w.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),tr.filter(w=>w.role==="LAWYER").map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500",children:"Instructions"}),s.jsx(Ls,{clientId:Os,children:s.jsx("textarea",{className:"w-full border p-2 rounded",rows:3,value:c,onChange:w=>p(w.target.value),placeholder:"Notes for lawyer..."})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500",children:"Attach Expenses File"}),s.jsx("input",{type:"file",onChange:w=>{var X;return T(((X=w.target.files)==null?void 0:X[0])||null)},className:"text-xs"})]}),s.jsxs("div",{className:"border rounded-lg p-3 bg-amber-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-xs font-bold text-amber-700",children:"Expense Worksheet"}),s.jsxs("div",{className:"flex gap-2 text-xs text-amber-700 font-semibold",children:[s.jsx("button",{type:"button",onClick:()=>B("EXPENSE"),className:"hover:underline",children:"+ Expense"}),s.jsx("button",{type:"button",onClick:()=>B("ADJUSTMENT"),className:"hover:underline",children:"+ Adjustment"})]})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-auto pr-1",children:R.map(w=>{const X=sn.find(L=>L.value===w.category),Z=(X==null?void 0:X.type)!=="ADJUSTMENT",D=r.filter(L=>L.category===w.category||L.category==="OTHER"),V=Ha([w],n)[0];return s.jsxs("div",{className:"border border-amber-100 bg-white rounded-lg p-2 space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-500",children:"Expense Details"}),s.jsx("select",{value:w.category,onChange:L=>I(w.id,"category",L.target.value),className:"w-full border rounded text-xs p-2",children:sn.map(L=>s.jsx("option",{value:L.value,children:L.label},L.value))})]}),w.category==="OTHER"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-500",children:"Custom Label"}),s.jsx("input",{className:"w-full border rounded text-xs p-2",placeholder:"Describe expense",value:w.customLabel||"",onChange:L=>I(w.id,"customLabel",L.target.value)})]}),Z&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-500",children:"Service Provider"}),s.jsx("input",{list:`provider-${w.id}`,className:"w-full border rounded text-xs p-2",placeholder:"Provider name",value:w.serviceProvider,onChange:L=>I(w.id,"serviceProvider",L.target.value)}),s.jsx("datalist",{id:`provider-${w.id}`,children:D.map(L=>s.jsx("option",{value:L.serviceProvider,children:L.label},L.id))}),s.jsx("button",{type:"button",onClick:()=>l&&w.serviceProvider.trim()&&l({id:It(),category:w.category,label:(V==null?void 0:V.label)||"Expense",serviceProvider:w.serviceProvider.trim()}),className:"text-[10px] text-amber-600 hover:underline mt-1",children:"Save to favorites"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-500",children:"Cost ()"}),s.jsx("input",{type:"number",min:"0",className:"w-full border rounded text-xs p-2",placeholder:"",value:w.amount,onChange:L=>I(w.id,"amount",L.target.value)})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{type:"button",onClick:()=>H(w.id),className:"text-[10px] text-red-500 hover:underline",children:"Remove"})})]},w.id)})}),s.jsxs("div",{className:"text-right text-xs font-bold text-amber-800 mt-2",children:["Total balance preview: ",te.totalBalance.toLocaleString()]})]}),s.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-700",children:"Tax Invoices (PDF / Word)"}),s.jsxs("span",{className:"text-[11px] text-gray-500",children:[z.length,"/",m]})]}),s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-24 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-white hover:bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(ql,{className:"w-6 h-6 text-gray-400 mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"   ( 4 )"})]}),s.jsx("input",{type:"file",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf",onChange:E})]}),s.jsxs("div",{className:"mt-2 space-y-2 max-h-32 overflow-auto",children:[z.map(w=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded border text-xs",children:[s.jsxs("span",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(ar,{className:"w-3 h-3 text-blue-500"}),w.name]}),s.jsx("button",{type:"button",onClick:()=>A(w.id),className:"text-red-400 hover:text-red-600",children:s.jsx(kt,{className:"w-3 h-3"})})]},w.id)),z.length===0&&s.jsx("p",{className:"text-xs text-gray-400 text-center",children:"   ."})]})]})]}),i&&s.jsx("p",{className:"text-xs text-gray-500",children:"    .    ."}),s.jsx("button",{onClick:h,className:"w-full bg-indigo-600 text-white py-2 rounded font-bold mt-2 hover:bg-indigo-700",children:i?"Create Personal Folder":"Create Folder"}),s.jsx("button",{onClick:e,className:"w-full text-gray-500 text-sm hover:underline mt-1",children:"Cancel"})]})]})})},Eg=({user:e,reports:t,onSelectReport:n,onNewReport:r,onLogout:l,onUpdateReport:i,onDeleteReport:a,onFinanceTaskCreate:o,caseTemplates:c=[],onStartTemplate:p,onStartNextReport:v,archiveAfterMs:g,favoriteProviders:y={},onSaveFavorite:T,onDeleteFavorite:R,onOpenWorksheet:j,onRequestReminder:z,onRequestNote:f,onSoftDeleteReport:m,onRestoreReport:h,notifications:E=[],showNotifications:A,setShowNotifications:I,onClearNotifications:B,dailySummaryOptIn:H,setDailySummaryOptIn:se,caseFolders:te,onOpenCaseFolder:w})=>{const X=e.role==="ADMIN"||e.role==="SUB_ADMIN"||e.role==="FINANCE",Z=e.role==="LAWYER"||e.role==="SUB_ADMIN"||e.role==="FINANCE",[D,V]=b.useState(!1),[L,q]=b.useState(!1),[C,W]=b.useState(!1),[G,fe]=b.useState(!1),[le,be]=b.useState({category:"EXPERT_OUR",label:"",provider:""}),[Pe,gt]=b.useState(""),[je,yt]=b.useState(null),Be=e.role==="ADMIN",Yt=e.role==="SUB_ADMIN"||e.role==="FINANCE";if(!X&&e.role==="LAWYER")return s.jsx(Hx,{user:e,reports:t,caseFolders:te||{},notifications:E,showNotifications:A,setShowNotifications:I,onClearNotifications:B,dailySummaryOptIn:H,setDailySummaryOptIn:se,archiveAfterMs:g,onSelectReport:n,onNewReport:r,onOpenCaseFolder:w,onLogout:l,deleteReportById:a});const vt=Date.now(),ct=g??Number.MAX_SAFE_INTEGER,on=d=>d.status==="SENT"&&d.sentAt&&vt-new Date(d.sentAt).getTime()>=ct,Je=X?t:t.filter(d=>d.createdBy===e.id),ut=Je.filter(on),Qt=Je.filter(d=>!on(d)&&!d.deletedAt),rt=Je.filter(d=>d.deletedAt&&vt-new Date(d.deletedAt).getTime()<cm),Gn=Je.filter(d=>!d.deletedAt),st=Be?Qt:Z?Gn:Je,cn=Be?ut:Z?rt:[],Nt=X?[]:t.filter(d=>d.status==="READY_TO_SEND"&&d.createdBy===e.id&&!d.deletedAt),qe=X?[]:t.filter(d=>["TASK_ASSIGNED","WAITING_FOR_INVOICES"].includes(d.status)&&d.createdBy===e.id&&!d.deletedAt),dt=d=>{var J;if((J=d.reportHistory)!=null&&J.length)return d.reportHistory;if(d.status==="SENT"){const ie=d.sentAt||d.reportDate||new Date().toISOString();return[{id:`${d.id}-legacy`,reportNumber:1,subject:`${d.insurerName||"Report"}${d.insuredName?` - ${d.insuredName}`:""}`,date:ie,sent:!0}]}return[]},Ge=X?[]:t.filter(d=>d.createdBy===e.id&&!d.deletedAt).flatMap(d=>{const J=dt(d);return J.length?J.map((ie,ae)=>{var we;return{parent:d,entry:ie,reportNumber:ie.reportNumber||ae+1,sentAt:ie.date||((we=ie.snapshot)==null?void 0:we.createdAt)||d.sentAt,isLatest:ae===J.length-1}}):[]}).sort((d,J)=>{const ie=d.sentAt?new Date(d.sentAt).getTime():0;return(J.sentAt?new Date(J.sentAt).getTime():0)-ie}),We=d=>{const J=dt(d),ie=J[J.length-1],ae=(ie==null?void 0:ie.date)||d.sentAt;return ae?new Date(ae).getTime():0},wt=X?[]:t.filter(d=>d.createdBy!==e.id||d.deletedAt||d.status!=="SENT"?!1:dt(d).length>0).sort((d,J)=>We(J)-We(d)),$=X?[]:[{id:"ready",title:"  ",subtitle:"    ",items:Nt,empty:"   .",actionLabel:" ",action:d=>n(d.id),tone:"border-red-100"},{id:"finance",title:"   ",subtitle:"  /   ",items:qe,empty:"   .",actionLabel:" ",action:d=>n(d.id),tone:"border-amber-100"},{id:"followup",title:"  ",subtitle:"        ",items:wt,empty:"    .",actionLabel:" ",action:v?d=>v(d.id):void 0,tone:"border-blue-100"},{id:"sent",title:" ",subtitle:"         ",items:Ge,empty:"     .",tone:"border-green-100"}],oe=X?t.filter(d=>d.odakanitNo&&!d.deletedAt):[],N=(y==null?void 0:y[e.id])||[],F=()=>{if(!le.provider.trim())return;const d=sn.find(ie=>ie.value===le.category),J=le.label.trim()||(d==null?void 0:d.label)||"Favorite provider";T&&T(e.id,{id:It(),category:le.category,label:J,serviceProvider:le.provider.trim()}),be({category:le.category,label:"",provider:""})},Y=d=>{R&&R(e.id,d)};c.filter(d=>d.ownerId===e.id);const O=t.filter(d=>Ru(d)&&!d.deletedAt),K=e.role==="FINANCE"||e.role==="SUB_ADMIN",ne=Be||Z,ee=Be?`Items move here ${g/(1e3*60*60)}h after sending and are deleted after ${om/(1e3*60*60*24)} days.`:Z?"     7    .":"",ge=O.filter(d=>!["READY_TO_SEND","SENT"].includes(d.status)),Me=O.filter(d=>d.status==="READY_TO_SEND"),ye=O.filter(d=>d.status==="SENT"),Ne=ye.reduce((d,J)=>d+Tu(J),0),ve=d=>d==="SENT"?"bg-green-100 text-green-700 border-green-200":d==="READY_TO_SEND"?"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-600 border-gray-200",Ee=d=>d==="READY_TO_SEND"?"READY TO SEND":d.replace(/_/g," "),He=d=>{i(d,{isPaid:!0})},Ke=C?cn:st,Ft=d=>{const J=d.createdBy||"unknown",ie=d.odakanitNo||d.marketRef||d.id||"unknown",ae=(d.plaintiffName||"unknown").toLowerCase();return`${J}::${ie}::${ae}`},de=K?Ke.filter(Ru):Ke,Bt=new Set((K?[]:Ke).map(d=>Ft(d))),un=!X&&!K?c.filter(d=>d.ownerId===e.id&&!Bt.has(d.caseKey)).map(d=>({id:`template-${d.caseKey}`,createdBy:d.ownerId,ownerName:d.ownerName,reportDate:d.lastUpdated,status:"TASK_ASSIGNED",recipientId:"1",insurerName:d.insurerName||"",lineSlipNo:d.lineSlipNo||"",marketRef:d.marketRef||"",insuredName:d.insuredName||"",plaintiffName:d.plaintiffName||"",plaintiffTitle:d.plaintiffTitle||"Plaintiff",odakanitNo:d.odakanitNo,selectedTimeline:"standard",filenameTag:Zf[0],selectedSections:["Update"],content:{},translatedContent:{},expertSummaryMode:{},invoiceFiles:[],isWaitingForInvoices:!1,isTranslated:!1,expensesItems:[],expenseWorksheet:Cn(),reportNotes:[],__templateKey:d.caseKey})):[],ur=K?de:[...de,...un],Xt=Pe.trim().toLowerCase(),dr=d=>Xt?`${d.odakanitNo||""} ${d.insuredName||""} ${d.plaintiffName||""} ${d.ownerName||""}`.toLowerCase().includes(Xt):!0,bn=Xt?ur.filter(dr):ur,dn=K?[]:(()=>{const d=new Map;return bn.forEach(J=>{if(J.__templateKey)return;const ie=J.odakanitNo||J.marketRef||J.insuredName||J.id,ae=J.reportDate?new Date(J.reportDate).getTime():0,we=d.get(ie);we?(we.reports.push(J),ae>we.latestDate&&(we.latestDate=ae),!we.caseLabel&&(J.insuredName||J.plaintiffName)&&(we.caseLabel=J.insuredName||J.plaintiffName||we.caseLabel),!we.insuredName&&J.insuredName&&(we.insuredName=J.insuredName),!we.plaintiffName&&J.plaintiffName&&(we.plaintiffName=J.plaintiffName)):d.set(ie,{key:ie,odakanitNo:J.odakanitNo||"",caseLabel:J.insuredName||J.plaintiffName||J.marketRef||"",insuredName:J.insuredName||"",plaintiffName:J.plaintiffName||"",reports:[J],latestDate:ae})}),Array.from(d.values()).sort((J,ie)=>ie.latestDate-J.latestDate)})(),Kn=d=>!["READY_TO_SEND","SENT"].includes(d.status),fr=d=>{if(!Kn(d)){alert("      -READY TO SEND  .");return}const J=d.insuredName||d.plaintiffName||d.odakanitNo||d.id;window.confirm(`  " "${J}"?    .`)&&a&&a(d.id)};return b.useEffect(()=>{je&&(dn.some(d=>d.key===je)||yt(null))},[je,dn]),s.jsxs("div",{className:"min-h-screen bg-gray-100 p-6 relative",children:[L&&s.jsx(cg,{onClose:()=>q(!1)}),D&&s.jsx(jg,{currentUser:e,onClose:()=>V(!1),onSubmit:d=>{o(d),V(!1)},favoriteProviders:y[e.id]||[],onSaveFavorite:d=>T&&T(e.id,d)}),G&&s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[200] p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(Qf,{className:"w-4 h-4 text-amber-500"}),"   "]}),s.jsx("button",{onClick:()=>fe(!1),className:"text-gray-500 hover:text-gray-800",children:s.jsx(kt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),s.jsx("select",{value:le.category,onChange:d=>be({...le,category:d.target.value}),className:"w-full border rounded text-sm p-2",children:sn.filter(d=>d.type==="EXPENSE").map(d=>s.jsx("option",{value:d.value,children:d.label},d.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),s.jsx("input",{className:"w-full border rounded text-sm p-2",value:le.label,onChange:d=>be({...le,label:d.target.value}),placeholder:":  "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),s.jsx("input",{className:"w-full border rounded text-sm p-2",value:le.provider,onChange:d=>be({...le,provider:d.target.value}),placeholder:'"  '})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("button",{onClick:F,className:"bg-amber-500 text-white px-4 py-2 rounded font-bold hover:bg-amber-600",children:" "})}),s.jsxs("div",{className:"max-h-64 overflow-y-auto border rounded-lg divide-y",children:[N.length===0&&s.jsx("p",{className:"text-sm text-gray-400 text-center py-6",children:"   ."}),N.map(d=>s.jsxs("div",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-gray-800",children:d.label}),s.jsx("p",{className:"text-xs text-gray-500",children:d.serviceProvider})]}),s.jsx("button",{onClick:()=>Y(d.id),className:"text-xs text-red-500 hover:underline",children:""})]},d.id))]})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-serif font-bold text-lpBlue",children:"Lior Perry Law Office"}),s.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",s.jsx("span",{className:"font-bold",children:e.name})," (",e.role,")"]})]}),s.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-end",children:[ne&&s.jsxs("button",{onClick:()=>W(d=>!d),className:`flex items-center px-4 py-2 rounded shadow text-sm font-bold ${C?"bg-gray-300 text-gray-800":"bg-gray-200 text-gray-700"} hover:bg-gray-300`,children:[s.jsx(nn,{className:"w-4 h-4 mr-2"})," ",C?"Back to Reports":`Recycle Bin (${cn.length})`]}),s.jsxs("button",{onClick:()=>V(!0),className:"flex items-center bg-indigo-600 text-white px-4 py-2 rounded shadow hover:bg-indigo-700 font-bold",children:[s.jsx(Vo,{className:"w-4 h-4 mr-2"})," Open New Case Folder"]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>I(d=>!d),className:"flex items-center text-blue-600 bg-blue-50 px-3 py-2 rounded hover:bg-blue-100 relative",children:[s.jsx(Ql,{className:"w-4 h-4 mr-2"})," Notifications",E.length>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full px-1",children:E.length})]}),A&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-gray-200 shadow-xl rounded-lg z-50",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[s.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Smart Notifications"}),s.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:H,onChange:d=>se(d.target.checked)}),"Daily summary"]})]}),s.jsxs("div",{className:"max-h-64 overflow-auto divide-y",children:[E.length===0&&s.jsx("div",{className:"p-4 text-xs text-gray-400 text-center",children:"No notifications yet."}),E.map(d=>s.jsxs("div",{className:"p-3 text-sm",children:[s.jsx("p",{className:"font-medium text-gray-800",children:d.message}),s.jsx("p",{className:"text-[10px] text-gray-400",children:new Date(d.createdAt).toLocaleString()})]},d.id))]}),s.jsx("div",{className:"px-3 py-2 text-right text-xs",children:s.jsx("button",{onClick:B,className:"text-red-500 hover:underline",children:"Clear all"})})]})]}),s.jsxs("button",{onClick:()=>q(!0),className:"flex items-center text-blue-600 bg-blue-50 px-3 py-2 rounded hover:bg-blue-100",children:[s.jsx(Wo,{className:"w-4 h-4 mr-2"})," "]}),!1,s.jsxs("button",{onClick:l,className:"flex items-center text-red-600 hover:bg-red-50 px-4 py-2 rounded",children:[s.jsx(Gf,{className:"w-4 h-4 mr-2"})," Logout"]})]})]}),X&&s.jsx(ug,{reports:t,currentUser:e,onMarkPaid:He}),Yt&&s.jsxs("div",{className:"mb-8 bg-white border border-amber-200 rounded-2xl shadow p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-700 flex items-center gap-2",children:[s.jsx(Kf,{className:"w-5 h-5"})," Expenses Overview"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Tracking all reports that include expense tables."})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsx("button",{onClick:()=>fe(!0),className:"text-xs text-amber-700 underline hover:text-amber-900",children:"Manage Favorite Providers"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Assigned to Lawyers"}),s.jsx("p",{className:"text-xl font-bold text-amber-700",children:ge.length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Waiting for Lior"}),s.jsx("p",{className:"text-xl font-bold text-blue-600",children:Me.length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Sent to Insurer"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:ye.length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Total Sent Balance"}),s.jsxs("p",{className:"text-xl font-bold text-green-700",children:["",Ne.toLocaleString()]})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-amber-50 text-amber-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 text-left",children:"Case / Lawyer"}),s.jsx("th",{className:"p-2 text-left",children:"Status"}),s.jsx("th",{className:"p-2 text-right",children:"Total Balance ()"}),s.jsx("th",{className:"p-2 text-right",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y",children:[O.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-400",children:"No expense reports yet."})}),O.map(d=>s.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[s.jsxs("td",{className:"p-2",children:[s.jsx("div",{className:"font-semibold text-gray-800",children:d.insuredName||"Unnamed Case"}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Lawyer: ",d.ownerName]})]}),s.jsx("td",{className:"p-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide shadow-sm border ${ve(d.status)}`,children:Ee(d.status)})}),s.jsxs("td",{className:"p-2 text-right font-bold",children:["",Tu(d).toLocaleString()]}),s.jsx("td",{className:"p-2 text-right",children:s.jsx("button",{onClick:()=>n(d.id),className:"text-lpBlue hover:underline text-xs font-bold",children:"Open"})})]},`expense-${d.id}`))]})]})})]}),!X&&$.length>0&&s.jsx("div",{className:"space-y-6 mb-8",children:$.map(d=>s.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm",children:[s.jsx("div",{className:"flex flex-wrap justify-between items-center gap-3 px-4 py-3 border-b",children:s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800",children:d.title}),s.jsx("p",{className:"text-sm text-gray-500",children:d.subtitle})]})}),d.items.length===0?s.jsx("div",{className:"p-6 text-center text-gray-400 text-sm",children:d.empty}):s.jsx("div",{className:"p-4 space-y-3",children:d.items.map(J=>{var we;if(d.id==="sent"){const he=J,Rt=he.sentAt?new Date(he.sentAt).toLocaleDateString("he-IL"):"",Jt=he.isLatest&&he.parent.status==="SENT"&&typeof v=="function",Gr=he.isLatest&&he.parent.status!=="SENT";return s.jsxs("div",{className:`border ${d.tone} rounded-xl p-4`,children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"font-bold text-gray-900",children:he.parent.odakanitNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"font-bold text-gray-900",children:he.parent.insuredName||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:he.parent.plaintiffTitle}),s.jsx("p",{className:"font-bold text-gray-900",children:he.parent.plaintiffName||""})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs uppercase text-gray-400",children:[" #",he.reportNumber]}),s.jsx("p",{className:"font-bold text-gray-900",children:Rt})]})]}),s.jsxs("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold text-gray-800",children:":"})," ",he.entry.subject||""]}),he.entry.fileName&&s.jsxs("p",{className:"text-xs text-gray-500",children:[" : ",he.entry.fileName]})]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-end",children:[Jt&&v&&s.jsx("button",{onClick:()=>v(he.parent.id),className:"px-4 py-2 rounded-full bg-lpBlue text-white text-sm font-semibold hover:bg-blue-900",children:" "}),Gr&&s.jsx("span",{className:"text-xs text-gray-500 font-semibold px-3 py-1 rounded-full bg-gray-100",children:"  "})]})]},`${he.parent.id}-${he.entry.id}`)}const ie=J,ae=(((we=ie.reportHistory)==null?void 0:we.length)||0)+1;return s.jsxs("div",{className:`border ${d.tone} rounded-xl p-4`,children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"font-bold text-gray-900",children:ie.odakanitNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"font-bold text-gray-900",children:ie.plaintiffName||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"font-bold text-gray-900",children:ie.insuredName||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsxs("p",{className:"font-bold text-gray-900",children:["#",ae]})]})]}),d.id==="followup"&&s.jsx("div",{className:"mt-2 text-xs text-gray-500",children:(()=>{var Jt;const he=(Jt=ie.reportHistory)==null?void 0:Jt[ie.reportHistory.length-1],Rt=he!=null&&he.date?new Date(he.date).toLocaleDateString("he-IL"):ie.sentAt?new Date(ie.sentAt).toLocaleDateString("he-IL"):"";return`  : #${(he==null?void 0:he.reportNumber)||ae-1}  ${Rt}`})()}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-end",children:[d.id==="finance"&&Kn(ie)&&s.jsxs("button",{onClick:()=>fr(ie),className:"px-3 py-2 rounded-full border border-red-200 text-red-600 text-sm font-semibold flex items-center gap-1 hover:bg-red-50",title:"  ",children:[s.jsx(nn,{className:"w-4 h-4"}),""]}),d.action&&s.jsx("button",{onClick:()=>d.action&&d.action(ie),className:"px-4 py-2 rounded-full bg-lpBlue text-white text-sm font-semibold hover:bg-blue-900",children:d.actionLabel})]})]},ie.id)})})]},d.id))}),X&&s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex justify-between items-end mb-4",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[s.jsx(zo,{className:"w-6 h-6 mr-2 text-indigo-600"})," Active Case Folders"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[oe.length===0&&s.jsx("p",{className:"text-gray-400 italic col-span-3 text-center py-4",children:"No active finance folders."}),oe.map(d=>{var ae;const J=(()=>{switch(d.status){case"WAITING_FOR_INVOICES":return{badge:"bg-yellow-50 text-yellow-700",text:"Awaiting Finance Finalize",icon:s.jsx(rn,{className:"text-yellow-500 w-5 h-5 animate-spin"})};case"TASK_ASSIGNED":return{badge:"bg-blue-50 text-blue-700",text:"Pending Lawyer Action",icon:s.jsx($o,{className:"text-blue-500 w-5 h-5"})};case"READY_TO_SEND":return{badge:"bg-orange-50 text-orange-700",text:"Waiting for Lior",icon:s.jsx(rn,{className:"text-orange-500 w-5 h-5 animate-spin"})};case"SENT":return{badge:"bg-green-50 text-green-700",text:"Completed",icon:s.jsx(Uf,{className:"text-green-500 w-6 h-6"})};default:return{badge:"bg-gray-50 text-gray-600",text:d.status,icon:s.jsx(rn,{className:"text-gray-400 w-5 h-5 animate-spin"})}}})(),ie=(ae=tr.find(we=>we.id===d.createdBy))==null?void 0:ae.name;return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-t-4 relative border-indigo-100",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("h4",{className:"font-bold text-lg",children:["Case #",d.odakanitNo]}),J.icon]}),s.jsxs("div",{className:"text-sm text-gray-600 mb-1 flex items-center",children:[s.jsx(mx,{className:"w-4 h-4 mr-1"})," Assigned to: ",ie]}),s.jsx("div",{className:"text-xs text-gray-500 mb-4",children:new Date(d.reportDate).toLocaleDateString()}),s.jsx("div",{className:"flex justify-end gap-2 mt-2",children:d.status==="SENT"?s.jsxs("button",{onClick:()=>a(d.id),className:"text-red-500 hover:bg-red-50 px-3 py-1 rounded text-sm flex items-center",children:[s.jsx(nn,{className:"w-4 h-4 mr-1"})," Delete Folder"]}):s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${J.badge}`,children:J.text})})]},d.id)})]})]}),(X||K)&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 flex flex-wrap gap-3 items-center justify-between",children:[s.jsxs("h3",{className:"font-bold text-gray-700 flex items-center",children:[s.jsx(za,{className:"w-4 h-4 mr-2 text-gray-400"})," ",C?"Recycle Bin":"All Reports"]}),s.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-end",children:[C&&ee&&s.jsx("span",{className:"text-xs text-gray-500",children:ee}),s.jsxs("div",{className:"relative w-full sm:w-72",children:[s.jsx(Yf,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{value:Pe,onChange:d=>gt(d.target.value),placeholder:"     ",className:"w-full border border-gray-300 rounded-full pl-9 pr-10 py-1.5 text-sm focus:ring-2 focus:ring-blue-200 outline-none"}),Pe&&s.jsx("button",{onClick:()=>gt(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500",children:s.jsx(kt,{className:"w-4 h-4"})})]})]})]}),K?s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-500 text-xs uppercase tracking-wider font-semibold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Insurer / Subject"}),X&&s.jsx("th",{className:"p-4",children:"Lawyer"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[bn.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:X?4:3,className:"p-6 text-center text-gray-400 text-sm",children:Xt?"    .":"  ."})}),bn.map(d=>{const J=d.status==="READY_TO_SEND",ie=d.status==="SENT",ae=!!d.__templateKey;return s.jsxs("tr",{className:`transition cursor-default ${J?"bg-red-50":ie?"bg-green-50/50":"hover:bg-blue-50/30"}`,children:[s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-bold text-gray-800",children:d.insurerName||"Untitled"}),s.jsxs("div",{className:"text-xs text-gray-500",children:[d.marketRef," ",d.insuredName?` - ${d.insuredName}`:""]})]}),X&&s.jsx("td",{className:"p-4 text-sm text-gray-600 font-medium",children:d.ownerName}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide shadow-sm border ${ve(d.status)}`,children:Ee(d.status)})}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2 flex-wrap",children:[s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>j(d.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded flex items-center gap-1",children:[s.jsx(Xf,{className:"w-3 h-3"})," View Expenses"]}),s.jsxs("button",{onClick:()=>z(d),className:"text-xs bg-blue-50 text-blue-700 hover:bg-blue-100 px-3 py-1.5 rounded flex items-center gap-1",children:[s.jsx(Ql,{className:"w-3 h-3"})," Reminder"]}),s.jsxs("button",{onClick:()=>f(d),className:"text-xs bg-purple-50 text-purple-700 hover:bg-purple-100 px-3 py-1.5 rounded flex items-center gap-1",children:[s.jsx(Uo,{className:"w-3 h-3"})," Add Note"]})]}),Z&&!Be&&!C&&s.jsxs("button",{onClick:()=>!ae&&m(d.id),disabled:ae,className:`text-xs px-3 py-1.5 rounded flex items-center gap-1 ${ae?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-700 hover:bg-red-100"}`,children:[s.jsx(nn,{className:"w-3 h-3"})," Delete"]}),C&&s.jsxs(s.Fragment,{children:[Be&&s.jsx("button",{onClick:()=>i(d.id,{sentAt:new Date().toISOString()}),className:"text-green-600 hover:bg-green-50 px-3 py-1.5 rounded text-sm font-bold",children:"Restore"}),!Be&&Z&&s.jsx("button",{onClick:()=>h(d.id),className:"text-green-600 hover:bg-green-50 px-3 py-1.5 rounded text-sm font-bold",children:"Restore"})]})]})})]},d.id)})]})]}):s.jsx("div",{children:dn.length===0?s.jsx("div",{className:"p-6 text-center text-gray-400 text-sm",children:Xt?"    .":"  ."}):s.jsx("div",{className:"divide-y divide-gray-100",children:dn.map(d=>{const J=d.latestDate?new Date(d.latestDate).toLocaleDateString("he-IL"):"-",ie=[...d.reports].sort((ae,we)=>{const he=ae.reportDate?new Date(ae.reportDate).getTime():0;return(we.reportDate?new Date(we.reportDate).getTime():0)-he});return s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex flex-wrap justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:" "}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:d.odakanitNo||""}),s.jsxs("p",{className:"text-xs text-gray-500",children:[" : ",s.jsx("span",{className:"font-semibold",children:d.plaintiffName||""}),"   : ",s.jsx("span",{className:"font-semibold",children:d.insuredName||""})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[" : ",J]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-500",children:'" '}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.reports.length}),s.jsx("button",{onClick:()=>yt(ae=>ae===d.key?null:d.key),className:"mt-2 px-4 py-1.5 text-sm font-semibold rounded-full border border-gray-300 text-gray-700 hover:bg-gray-100",children:je===d.key?" ":" "})]})]}),je===d.key&&s.jsx("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-xl overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-100 text-gray-600 text-xs uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left",children:" "}),s.jsx("th",{className:"p-3 text-left",children:" "}),s.jsx("th",{className:"p-3 text-left",children:" "}),s.jsx("th",{className:"p-3 text-left",children:""}),s.jsx("th",{className:"p-3 text-right",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:ie.map(ae=>{const we=ae.status==="READY_TO_SEND",he=ae.status==="SENT",Rt=!!ae.__templateKey;return s.jsxs("tr",{className:`bg-white ${we?"bg-red-50":he?"bg-green-50/60":""}`,children:[s.jsx("td",{className:"p-3",children:ae.reportDate?new Date(ae.reportDate).toLocaleDateString("he-IL"):""}),s.jsx("td",{className:"p-3",children:ae.plaintiffName||""}),s.jsx("td",{className:"p-3",children:ae.insuredName||""}),s.jsx("td",{className:"p-3",children:s.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide shadow-sm border ${ve(ae.status)}`,children:Ee(ae.status)})}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2 flex-wrap",children:[s.jsxs("button",{onClick:()=>n(ae.id),className:"text-lpBlue hover:bg-blue-50 px-3 py-1.5 rounded transition font-bold text-xs flex items-center",children:["Open ",s.jsx(Ut,{className:"w-3 h-3 ml-1"})]}),Z&&!Be&&!C&&s.jsxs("button",{onClick:()=>!Rt&&m(ae.id),disabled:Rt,className:`text-xs px-3 py-1.5 rounded flex items-center gap-1 ${Rt?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-700 hover:bg-red-100"}`,children:[s.jsx(nn,{className:"w-3 h-3"})," Delete"]}),C&&s.jsxs(s.Fragment,{children:[Be&&s.jsx("button",{onClick:()=>i(ae.id,{sentAt:new Date().toISOString()}),className:"text-green-600 hover:bg-green-50 px-3 py-1.5 rounded text-xs font-bold",children:"Restore"}),!Be&&Z&&s.jsx("button",{onClick:()=>h(ae.id),className:"text-green-600 hover:bg-green-50 px-3 py-1.5 rounded text-xs font-bold",children:"Restore"})]})]})})]},ae.id)})})]})})]},d.key)})})})]}),!X&&s.jsx("div",{className:"fixed bottom-8 right-8",children:s.jsx("button",{onClick:r,className:"bg-lpBlue text-white p-4 rounded-full shadow-xl hover:bg-blue-900 transition transform hover:scale-110",children:s.jsx(lx,{className:"w-6 h-6"})})})]})]})},kg=({onLogin:e})=>{const[t,n]=b.useState(""),[r,l]=b.useState(""),i=()=>{const a=tr.find(o=>o.username===t&&o.password===r);a?e(a):alert("Invalid credentials. Try: lior/lior123")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-gradient-to-b from-[#08162c] via-[#0b1f3b] to-[#132d52]",children:s.jsxs("div",{className:"w-full max-w-sm bg-white/10 border border-white/15 rounded-[30px] p-10 text-center shadow-2xl backdrop-blur-lg",children:[s.jsx("div",{className:"mx-auto mb-6 h-20 w-20 rounded-full bg-gradient-to-br from-[#f8b733] via-[#f49e1b] to-[#f47b0a] flex items-center justify-center text-4xl font-bold text-[#16305b] shadow-lg",children:"LP"}),s.jsx("div",{className:"text-sm tracking-[0.5em] text-[#f7b23a] uppercase mb-2",children:"Lloyd's"}),s.jsx("div",{className:"text-3xl font-serif text-white mb-1",children:"REPORT"}),s.jsx("div",{className:"text-xs text-blue-200 uppercase tracking-[0.4em] mb-8",children:"Builder System"}),s.jsxs("div",{className:"space-y-4 text-left",children:[s.jsx("label",{className:"text-xs uppercase text-blue-200 tracking-[0.2em]",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx(px,{className:"w-4 h-4 text-blue-200 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{className:"w-full bg-white/10 border border-white/20 rounded-full py-3 pl-10 pr-4 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-[#f7b23a]/60",placeholder:"Username",value:t,onChange:a=>n(a.target.value)})]}),s.jsx("label",{className:"text-xs uppercase text-blue-200 tracking-[0.2em]",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ax,{className:"w-4 h-4 text-blue-200 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{type:"password",className:"w-full bg-white/10 border border-white/20 rounded-full py-3 pl-10 pr-4 text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-[#f7b23a]/60",placeholder:"Password",value:r,onChange:a=>l(a.target.value)})]})]}),s.jsxs("button",{onClick:i,className:"mt-8 w-full bg-gradient-to-r from-[#0a6bff] to-[#1740e6] text-white py-3 rounded-full font-semibold tracking-wide flex items-center justify-center gap-2 hover:from-[#0955c6] hover:to-[#1430af] transition-colors",children:["Sign In ",s.jsx($o,{className:"w-4 h-4"})]}),s.jsx("div",{className:"mt-6 text-[11px] text-blue-200 tracking-[0.3em] uppercase",children:"Lior Perry Law Office & Notary  2024"})]})})},Cg=()=>{var ec;const[e,t]=b.useState(()=>gg()),[n,r]=b.useState(()=>yg()),[l,i]=b.useState(()=>xg()),[a,o]=b.useState(null),c=b.useRef(!1),[p,v]=b.useState([]),[g,y]=b.useState(!1);e==null||e.role;const[T,R]=b.useState([]),[j,z]=b.useState(!1),[f,m]=b.useState(!1),[h,E]=b.useState([]),[A,I]=b.useState(null),[B,H]=b.useState(()=>{if(typeof window>"u")return{};try{const u=localStorage.getItem("favoriteProviders");return u?JSON.parse(u):{}}catch(u){return console.error("Failed to load favorite providers",u),{}}}),[se,te]=b.useState(null),[w,X]=b.useState(""),[Z,D]=b.useState(null),[V,L]=b.useState(""),[q,C]=b.useState("LAWYER"),[W,G]=b.useState(!1),[fe,le]=b.useState(!1),[be,Pe]=b.useState(!1),[gt,je]=b.useState(!1),[yt,Be]=b.useState(!1),[Yt,vt]=b.useState(()=>{if(typeof window>"u")return[];try{const u=localStorage.getItem("caseTemplates");return u?JSON.parse(u):[]}catch(u){return console.error("Failed to load case templates",u),[]}}),[ct,on]=b.useState(null);b.useEffect(()=>{typeof window>"u"||Yx()||l.length&&ut(u=>{const x=Gx(u,l);return rs(x),Kx(),x})},[l]);const[Je,ut]=b.useState(()=>Vx());b.useEffect(()=>{n!=="PREVIEW"&&y(!1)},[n]);const Qt=u=>u.deletedAt?Date.now()-new Date(u.deletedAt).getTime()>=cm:u.status==="SENT"&&u.sentAt?Date.now()-new Date(u.sentAt).getTime()>=om:!1;b.useEffect(()=>{const u=()=>{i(S=>S.filter(k=>!Qt(k)))};u();const x=setInterval(u,60*60*1e3);return()=>clearInterval(x)},[]),b.useEffect(()=>{if(!f)return;const u=setInterval(()=>{if(!l.length)return;const x=l.filter(_=>_.status==="READY_TO_SEND").length,S=l.filter(_=>_.status==="SENT").length,k=`Daily summary: ${x} ready to send, ${S} sent reports.`;R(_=>[{id:`daily-${Date.now()}`,message:k,createdAt:new Date().toISOString(),severity:"info"},..._])},1e3*60*60*12);return()=>clearInterval(u)},[f,l]),b.useEffect(()=>{try{localStorage.setItem("caseTemplates",JSON.stringify(Yt))}catch(u){console.error("Failed to persist case templates",u)}},[Yt]),b.useEffect(()=>{try{localStorage.setItem("favoriteProviders",JSON.stringify(B))}catch(u){console.error("Failed to persist favorites",u)}},[B]),b.useEffect(()=>{if(!(typeof window>"u"))try{localStorage.setItem(Ae.REPORTS,JSON.stringify(l))}catch(u){console.error("Failed to persist reports",u)}},[l]),b.useEffect(()=>{typeof window>"u"||(e?localStorage.setItem(Ae.USER,e.username):localStorage.removeItem(Ae.USER))},[e]),b.useEffect(()=>{typeof window>"u"||localStorage.setItem(Ae.VIEW,n)},[n]),b.useEffect(()=>{typeof window>"u"||(a?localStorage.setItem(Ae.CURRENT_REPORT,a.id):localStorage.removeItem(Ae.CURRENT_REPORT))},[a]),b.useEffect(()=>{if(typeof window>"u"||c.current)return;const u=localStorage.getItem(Ae.CURRENT_REPORT);if(!u){c.current=!0;return}const x=l.find(S=>S.id===u);x&&o(x),c.current=!0},[l,e]),b.useEffect(()=>{n!=="DASHBOARD"&&(a||(r("DASHBOARD"),typeof window<"u"&&(localStorage.setItem(Ae.VIEW,"DASHBOARD"),localStorage.removeItem(Ae.CURRENT_REPORT))))},[a,n]);const rt=()=>({id:Date.now().toString(),createdBy:e.id,ownerName:e.name,ownerEmail:e.email,reportDate:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"DRAFT",reportSubject:"",recipientId:"1",insurerName:"",lineSlipNo:"",marketRef:"",certificateRef:"",insuredName:"",plaintiffName:"",plaintiffTitle:"Plaintiff",policyPeriodStart:"",policyPeriodEnd:"",retroStart:"",retroEnd:"",sentAt:void 0,reportHistory:[],selectedTimeline:"standard",filenameTag:Zf[0],selectedSections:["Update","Recommendations"],content:{},translatedContent:{},invoiceFiles:[],isWaitingForInvoices:!1,requiresExpenses:!1,isTranslated:!1,expensesItems:[],expenseWorksheet:Cn(),reportNotes:[],complaintAnalysis:void 0,attachPolicyAsAppendix:!0}),Gn=u=>{const x=u.createdBy||"unknown",S=u.odakanitNo||u.marketRef||u.id,k=(u.plaintiffName||"unknown").toLowerCase();return`${x}::${S}::${k}`},st=u=>{const x=Gn(u),S={caseKey:x,ownerId:u.createdBy,ownerName:u.ownerName,odakanitNo:u.odakanitNo,plaintiffName:u.plaintiffName,plaintiffTitle:u.plaintiffTitle,insurerName:u.insurerName,lineSlipNo:u.lineSlipNo,marketRef:u.marketRef,certificateRef:u.certificateRef,insuredName:u.insuredName,policyPeriodStart:u.policyPeriodStart,policyPeriodEnd:u.policyPeriodEnd,retroStart:u.retroStart,retroEnd:u.retroEnd,lastUpdated:new Date().toISOString()};vt(k=>k.find(U=>U.caseKey===x)?k.map(U=>U.caseKey===x?S:U):[...k,S])},cn=u=>{if(!e)return;const x=Yt.find(k=>k.caseKey===u&&k.ownerId===e.id);if(!x)return;const S={...rt(),odakanitNo:x.odakanitNo||"",insurerName:x.insurerName||"",lineSlipNo:x.lineSlipNo||"",marketRef:x.marketRef||"",certificateRef:x.certificateRef||"",insuredName:x.insuredName||"",plaintiffName:x.plaintiffName||"",plaintiffTitle:x.plaintiffTitle||"Plaintiff",policyPeriodStart:x.policyPeriodStart||"",policyPeriodEnd:x.policyPeriodEnd||"",retroStart:x.retroStart||"",retroEnd:x.retroEnd||""};o(S),r("STEP1")},Nt=u=>{var qt;if(!e)return;const x=qe(u);if(!x||x.createdBy!==e.id||(((qt=x.reportHistory)==null?void 0:qt.length)||0)===0||x.status!=="SENT")return;const S=x.reportHistory[x.reportHistory.length-1];if(!S)return;const _=S.snapshot||x,U=_.selectedSections&&_.selectedSections.length?[..._.selectedSections]:[...x.selectedSections||[]],pe=U.length?U:["Update","Recommendations"],ue=new Date().toISOString(),re={...x,reportDate:ue,updatedAt:ue,status:"DRAFT",sentAt:void 0,reportNotes:[],content:{},translatedContent:{},executiveSummary:void 0,complaintAnalysis:void 0,expensesItems:[],expensesSum:void 0,paymentRecommendation:void 0,expenseWorksheet:Cn(),invoiceFiles:[],expensesSourceFile:void 0,requiresExpenses:!1,isWaitingForInvoices:!1,isTranslated:!1,selectedEmailTemplate:void 0,emailBodyDraft:void 0,fileNameTitles:[],deletedAt:void 0,deletedBy:void 0,selectedSections:pe,reportHistory:[...x.reportHistory||[]]};re.insurerName=_.insurerName||"",re.lineSlipNo=_.lineSlipNo||"",re.marketRef=_.marketRef||"",re.certificateRef=_.certificateRef||"",re.insuredName=_.insuredName||"",re.plaintiffName=_.plaintiffName||"",re.plaintiffTitle=_.plaintiffTitle||x.plaintiffTitle,re.policyPeriodStart=_.policyPeriodStart||"",re.policyPeriodEnd=_.policyPeriodEnd||"",re.retroStart=_.retroStart||"",re.retroEnd=_.retroEnd||"",re.filenameTag=_.filenameTag||re.filenameTag,re.fileNameTitles=[],re.selectedTimeline=_.selectedTimeline||re.selectedTimeline,re.selectedTimelineImage=_.selectedTimelineImage,re.odakanitNo=_.odakanitNo||x.odakanitNo,re.recipientId=_.recipientId||x.recipientId,i(mr=>mr.map(At=>At.id===x.id?re:At)),o(re),st(re),r("STEP1")},qe=u=>l.find(x=>x.id===u),dt=(u,x)=>{if(u.status!==x.status||u.hebrewWorkflowStatus!==x.hebrewWorkflowStatus||u.insuredName!==x.insuredName||u.plaintiffName!==x.plaintiffName||u.insurerName!==x.insurerName||u.odakanitNo!==x.odakanitNo||u.marketRef!==x.marketRef||u.lineSlipNo!==x.lineSlipNo||u.certificateRef!==x.certificateRef||u.policyPeriodStart!==x.policyPeriodStart||u.policyPeriodEnd!==x.policyPeriodEnd||u.retroStart!==x.retroStart||u.retroEnd!==x.retroEnd||u.reportSubject!==x.reportSubject||u.executiveSummary!==x.executiveSummary)return!0;const S=(k,_)=>JSON.stringify(k)===JSON.stringify(_);return!S(u.content,x.content)||!S(u.translatedContent,x.translatedContent)||!S(u.expenseWorksheet,x.expenseWorksheet)||!S(u.expensesItems,x.expensesItems)||u.expensesSum!==x.expensesSum||u.paymentRecommendation!==x.paymentRecommendation||!S(u.complaintAnalysis,x.complaintAnalysis)||!S(u.reportReview,x.reportReview)},Ge=(u,x)=>{u.odakanitNo&&ut(S=>{const k=Wa(S,u,x);return rs(k),k})},We=(u,x,S,k)=>{u.odakanitNo&&ut(_=>{const U=lm(_,u,x,S,k);return rs(U),U})},wt=(u,x)=>{const S=u.reportReview??{status:"DRAFT",issues:[]};return{...u,reportReview:x(S)}},$=u=>{O(u,x=>{const S=(e==null?void 0:e.id)||"unknown",k=new Date().toISOString();return{...wt(x,U=>({...U,status:"SUBMITTED",submittedAt:k,submittedByUserId:U.submittedByUserId||S})),hebrewWorkflowStatus:"HEBREW_SUBMITTED"}})},oe=u=>{(e==null?void 0:e.role)==="ADMIN"&&O(u,x=>{const S=(e==null?void 0:e.id)||"unknown",k=new Date().toISOString();return{...wt(x,U=>({...U,status:"APPROVED",reviewedAt:k,reviewedByUserId:S})),hebrewWorkflowStatus:"HEBREW_APPROVED"}})},N=(u,x)=>{x.length&&O(u,S=>{const k=(e==null?void 0:e.id)||"unknown",_=new Date().toISOString();return{...wt(S,pe=>({...pe,status:"CHANGES_REQUESTED",reviewedAt:_,reviewedByUserId:k,issues:[...pe.issues,...x.map(ue=>({id:`issue-${Date.now()}-${Math.random().toString(36).slice(2)}`,createdAt:_,createdByUserId:k,sectionKey:ue.sectionKey,severity:ue.severity,type:ue.type,title:ue.title,instruction:ue.instruction,status:"OPEN"}))]})),hebrewWorkflowStatus:"HEBREW_CHANGES_REQUESTED"}})},F=(u,x)=>{O(u,S=>{const k=new Date().toISOString();return wt(S,_=>({..._,issues:_.issues.map(U=>U.id===x&&U.status!=="DONE"?{...U,status:"DONE",doneAt:k}:U)}))})},Y=u=>{var S;return u?((S=u.reportReview)==null?void 0:S.status)==="APPROVED"||u.hebrewWorkflowStatus==="HEBREW_APPROVED":!1},O=(u,x)=>{const S=new Date().toISOString();let k=null,_=null;if(i(U=>U.map(pe=>{if(pe.id!==u)return pe;const ue=x(pe);return k=pe,_=ue,dt(pe,ue)?{...ue,updatedAt:S}:ue})),k&&_&&k.odakanitNo&&_.odakanitNo){const U=k.odakanitNo.trim(),pe=_.odakanitNo.trim();U&&pe&&U!==pe&&ut(ue=>{let re={...ue};const qt=re[U];if(qt){const mr=qt.reportIds.filter(At=>At!==_.id);re[U]={...qt,reportIds:mr}}return re=Wa(re,_,S),rs(re),re})}o(U=>{if(!U||U.id!==u)return U;const pe=x(U);return dt(U,pe)?{...pe,updatedAt:S}:pe})},K=(u,x,S)=>{x.length&&(e==null?void 0:e.role)==="ADMIN"&&O(u,k=>{const _=(e==null?void 0:e.id)||"unknown",U=new Date().toISOString();return{...wt(k,ue=>({...ue,status:"CHANGES_REQUESTED",reviewedAt:U,reviewedByUserId:_,issues:[...ue.issues,...x.map(re=>({id:`issue-${Date.now()}-${Math.random().toString(36).slice(2)}`,createdAt:U,createdByUserId:_,sectionKey:re.sectionKey,severity:re.severity,type:re.type,title:re.title,instruction:re.instruction,status:"OPEN",origin:"EXTERNAL",externalRefId:S,externalAction:re.externalAction??"ENGLISH_ONLY"}))]})),postSendFeedbackMeta:{...k.postSendFeedbackMeta||{},lastFeedbackAt:U}}})},ne=u=>{(e==null?void 0:e.role)==="ADMIN"&&O(u,x=>{const S=new Date().toISOString(),k=x.reportReview??{status:"DRAFT",issues:[]};return{...x,hebrewWorkflowStatus:"HEBREW_REOPENED_EXTERNAL",reportReview:{...k,status:k.status==="CHANGES_REQUESTED"?k.status:"CHANGES_REQUESTED"},postSendFeedbackMeta:{...x.postSendFeedbackMeta||{},reopenedDueToFeedbackAt:S}}})},ee=u=>{R(x=>[u,...x])},ge=u=>{E(x=>x.some(S=>S.reportId===u)?x:[...x,{reportId:u}]),I(u)},Me=u=>{E(x=>x.filter(S=>S.reportId!==u)),I(x=>x===u?null:x)},ye=(u,x)=>{H(S=>{const k=S[u]||[];return k.some(_=>_.serviceProvider.toLowerCase()===x.serviceProvider.toLowerCase()&&_.category===x.category)?S:{...S,[u]:[x,...k]}})},Ne=(u,x)=>{H(S=>{const k=S[u]||[];return{...S,[u]:k.filter(_=>_.id!==x)}})},ve=u=>{if(a){const x=a,S={...a,...u},k=dt(x,S);o(k?{...S,updatedAt:new Date().toISOString()}:S)}},Ee=()=>{a&&i(u=>{const S=u.find(k=>k.id===a.id)?u.map(k=>k.id===a.id?a:k):[...u,a];return Ge(a),S})},He=()=>{if(!a)return;const u=Gi(a.content),x=Gi(a.translatedContent);ve({content:u,translatedContent:x})},Ke=async()=>{if(!a)return;if(!Y(a)){setShowToast({type:"error",msg:"       ."});return}const u=Gi(a.content),x={};for(const S of Object.keys(u)){const k=u[S];if(k){const _=await Zx(k);x[S]=um(_)}}ve({content:u,translatedContent:x,isTranslated:!0}),alert("Translation Complete!")},Ft=u=>{const x=new Set(["zeev@sure.co.il","reports@lp-law.co.il"]),S=new Set;if(u.ownerEmail)S.add(u.ownerEmail);else{const k=tr.find(_=>_.id===u.createdBy);k!=null&&k.email&&S.add(k.email)}return{to:Array.from(x),cc:Array.from(S)}},de=u=>{var _;const x=u.insurerName||"Report",S=u.insuredName||"Insured",k=(((_=u.reportHistory)==null?void 0:_.length)||0)+1;return`${x} - ${S} - Report ${k}`},Bt=u=>({...u,invoiceFiles:[],policyFile:void 0,expensesSourceFile:void 0}),un=(u,x)=>{var _,U;const S=u.content?xr(u.content):{},k=u.translatedContent?xr(u.translatedContent):{};return{createdAt:x,reportDate:u.reportDate,subject:de(u),status:"SENT",odakanitNo:u.odakanitNo,recipientId:u.recipientId,insurerName:u.insurerName,lineSlipNo:u.lineSlipNo,marketRef:u.marketRef,insuredName:u.insuredName,plaintiffName:u.plaintiffName,plaintiffTitle:u.plaintiffTitle,policyPeriodStart:u.policyPeriodStart,policyPeriodEnd:u.policyPeriodEnd,retroStart:u.retroStart,retroEnd:u.retroEnd,filenameTag:u.filenameTag,fileNameTitles:u.fileNameTitles?[...u.fileNameTitles]:void 0,selectedSections:[...u.selectedSections||[]],content:S,translatedContent:k,executiveSummary:u.executiveSummary,complaintAnalysis:u.complaintAnalysis?xr(u.complaintAnalysis):void 0,requiresExpenses:!!u.requiresExpenses,isWaitingForInvoices:!!u.isWaitingForInvoices,isTranslated:!!u.isTranslated,selectedTimeline:u.selectedTimeline,selectedTimelineImage:u.selectedTimelineImage,expensesItems:(_=u.expensesItems)!=null&&_.length?xr(u.expensesItems):void 0,expenseWorksheet:u.expenseWorksheet?xr(u.expenseWorksheet):void 0,expensesSum:u.expensesSum,paymentRecommendation:u.paymentRecommendation,reportNotes:(U=u.reportNotes)!=null&&U.length?xr(u.reportNotes):void 0,ownerName:u.ownerName,ownerEmail:u.ownerEmail}},ur=(u,x,S)=>{var k;return{id:It(),reportNumber:(((k=u.reportHistory)==null?void 0:k.length)||0)+1,subject:de(u),date:S,sent:!0,fileName:x,snapshot:un(u,S)}},Xt=(u,x,S)=>{if(typeof window>"u")return;const k=u.to.join(";"),_=new URLSearchParams;u.cc.length&&_.append("cc",u.cc.join(";")),_.append("subject",x),_.append("body",S);const U=`mailto:${k}?${_.toString()}`;window.location.href=U},dr=async()=>{if(a){G(!0);try{const u=await Vi(a),x=fl(a),S=URL.createObjectURL(u),k=document.createElement("a");k.href=S,k.download=x,document.body.appendChild(k),k.click(),k.remove(),URL.revokeObjectURL(S)}catch(u){console.error("PDF download failed",u),alert(" -PDF .  .")}finally{G(!1)}}},bn=()=>{a&&((e==null?void 0:e.role)==="ADMIN"?(je(!1),le(!0)):d())},dn=()=>{var S,k;if(!a||(e==null?void 0:e.role)!=="ADMIN")return;if(a.status!=="SENT"){setShowToast({msg:"       (SENT).",type:"error"});return}if(!Y(a)){setShowToast({msg:"   /   .       .",type:"error"});return}if(((k=(S=a.reportReview)==null?void 0:S.issues)==null?void 0:k.some(_=>(_.origin??"INTERNAL")==="EXTERNAL"&&_.status!=="DONE"&&_.externalAction==="REQUIRES_HEBREW"))??!1){setShowToast({msg:"      .    /      .",type:"error"});return}if(!(a.isTranslated&&a.translatedContent&&Object.values(a.translatedContent).some(_=>_&&_.trim().length>0))){setShowToast({msg:"    .      .",type:"error"});return}je(!0),le(!0)},Kn=async(u,x)=>{if(!a)return;const S={...a,selectedEmailTemplate:x,emailBodyDraft:u};ve({selectedEmailTemplate:x,emailBodyDraft:u}),Pe(!0);let k=null,_="";try{const U=await Vi(S),pe=await Au(U),ue=fl(S);k=Ft(S),_=de(S),await Su({to:k.to,cc:k.cc,subject:_,body:u,attachmentBase64:pe,attachmentName:ue})?setShowToast({msg:"  .",type:"success"}):setShowToast({msg:"         .",type:"error"})}catch(U){console.error("Email send failed",U),setShowToast({msg:"         .",type:"error"})}finally{k&&(Xt(k,_||de(S),u),d(),le(!1)),Pe(!1)}},fr=async(u,x)=>{var pe;if(!a||(e==null?void 0:e.role)!=="ADMIN")return;const S={...a,selectedEmailTemplate:x,emailBodyDraft:u};ve({selectedEmailTemplate:x,emailBodyDraft:u}),Pe(!0);let k=null,_="",U="";try{const ue=await Vi(S),re=await Au(ue);U=fl(S),k=Ft(S),_=`UPDATED: ${de(S)}`,await Su({to:k.to,cc:k.cc,subject:_,body:u,attachmentBase64:re,attachmentName:U})?setShowToast({msg:"   ( ).",type:"success"}):setShowToast({msg:"         .",type:"error"});const At=new Date().toISOString(),Kr=ur({...a,status:"SENT",sentAt:At},U,At),Hs=(((pe=a.reportHistory)==null?void 0:pe.length)||0)+1,Us={...Kr,subject:`Resent #${Hs}  ${Kr.subject}`},pr={...a,status:"SENT",sentAt:At,reportHistory:[...a.reportHistory||[],Us],selectedEmailTemplate:void 0,emailBodyDraft:void 0};st(pr),Ge(pr,At),We(pr,At,Us.fileName||U,!0),o(pr),i(Nm=>Nm.map(tc=>tc.id===pr.id?pr:tc))}catch(ue){console.error("Resend email failed",ue),setShowToast({msg:"         .",type:"error"})}finally{if(k){const ue=_||`UPDATED: ${de(a)}`;Xt(k,ue,u),le(!1)}je(!1),Pe(!1)}},d=()=>{var _;if(!a)return;let u="READY_TO_SEND",x=a.sentAt,S=a;if((e==null?void 0:e.role)==="ADMIN"){u="SENT",x=new Date().toISOString();const U=fl(Bt(a)),pe=ur({...a},U,x);S={...a,reportHistory:[...a.reportHistory||[],pe],selectedEmailTemplate:void 0,emailBodyDraft:void 0}}else((e==null?void 0:e.role)==="FINANCE"||(e==null?void 0:e.role)==="SUB_ADMIN")&&(u="TASK_ASSIGNED");const k={...S,status:u,sentAt:x};if(st(k),Ge(k,x||new Date().toISOString()),u==="SENT"&&x){const U=(_=k.reportHistory)==null?void 0:_[k.reportHistory.length-1];We(k,x,U==null?void 0:U.fileName,!1)}o(k),i(U=>U.find(ue=>ue.id===k.id)?U.map(ue=>ue.id===k.id?k:ue):[...U,k]),r("DASHBOARD")},J=(u,x)=>{e&&(O(u,S=>{const k=[{id:It(),authorId:e.id,authorName:e.name,message:x,createdAt:new Date().toISOString()},...S.reportNotes||[]];return{...S,reportNotes:k}}),ee({id:`note-${Date.now()}`,message:`${e.name} added a note: "${x}"`,createdAt:new Date().toISOString()}))},ie=(u,x)=>{O(u,S=>{const k=S.expenseWorksheet||Cn(),_={id:It(),timestamp:new Date().toISOString(),userId:(e==null?void 0:e.id)||"system",userName:(e==null?void 0:e.name)||"System",action:x.action||"UPDATE",details:x.details};return{...S,expenseWorksheet:{...k,history:[_,...k.history||[]]}}})},ae=(u,x,S)=>{e&&(O(u,k=>{const _=k.expenseWorksheet||Cn(),U={id:It(),rowId:x,authorId:e.id,authorName:e.name,message:S,createdAt:new Date().toISOString()};return{...k,expenseWorksheet:{..._,notes:[U,..._.notes||[]]}}}),ie(u,{action:"NOTE_ADDED",details:S}))},we=u=>{const x=new Date().toISOString();O(u,S=>({...S,deletedAt:x,deletedBy:e==null?void 0:e.id}))},he=u=>{O(u,x=>{const S={...x};return delete S.deletedAt,delete S.deletedBy,S})},Rt=(u,x)=>{O(u,S=>{const k=S.expenseWorksheet||Cn();return{...S,expenseWorksheet:{...k,notes:k.notes.map(_=>_.id===x?{..._,resolved:!0,resolvedAt:new Date().toISOString()}:_)}}})},Jt=(u,x)=>{!x.amount||x.amount<=0||O(u,S=>{var Kr,Hs;const k=S.expenseWorksheet||Cn(),_=sn.find(Us=>Us.value===x.category),U=(_==null?void 0:_.type)||"EXPENSE",pe=x.category==="OTHER"?((Kr=x.customLabel)==null?void 0:Kr.trim())||"Other expense":(_==null?void 0:_.label)||"Expense",ue={id:It(),type:U,category:x.category,label:pe,serviceProvider:U==="EXPENSE"?(Hs=x.serviceProvider)==null?void 0:Hs.trim():void 0,amount:x.amount,createdBy:e==null?void 0:e.id,createdAt:new Date().toISOString()},re=[...k.rows||[],ue],qt=Zl(re),mr=wg(re),At={id:It(),timestamp:new Date().toISOString(),userId:(e==null?void 0:e.id)||"system",userName:(e==null?void 0:e.name)||"System",action:"ROW_ADDED",details:`${pe} ${ue.amount.toLocaleString()}`};return{...S,expenseWorksheet:{...k,rows:re,totals:qt,history:[At,...k.history||[]]},expensesItems:mr,expensesSum:qt.totalExpenses.toLocaleString()}})},Gr=u=>{const x=tr.find(re=>re.id===u.lawyerId);if(!x)return;const S=Ha(u.worksheet||[],e||void 0),k=Zl(S),_=u.invoiceFiles||[],U=_.length===0,pe={...rt(),createdBy:x.id,ownerName:x.name,ownerEmail:x.email,status:U?"WAITING_FOR_INVOICES":"TASK_ASSIGNED",odakanitNo:u.odakanitNo,financeInstructions:u.instructions,expensesSourceFile:u.file,selectedSections:["Update","Expenses breakdown"],isWaitingForInvoices:U,requiresExpenses:!0},ue={...pe,expensesItems:S.filter(re=>re.type==="EXPENSE").map(re=>({id:re.id,date:new Date().toISOString().split("T")[0],description:`${re.label}${re.serviceProvider?` (${re.serviceProvider})`:""}`,amount:re.amount,currency:"NIS"})),expensesSum:S.length?k.totalExpenses.toLocaleString():pe.expensesSum,invoiceFiles:_,expenseWorksheet:{status:"DRAFT",rows:S,history:[{id:It(),timestamp:new Date().toISOString(),userId:(e==null?void 0:e.id)||"system",userName:(e==null?void 0:e.name)||"System",action:"WORKSHEET_CREATED",details:`${S.length} rows added via finance request`}],notes:[],favorites:B[u.lawyerId]||[],totals:k}};i(re=>[...re,ue]),ee({id:`worksheet-${Date.now()}`,message:`New expense worksheet created for case ${u.odakanitNo||ue.id}`,createdAt:new Date().toISOString(),reportId:ue.id,severity:"info"})},mm=u=>{t(u),r("DASHBOARD"),o(null),c.current=!1,typeof window<"u"&&(localStorage.setItem(Ae.USER,u.username),localStorage.setItem(Ae.VIEW,"DASHBOARD"),localStorage.removeItem(Ae.CURRENT_REPORT))},pm=()=>{t(null),o(null),r("DASHBOARD"),c.current=!1,typeof window<"u"&&(localStorage.removeItem(Ae.USER),localStorage.removeItem(Ae.CURRENT_REPORT),localStorage.setItem(Ae.VIEW,"DASHBOARD"))};if(!e)return s.jsx(kg,{onLogin:mm});if(n==="CASE_FOLDER"&&ct){const u=Je[ct]||null,x=()=>{r("DASHBOARD")};return u?s.jsx(Ux,{folder:u,reports:l,onBack:x,onUpdateReTemplate:S=>{ut(k=>{const _=k[ct];if(!_)return k;const U={..._,reTemplate:S,updatedAt:new Date().toISOString()},pe={...k,[ct]:U};return rs(pe),pe})},onCreateReportInCase:()=>{const S=Je[ct];if(!S||!e)return;const k=new Date().toISOString(),_={...rt(),odakanitNo:S.odakanitNo,reportSubject:S.reTemplate||"",insuredName:S.insuredName||"",plaintiffName:S.plaintiffName||"",insurerName:S.insurerName||"",marketRef:S.marketRef||"",lineSlipNo:S.lineSlipNo||"",certificateRef:S.certificateRef||"",reportDate:k,updatedAt:k};if(o(_),r("STEP1"),typeof window<"u")try{localStorage.setItem(Ae.CURRENT_REPORT,_.id)}catch{}Ge(_,k)},onOpenReport:S=>{const k=l.find(_=>_.id===S);if(k&&(o(k),r("STEP1"),typeof window<"u"))try{localStorage.setItem(Ae.CURRENT_REPORT,k.id)}catch{}}}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:s.jsxs("div",{className:"max-w-md rounded-2xl bg-white p-6 text-center text-sm text-gray-700 shadow-sm border border-gray-200",children:[s.jsx("p",{className:"mb-3 font-semibold text-gray-900",children:"Case folder not found"}),s.jsx("p",{className:"mb-4 text-xs text-gray-500",children:"The requested case folder is no longer available. You can return to the dashboard and select another case."}),s.jsx("button",{type:"button",onClick:x,className:"inline-flex items-center rounded-full bg-lpBlue px-4 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-blue-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-lpBlue focus-visible:ring-offset-2",children:"Back to dashboard"})]})})}if(n==="DASHBOARD")return s.jsx(Eg,{user:e,reports:l,onNewReport:()=>{const u=rt();if(o(u),r("STEP1"),typeof window<"u")try{localStorage.setItem(Ae.CURRENT_REPORT,u.id)}catch{}},onSelectReport:u=>{const x=l.find(S=>S.id===u);if(x&&(o(x),r("STEP1"),typeof window<"u"))try{localStorage.setItem(Ae.CURRENT_REPORT,x.id)}catch{}},onLogout:pm,onUpdateReport:(u,x)=>{i(S=>S.map(k=>k.id===u?{...k,...x}:k))},onDeleteReport:u=>i(x=>x.filter(S=>S.id!==u)),onFinanceTaskCreate:Gr,caseTemplates:Yt,onStartTemplate:cn,onStartNextReport:Nt,archiveAfterMs:fg,favoriteProviders:B,onSaveFavorite:ye,onDeleteFavorite:Ne,onOpenWorksheet:ge,onRequestReminder:u=>{D(u),L(`Reminder for ${u.insuredName||"case"}`)},onRequestNote:u=>{te(u),X("")},onSoftDeleteReport:we,onRestoreReport:he,notifications:T,showNotifications:j,setShowNotifications:z,onClearNotifications:()=>R([]),dailySummaryOptIn:f,setDailySummaryOptIn:m,caseFolders:Je,onOpenCaseFolder:u=>{on(u),r("CASE_FOLDER")}});if(!a)return null;const hm=(((ec=a.reportHistory)==null?void 0:ec.length)||0)+1,qo=im(a.selectedSections||[]),Zo=qo.map((u,x)=>({id:`${x}-${u.replace(/\s+/g,"-")||"title"}`,label:u})).filter(u=>!!u.label),xm=am(qo),gm=a.fileNameTitles&&a.fileNameTitles.length?a.fileNameTitles:xm,ym=hm!==1&&Zo.length>0,vm=h.map(u=>{const x=qe(u.reportId);return x?{...u,report:x,title:`${x.insuredName||"Case"} (${x.ownerName})`}:null}).filter(Boolean),Ws=A?qe(A):null;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 pb-12",children:s.jsxs("div",{className:"max-w-5xl mx-auto pt-6 px-4",children:[s.jsx("div",{className:"flex justify-center mb-8",children:s.jsxs("div",{className:"flex items-center bg-white p-2 rounded-full shadow-sm",children:[s.jsx("div",{className:`px-4 py-1 rounded-full ${n==="STEP1"?"bg-lpBlue text-white font-bold":"text-gray-500"}`,children:"1. Setup"}),s.jsx(Ut,{className:"w-4 h-4 text-gray-300 mx-2"}),s.jsx("div",{className:`px-4 py-1 rounded-full ${n==="STEP2"?"bg-lpBlue text-white font-bold":"text-gray-500"}`,children:"2. Draft"}),s.jsx(Ut,{className:"w-4 h-4 text-gray-300 mx-2"}),s.jsx("div",{className:`px-4 py-1 rounded-full ${n==="PREVIEW"?"bg-lpBlue text-white font-bold":"text-gray-500"}`,children:"3. Preview"})]})}),n==="STEP1"&&s.jsx(Sg,{data:a,updateData:ve,onNext:()=>{Ee(),r("STEP2")},onBack:()=>{Ee(),r("DASHBOARD")},currentUser:e,timelineGallery:p,onAddTimelineImages:u=>v(x=>[...x,...u.map(S=>({...S,id:Date.now().toString()}))]),onRemoveTimelineImage:u=>v(x=>x.filter(S=>S.id!==u)),onSaveAndExit:()=>{Ee(),r("DASHBOARD")}}),n==="STEP2"&&s.jsx(bg,{data:a,updateData:ve,onNext:()=>{Ee(),r("PREVIEW")},onBack:()=>{Ee(),r("STEP1")},currentUser:e,timelineGallery:p,onAddTimelineImages:u=>{},onSaveAndExit:()=>{Ee(),r("DASHBOARD")},onTranslate:Ke,onFormatContent:He,onSubmitHebrewForReview:()=>$(a.id),onApproveHebrewForTranslation:()=>oe(a.id),onAddReviewIssues:u=>N(a.id,u),onMarkReviewIssueDone:u=>F(a.id,u),onAddExternalFeedbackIssues:(u,x)=>K(a.id,u,x),onReopenHebrewDueToExternalFeedback:()=>ne(a.id)}),n==="PREVIEW"&&(()=>{const u=ag(e==null?void 0:e.role),x=(e==null?void 0:e.role)==="LAWYER";return s.jsxs("div",{className:"space-y-6 animate-fade-in",dir:x?"rtl":void 0,lang:x?"he":void 0,children:[s.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>{Ee(),r("STEP2")},className:"flex items-center text-sm text-gray-600 bg-gray-100 px-3 py-1.5 rounded-full hover:bg-gray-200",children:[s.jsx(Xl,{className:"w-4 h-4 mr-1"}),u.backToStep2]}),s.jsxs("button",{onClick:()=>{Ee(),r("DASHBOARD")},className:"flex items-center text-sm text-lpBlue bg-blue-50 px-3 py-1.5 rounded-full hover:bg-blue-100",children:[s.jsx(Ho,{className:"w-4 h-4 mr-1"}),u.backToDashboard]})]}),s.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded shadow mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-lpBlue",children:u.title}),s.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[s.jsx("button",{onClick:()=>y(S=>!S),className:"flex items-center bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:g?u.toggleHide:u.toggleShow}),s.jsxs("button",{onClick:dr,disabled:W,className:"flex items-center bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded hover:bg-gray-50 disabled:opacity-50",children:[W?s.jsx(rn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ar,{className:"w-4 h-4 mr-2"}),u.downloadPdf]}),s.jsx("button",{onClick:()=>Be(!0),disabled:!ym,className:"flex items-center bg-white text-gray-700 border border-gray-300 px-4 py-2 rounded hover:bg-gray-50 disabled:opacity-40",children:u.editFileNames}),s.jsxs("button",{onClick:bn,className:"flex items-center bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:[s.jsx(Jl,{className:"w-4 h-4 mr-2"}),u.finalize]}),e.role==="ADMIN"&&s.jsxs("button",{onClick:dn,className:"flex items-center bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700",children:[s.jsx(Jl,{className:"w-4 h-4 mr-2"}),"   "]})]})]}),g?s.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 space-y-4",children:[s.jsx("div",{className:"flex items-center justify-end flex-wrap gap-3",children:s.jsx("span",{className:"text-xs text-gray-500",children:u.helperScroll})}),s.jsx("div",{className:"border rounded-2xl bg-gray-50 p-4 pr-6 max-h-[900px] overflow-auto shadow-inner",children:s.jsx("div",{className:"scale-[0.85] origin-top flex justify-center overflow-visible",children:s.jsx(vx,{data:a})})})]}):s.jsx("div",{className:"text-center text-gray-500 border border-dashed border-gray-300 rounded-2xl p-6 bg-gray-50",children:u.collapsedHint}),s.jsx("div",{className:"flex justify-start mt-4",children:s.jsx("button",{onClick:()=>r("STEP2"),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:u.backToEditing})})]})})()]})}),a&&s.jsx(Sx,{isOpen:fe,isSending:be,report:a,userId:e==null?void 0:e.id,onClose:()=>{be||(je(!1),le(!1))},onSend:gt?fr:Kn}),a&&s.jsx(bx,{isOpen:yt,availableTitles:Zo,selectedTitles:gm,onClose:()=>Be(!1),onSave:u=>{const x=u.map(S=>S.trim()).filter(Boolean);ve({fileNameTitles:x}),Be(!1)}}),se&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[200] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(Uo,{className:"w-4 h-4"})," Add Note"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Case: ",se.insuredName||se.odakanitNo||se.id]}),s.jsx(Ls,{clientId:Os,children:s.jsx("textarea",{className:"w-full border rounded p-3 text-sm",rows:4,value:w,onChange:u=>X(u.target.value),placeholder:"Write your note..."})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{te(null),X("")},className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded",children:"Cancel"}),s.jsx("button",{onClick:()=>{se&&w.trim()&&(J(se.id,w.trim()),te(null),X(""))},className:"px-4 py-2 bg-lpBlue text-white rounded hover:bg-blue-900",children:"Save"})]})]})}),Z&&s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[200] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(Ql,{className:"w-4 h-4"})," Send Reminder"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Case: ",Z.insuredName||Z.odakanitNo||Z.id]}),s.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Recipients"}),s.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:q,onChange:u=>C(u.target.value),children:[s.jsx("option",{value:"LAWYER",children:"Lawyer"}),s.jsx("option",{value:"SUB_ADMIN",children:"Sub-Admin"}),s.jsx("option",{value:"BOTH",children:"Both"})]}),s.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Message"}),s.jsx(Ls,{clientId:Os,children:s.jsx("textarea",{className:"w-full border rounded p-3 text-sm",rows:4,value:V,onChange:u=>L(u.target.value),placeholder:"Reminder details..."})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{D(null),L("")},className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded",children:"Cancel"}),s.jsx("button",{onClick:()=>{if(Z&&V.trim()){const u=[];(q==="LAWYER"||q==="BOTH")&&u.push(Z.ownerName),(q==="SUB_ADMIN"||q==="BOTH")&&u.push(...tr.filter(x=>x.role==="SUB_ADMIN").map(x=>x.name)),ee({id:`reminder-${Date.now()}`,message:`Reminder to ${u.join(", ")}: ${V.trim()}`,createdAt:new Date().toISOString(),reportId:Z.id}),D(null),L("")}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Send"})]})]})}),Ws&&s.jsx(Tg,{report:Ws,sessions:vm,onSwitch:I,onClose:Me,currentUser:e,onAddRowNote:ae,onResolveRowNote:Rt,onAddWorksheetRow:Jt,previousReport:l.filter(u=>u.id!==Ws.id&&u.odakanitNo&&u.odakanitNo===Ws.odakanitNo).sort((u,x)=>new Date(x.reportDate).getTime()-new Date(u.reportDate).getTime())[0]})]})},Tg=({report:e,sessions:t,onSwitch:n,onClose:r,currentUser:l,onAddRowNote:i,onResolveRowNote:a,onAddWorksheetRow:o,previousReport:c})=>{const[p,v]=b.useState("table"),[g,y]=b.useState(""),[T,R]=b.useState(null),[j,z]=b.useState({category:"EXPERT_OUR",serviceProvider:"",amount:"",customLabel:""}),f=e.expenseWorksheet||Cn(),m=f.rows.filter(w=>w.type==="EXPENSE"),h=f.rows.filter(w=>w.type==="ADJUSTMENT"),E=f.notes.filter(w=>!w.resolved),A=f.totals||Zl(f.rows),I=(l==null?void 0:l.role)==="FINANCE"||(l==null?void 0:l.role)==="SUB_ADMIN",B=sn.find(w=>w.value===j.category),H=(B==null?void 0:B.type)!=="ADJUSTMENT",se=w=>{g.trim()&&(i(e.id,w,g.trim()),y(""),R(null))},te=()=>{const w=parseFloat(j.amount);isNaN(w)||w<=0||(o(e.id,{category:j.category,serviceProvider:H?j.serviceProvider:void 0,amount:w,customLabel:j.customLabel}),z({category:"EXPERT_OUR",serviceProvider:"",amount:"",customLabel:""}))};return s.jsx("div",{className:"fixed inset-0 bg-black/40 z-[220] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center px-5 py-3 border-b bg-gray-50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Expense Worksheet"}),s.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:[e.insuredName||e.odakanitNo||"Case","  ",e.ownerName]})]}),s.jsx("button",{onClick:()=>r(e.id),className:"text-gray-500 hover:text-gray-800",children:s.jsx(kt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex border-b bg-white px-4 overflow-x-auto",children:t.map(w=>s.jsxs("button",{onClick:()=>n(w.reportId),className:`flex items-center gap-2 px-3 py-2 text-sm border-b-2 ${w.reportId===e.id?"border-lpBlue text-lpBlue font-bold":"border-transparent text-gray-400"}`,children:[w.title,s.jsx("span",{onClick:X=>{X.stopPropagation(),r(w.reportId)},className:"text-gray-400 hover:text-red-500",children:s.jsx(kt,{className:"w-3 h-3"})})]},w.reportId))}),s.jsx("div",{className:"flex gap-2 px-5 pt-4 text-sm font-semibold",children:["table","history","notes","compare"].map(w=>s.jsx("button",{onClick:()=>v(w),className:`px-3 py-1 rounded-full ${p===w?"bg-lpBlue text-white":"bg-gray-100 text-gray-500"}`,children:w==="table"?"Worksheet":w==="history"?"History":w==="notes"?`Notes (${E.length})`:"Compare"},w))}),s.jsxs("div",{className:"flex-1 overflow-auto p-5 space-y-4",children:[p==="table"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center bg-gray-50 rounded-lg py-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Total Expenses"}),s.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",A.totalExpenses.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Adjustments"}),s.jsxs("p",{className:"text-lg font-bold text-yellow-700",children:["",A.totalAdjustments.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase text-gray-400",children:"Balance Due"}),s.jsxs("p",{className:"text-lg font-bold text-green-700",children:["",A.totalBalance.toLocaleString()]})]})]}),I&&s.jsxs("div",{className:"border rounded-lg p-3 bg-amber-50 space-y-2",children:[s.jsx("p",{className:"text-xs font-bold text-amber-700",children:"  "}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[s.jsx("select",{value:j.category,onChange:w=>z({...j,category:w.target.value}),className:"border rounded text-xs p-2",children:sn.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))}),j.category==="OTHER"&&s.jsx("input",{className:"border rounded text-xs p-2",placeholder:" ",value:j.customLabel,onChange:w=>z({...j,customLabel:w.target.value})}),H&&s.jsx("input",{className:"border rounded text-xs p-2",placeholder:" ",value:j.serviceProvider,onChange:w=>z({...j,serviceProvider:w.target.value})}),s.jsx("input",{className:"border rounded text-xs p-2",placeholder:" ",type:"number",min:"0",value:j.amount,onChange:w=>z({...j,amount:w.target.value})}),s.jsx("button",{onClick:te,className:"bg-amber-500 text-white rounded text-xs font-bold px-3 py-2 hover:bg-amber-600",children:"Add"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-gray-600 mb-2",children:"Service Expenses"}),s.jsxs("div",{className:"space-y-2",children:[m.length===0&&s.jsx("p",{className:"text-xs text-gray-400",children:"No expenses recorded."}),m.map(w=>{const X=f.notes.filter(Z=>Z.rowId===w.id&&!Z.resolved).length;return s.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:w.label}),w.serviceProvider&&s.jsx("p",{className:"text-xs text-gray-500",children:w.serviceProvider})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-lpBlue",children:["",w.amount.toLocaleString()]}),s.jsxs("button",{className:"text-[10px] text-gray-400",onClick:()=>R(T===w.id?null:w.id),children:[" Notes (",X,")"]})]})]}),T===w.id&&s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx("input",{className:"flex-1 border rounded text-xs p-2",value:g,onChange:Z=>y(Z.target.value),placeholder:"Add note..."}),s.jsx("button",{onClick:()=>se(w.id),className:"px-3 py-1 text-xs bg-lpBlue text-white rounded",children:"Save"})]})]},w.id)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-gray-600 mb-2",children:"Adjustments"}),s.jsxs("div",{className:"space-y-2",children:[h.length===0&&s.jsx("p",{className:"text-xs text-gray-400",children:"No adjustments yet."}),h.map(w=>s.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("p",{className:"font-semibold text-sm",children:w.label}),s.jsxs("p",{className:"font-bold text-red-600",children:["",w.amount.toLocaleString()]})]})},w.id))]})]})]}),s.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"General Note"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 border rounded text-xs p-2",value:g,onChange:w=>y(w.target.value),placeholder:"Add note for worksheet..."}),s.jsx("button",{onClick:()=>se(void 0),className:"px-3 py-1 text-xs bg-lpBlue text-white rounded",children:"Save"})]})]})]}),p==="history"&&s.jsxs("div",{className:"space-y-2",children:[f.history.length===0&&s.jsx("p",{className:"text-xs text-gray-400",children:"No history recorded yet."}),f.history.map(w=>s.jsxs("div",{className:"border rounded-lg p-3 bg-white flex justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:w.action}),w.details&&s.jsx("p",{className:"text-xs text-gray-500",children:w.details})]}),s.jsxs("div",{className:"text-right text-[10px] text-gray-400",children:[s.jsx("p",{children:w.userName}),s.jsx("p",{children:new Date(w.timestamp).toLocaleString()})]})]},w.id))]}),p==="notes"&&s.jsxs("div",{className:"space-y-2",children:[f.notes.length===0&&s.jsx("p",{className:"text-xs text-gray-400",children:"No notes yet."}),f.notes.map(w=>s.jsx("div",{className:`border rounded-lg p-3 ${w.resolved?"bg-green-50":"bg-white"}`,children:s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:w.authorName}),s.jsx("p",{className:"text-xs text-gray-500",children:w.message})]}),s.jsxs("div",{className:"text-right text-[10px] text-gray-400",children:[s.jsx("p",{children:new Date(w.createdAt).toLocaleString()}),!w.resolved&&s.jsx("button",{onClick:()=>a(e.id,w.id),className:"text-xs text-green-600 hover:underline",children:"Resolve"})]})]})},w.id))]}),p==="compare"&&s.jsx("div",{children:c!=null&&c.expenseWorksheet?s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-bold text-gray-600 mb-2",children:"Previous Report"}),s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:new Date(c.reportDate).toLocaleDateString()}),s.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",c.expenseWorksheet.totals.totalBalance.toLocaleString()]})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-bold text-gray-600 mb-2",children:"Current Report"}),s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:new Date(e.reportDate).toLocaleDateString()}),s.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",A.totalBalance.toLocaleString()]})]})]}):s.jsx("p",{className:"text-xs text-gray-400",children:"No previous worksheet available for comparison."})})]})]})})},fm=document.getElementById("root");if(!fm)throw new Error("Could not find root element to mount to");const Rg=Ki.createRoot(fm);Rg.render(s.jsx(Ya.StrictMode,{children:s.jsx(Cg,{})}));
